function QR8bitByte(a){this.mode=QRMode.MODE_8BIT_BYTE,this.data=a}function QRCode(a,b){this.typeNumber=a,this.errorCorrectLevel=b,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=new Array}function QRPolynomial(a,b){if(void 0==a.length)throw new Error(a.length+"/"+b);for(var c=0;c<a.length&&0==a[c];)c++;this.num=new Array(a.length-c+b);for(var d=0;d<a.length-c;d++)this.num[d]=a[d+c]}function QRRSBlock(a,b){this.totalCount=a,this.dataCount=b}function QRBitBuffer(){this.buffer=new Array,this.length=0}document.numeric={modules:{},numericTasks:{},key:{settings:"numericSettings",connections:"numericConnections",deviceId:"numericDeviceId",activitiesMeta:"numericActivitiesMeta",bookmarkedActivities:"numericBookmarkedActivities",currentActivitySummary:"numericCurrentActivitySummary",storedActivitySummaries:"numericStoredActivitySummaries",messages:"numericMessages"},url:{base:{fs:"numericdata/",cdv:"cdvfile://localhost/persistent/",chrome:"filesystem:SERVERNAME/persistent/",local:"/assets/tasks/local/",server:"https://www.sparkydots.com/starpractice/data/"}},path:{activity:"touch",activity:"activity/",list:"activity/meta/list",meta:"activity/meta/",body:"activity/body/",result:"result/",persistence:"persistence/",connections:"connections"},defaultActivitiesList:["com.sparkydots.numeric.tasks.t.basic_math","com.sparkydots.numeric.tasks.ssat.a.q00"],defaultSettings:{appVersion:1,historyPageSize:10,historyServerSync:!1,mainServerAddress:"https://www.sparkydots.com/starpractice/data/",linkSubmitShow:!1,linkConnectShow:!1,linkSettingsShow:!1},defaultTeachersList:[{id:0,name:"Mr. Aleman",newItems:1},{id:2,name:"鬼塚 英吉",newItems:3}]};try{!function(a){var b=location.protocol,c=location.hostname,d=location.port;d.length>0&&(d=":"+d);var e=b+"//"+c+d;a.document.numeric.url.base.chrome=a.document.numeric.url.base.chrome.replace("SERVERNAME",e)}(this)}catch(e){console.log(e)}QR8bitByte.prototype={getLength:function(){return this.data.length},write:function(a){for(var b=0;b<this.data.length;b++)a.put(this.data.charCodeAt(b),8)}},QRCode.prototype={addData:function(a){var b=new QR8bitByte(a);this.dataList.push(b),this.dataCache=null},isDark:function(a,b){if(0>a||this.moduleCount<=a||0>b||this.moduleCount<=b)throw new Error(a+","+b);return this.modules[a][b]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(a,b){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var c=0;c<this.moduleCount;c++){this.modules[c]=new Array(this.moduleCount);for(var d=0;d<this.moduleCount;d++)this.modules[c][d]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(a,b),this.typeNumber>=7&&this.setupTypeNumber(a),null==this.dataCache&&(this.dataCache=QRCode.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,b)},setupPositionProbePattern:function(a,b){for(var c=-1;7>=c;c++)if(!(-1>=a+c||this.moduleCount<=a+c))for(var d=-1;7>=d;d++)-1>=b+d||this.moduleCount<=b+d||(this.modules[a+c][b+d]=c>=0&&6>=c&&(0==d||6==d)||d>=0&&6>=d&&(0==c||6==c)||c>=2&&4>=c&&d>=2&&4>=d?!0:!1)},getBestMaskPattern:function(){for(var a=0,b=0,c=0;8>c;c++){this.makeImpl(!0,c);var d=QRUtil.getLostPoint(this);(0==c||a>d)&&(a=d,b=c)}return b},createMovieClip:function(a,b,c){var d=a.createEmptyMovieClip(b,c),e=1;this.make();for(var f=0;f<this.modules.length;f++)for(var g=f*e,h=0;h<this.modules[f].length;h++){var i=h*e,j=this.modules[f][h];j&&(d.beginFill(0,100),d.moveTo(i,g),d.lineTo(i+e,g),d.lineTo(i+e,g+e),d.lineTo(i,g+e),d.endFill())}return d},setupTimingPattern:function(){for(var a=8;a<this.moduleCount-8;a++)null==this.modules[a][6]&&(this.modules[a][6]=a%2==0);for(var b=8;b<this.moduleCount-8;b++)null==this.modules[6][b]&&(this.modules[6][b]=b%2==0)},setupPositionAdjustPattern:function(){for(var a=QRUtil.getPatternPosition(this.typeNumber),b=0;b<a.length;b++)for(var c=0;c<a.length;c++){var d=a[b],e=a[c];if(null==this.modules[d][e])for(var f=-2;2>=f;f++)for(var g=-2;2>=g;g++)this.modules[d+f][e+g]=-2==f||2==f||-2==g||2==g||0==f&&0==g?!0:!1}},setupTypeNumber:function(a){for(var b=QRUtil.getBCHTypeNumber(this.typeNumber),c=0;18>c;c++){var d=!a&&1==(b>>c&1);this.modules[Math.floor(c/3)][c%3+this.moduleCount-8-3]=d}for(var c=0;18>c;c++){var d=!a&&1==(b>>c&1);this.modules[c%3+this.moduleCount-8-3][Math.floor(c/3)]=d}},setupTypeInfo:function(a,b){for(var c=this.errorCorrectLevel<<3|b,d=QRUtil.getBCHTypeInfo(c),e=0;15>e;e++){var f=!a&&1==(d>>e&1);6>e?this.modules[e][8]=f:8>e?this.modules[e+1][8]=f:this.modules[this.moduleCount-15+e][8]=f}for(var e=0;15>e;e++){var f=!a&&1==(d>>e&1);8>e?this.modules[8][this.moduleCount-e-1]=f:9>e?this.modules[8][15-e-1+1]=f:this.modules[8][15-e-1]=f}this.modules[this.moduleCount-8][8]=!a},mapData:function(a,b){for(var c=-1,d=this.moduleCount-1,e=7,f=0,g=this.moduleCount-1;g>0;g-=2)for(6==g&&g--;;){for(var h=0;2>h;h++)if(null==this.modules[d][g-h]){var i=!1;f<a.length&&(i=1==(a[f]>>>e&1));var j=QRUtil.getMask(b,d,g-h);j&&(i=!i),this.modules[d][g-h]=i,e--,-1==e&&(f++,e=7)}if(d+=c,0>d||this.moduleCount<=d){d-=c,c=-c;break}}}},QRCode.PAD0=236,QRCode.PAD1=17,QRCode.createData=function(a,b,c){for(var d=QRRSBlock.getRSBlocks(a,b),e=new QRBitBuffer,f=0;f<c.length;f++){var g=c[f];e.put(g.mode,4),e.put(g.getLength(),QRUtil.getLengthInBits(g.mode,a)),g.write(e)}for(var h=0,f=0;f<d.length;f++)h+=d[f].dataCount;if(e.getLengthInBits()>8*h)throw new Error("code length overflow. ("+e.getLengthInBits()+">"+8*h+")");for(e.getLengthInBits()+4<=8*h&&e.put(0,4);e.getLengthInBits()%8!=0;)e.putBit(!1);for(;;){if(e.getLengthInBits()>=8*h)break;if(e.put(QRCode.PAD0,8),e.getLengthInBits()>=8*h)break;e.put(QRCode.PAD1,8)}return QRCode.createBytes(e,d)},QRCode.createBytes=function(a,b){for(var c=0,d=0,e=0,f=new Array(b.length),g=new Array(b.length),h=0;h<b.length;h++){var i=b[h].dataCount,j=b[h].totalCount-i;d=Math.max(d,i),e=Math.max(e,j),f[h]=new Array(i);for(var k=0;k<f[h].length;k++)f[h][k]=255&a.buffer[k+c];c+=i;var l=QRUtil.getErrorCorrectPolynomial(j),m=new QRPolynomial(f[h],l.getLength()-1),n=m.mod(l);g[h]=new Array(l.getLength()-1);for(var k=0;k<g[h].length;k++){var o=k+n.getLength()-g[h].length;g[h][k]=o>=0?n.get(o):0}}for(var p=0,k=0;k<b.length;k++)p+=b[k].totalCount;for(var q=new Array(p),r=0,k=0;d>k;k++)for(var h=0;h<b.length;h++)k<f[h].length&&(q[r++]=f[h][k]);for(var k=0;e>k;k++)for(var h=0;h<b.length;h++)k<g[h].length&&(q[r++]=g[h][k]);return q};for(var QRMode={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},QRErrorCorrectLevel={L:1,M:0,Q:3,H:2},QRMaskPattern={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},QRUtil={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(a){for(var b=a<<10;QRUtil.getBCHDigit(b)-QRUtil.getBCHDigit(QRUtil.G15)>=0;)b^=QRUtil.G15<<QRUtil.getBCHDigit(b)-QRUtil.getBCHDigit(QRUtil.G15);return(a<<10|b)^QRUtil.G15_MASK},getBCHTypeNumber:function(a){for(var b=a<<12;QRUtil.getBCHDigit(b)-QRUtil.getBCHDigit(QRUtil.G18)>=0;)b^=QRUtil.G18<<QRUtil.getBCHDigit(b)-QRUtil.getBCHDigit(QRUtil.G18);return a<<12|b},getBCHDigit:function(a){for(var b=0;0!=a;)b++,a>>>=1;return b},getPatternPosition:function(a){return QRUtil.PATTERN_POSITION_TABLE[a-1]},getMask:function(a,b,c){switch(a){case QRMaskPattern.PATTERN000:return(b+c)%2==0;case QRMaskPattern.PATTERN001:return b%2==0;case QRMaskPattern.PATTERN010:return c%3==0;case QRMaskPattern.PATTERN011:return(b+c)%3==0;case QRMaskPattern.PATTERN100:return(Math.floor(b/2)+Math.floor(c/3))%2==0;case QRMaskPattern.PATTERN101:return b*c%2+b*c%3==0;case QRMaskPattern.PATTERN110:return(b*c%2+b*c%3)%2==0;case QRMaskPattern.PATTERN111:return(b*c%3+(b+c)%2)%2==0;default:throw new Error("bad maskPattern:"+a)}},getErrorCorrectPolynomial:function(a){for(var b=new QRPolynomial([1],0),c=0;a>c;c++)b=b.multiply(new QRPolynomial([1,QRMath.gexp(c)],0));return b},getLengthInBits:function(a,b){if(b>=1&&10>b)switch(a){case QRMode.MODE_NUMBER:return 10;case QRMode.MODE_ALPHA_NUM:return 9;case QRMode.MODE_8BIT_BYTE:return 8;case QRMode.MODE_KANJI:return 8;default:throw new Error("mode:"+a)}else if(27>b)switch(a){case QRMode.MODE_NUMBER:return 12;case QRMode.MODE_ALPHA_NUM:return 11;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 10;default:throw new Error("mode:"+a)}else{if(!(41>b))throw new Error("type:"+b);switch(a){case QRMode.MODE_NUMBER:return 14;case QRMode.MODE_ALPHA_NUM:return 13;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 12;default:throw new Error("mode:"+a)}}},getLostPoint:function(a){for(var b=a.getModuleCount(),c=0,d=0;b>d;d++)for(var e=0;b>e;e++){for(var f=0,g=a.isDark(d,e),h=-1;1>=h;h++)if(!(0>d+h||d+h>=b))for(var i=-1;1>=i;i++)0>e+i||e+i>=b||(0!=h||0!=i)&&g==a.isDark(d+h,e+i)&&f++;f>5&&(c+=3+f-5)}for(var d=0;b-1>d;d++)for(var e=0;b-1>e;e++){var j=0;a.isDark(d,e)&&j++,a.isDark(d+1,e)&&j++,a.isDark(d,e+1)&&j++,a.isDark(d+1,e+1)&&j++,(0==j||4==j)&&(c+=3)}for(var d=0;b>d;d++)for(var e=0;b-6>e;e++)a.isDark(d,e)&&!a.isDark(d,e+1)&&a.isDark(d,e+2)&&a.isDark(d,e+3)&&a.isDark(d,e+4)&&!a.isDark(d,e+5)&&a.isDark(d,e+6)&&(c+=40);for(var e=0;b>e;e++)for(var d=0;b-6>d;d++)a.isDark(d,e)&&!a.isDark(d+1,e)&&a.isDark(d+2,e)&&a.isDark(d+3,e)&&a.isDark(d+4,e)&&!a.isDark(d+5,e)&&a.isDark(d+6,e)&&(c+=40);for(var k=0,e=0;b>e;e++)for(var d=0;b>d;d++)a.isDark(d,e)&&k++;var l=Math.abs(100*k/b/b-50)/5;return c+=10*l}},QRMath={glog:function(a){if(1>a)throw new Error("glog("+a+")");return QRMath.LOG_TABLE[a]},gexp:function(a){for(;0>a;)a+=255;for(;a>=256;)a-=255;return QRMath.EXP_TABLE[a]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},i=0;8>i;i++)QRMath.EXP_TABLE[i]=1<<i;for(var i=8;256>i;i++)QRMath.EXP_TABLE[i]=QRMath.EXP_TABLE[i-4]^QRMath.EXP_TABLE[i-5]^QRMath.EXP_TABLE[i-6]^QRMath.EXP_TABLE[i-8];for(var i=0;255>i;i++)QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]]=i;QRPolynomial.prototype={get:function(a){return this.num[a]},getLength:function(){return this.num.length},multiply:function(a){for(var b=new Array(this.getLength()+a.getLength()-1),c=0;c<this.getLength();c++)for(var d=0;d<a.getLength();d++)b[c+d]^=QRMath.gexp(QRMath.glog(this.get(c))+QRMath.glog(a.get(d)));return new QRPolynomial(b,0)},mod:function(a){if(this.getLength()-a.getLength()<0)return this;for(var b=QRMath.glog(this.get(0))-QRMath.glog(a.get(0)),c=new Array(this.getLength()),d=0;d<this.getLength();d++)c[d]=this.get(d);for(var d=0;d<a.getLength();d++)c[d]^=QRMath.gexp(QRMath.glog(a.get(d))+b);return new QRPolynomial(c,0).mod(a)}},QRRSBlock.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],QRRSBlock.getRSBlocks=function(a,b){var c=QRRSBlock.getRsBlockTable(a,b);if(void 0==c)throw new Error("bad rs block @ typeNumber:"+a+"/errorCorrectLevel:"+b);for(var d=c.length/3,e=new Array,f=0;d>f;f++)for(var g=c[3*f+0],h=c[3*f+1],i=c[3*f+2],j=0;g>j;j++)e.push(new QRRSBlock(h,i));return e},QRRSBlock.getRsBlockTable=function(a,b){switch(b){case QRErrorCorrectLevel.L:return QRRSBlock.RS_BLOCK_TABLE[4*(a-1)+0];case QRErrorCorrectLevel.M:return QRRSBlock.RS_BLOCK_TABLE[4*(a-1)+1];case QRErrorCorrectLevel.Q:return QRRSBlock.RS_BLOCK_TABLE[4*(a-1)+2];case QRErrorCorrectLevel.H:return QRRSBlock.RS_BLOCK_TABLE[4*(a-1)+3];default:return void 0}},QRBitBuffer.prototype={get:function(a){var b=Math.floor(a/8);return 1==(this.buffer[b]>>>7-a%8&1)},put:function(a,b){for(var c=0;b>c;c++)this.putBit(1==(a>>>b-c-1&1))},getLengthInBits:function(){return this.length},putBit:function(a){var b=Math.floor(this.length/8);this.buffer.length<=b&&this.buffer.push(0),a&&(this.buffer[b]|=128>>>this.length%8),this.length++}},function(a){var b=32768,c=0,d=1,e=2,f=6,g=!0,h=32768,i=64,j=8192,k=2*b,l=3,m=258,n=16,o=8192,p=13;o>h&&alert("error: zip_INBUFSIZ is too small"),b<<1>1<<n&&alert("error: zip_WSIZE is too large"),p>n-1&&alert("error: zip_HASH_BITS is too large"),(8>p||258!=m)&&alert("error: Code too clever");var q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb=o,tb=1<<p,ub=tb-1,vb=b-1,wb=0,xb=4096,yb=m+l+1,zb=b-yb,Ab=1,Bb=15,Cb=7,Db=29,Eb=256,Fb=256,Gb=Eb+1+Db,Hb=30,Ib=19,Jb=16,Kb=17,Lb=18,Mb=2*Gb+1,Nb=parseInt((p+l-1)/l),Ob=null,Pb=function(){this.fc=0,this.dl=0},Qb=function(){this.dyn_tree=null,this.static_tree=null,this.extra_bits=null,this.extra_base=0,this.elems=0,this.max_length=0,this.max_code=0},Rb=function(a,b,c,d){this.good_length=a,this.max_lazy=b,this.nice_length=c,this.max_chain=d},Sb=function(){this.next=null,this.len=0,this.ptr=new Array(j),this.off=0},Tb=new Array(0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0),Ub=new Array(0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13),Vb=new Array(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7),Wb=new Array(16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15),Xb=new Array(new Rb(0,0,0,0),new Rb(4,4,8,4),new Rb(4,5,16,8),new Rb(4,6,32,32),new Rb(4,4,16,16),new Rb(8,16,32,32),new Rb(8,16,128,128),new Rb(8,32,128,256),new Rb(32,128,258,1024),new Rb(32,258,258,4096)),Yb=function(a){var b;if(a?1>a?a=1:a>9&&(a=9):a=f,Q=a,t=!1,M=!1,null==Ob){for(q=r=s=null,Ob=new Array(j),x=new Array(k),y=new Array(sb),z=new Array(h+i),A=new Array(1<<n),T=new Array(Mb),b=0;Mb>b;b++)T[b]=new Pb;for(U=new Array(2*Hb+1),b=0;2*Hb+1>b;b++)U[b]=new Pb;for(V=new Array(Gb+2),b=0;Gb+2>b;b++)V[b]=new Pb;for(W=new Array(Hb),b=0;Hb>b;b++)W[b]=new Pb;for(X=new Array(2*Ib+1),b=0;2*Ib+1>b;b++)X[b]=new Pb;Y=new Qb,Z=new Qb,$=new Qb,_=new Array(Bb+1),ab=new Array(2*Gb+1),db=new Array(2*Gb+1),eb=new Array(m-l+1),fb=new Array(512),gb=new Array(Db),hb=new Array(Hb),ib=new Array(parseInt(o/8))}},Zb=function(a){a.next=q,q=a},$b=function(){var a;return null!=q?(a=q,q=q.next):a=new Sb,a.next=null,a.len=a.off=0,a},_b=function(a){return A[b+a]},ac=function(a,c){return A[b+a]=c},bc=function(a){Ob[v+u++]=a,v+u==j&&Hc()},cc=function(a){a&=65535,j-2>v+u?(Ob[v+u++]=255&a,Ob[v+u++]=a>>>8):(bc(255&a),bc(a>>>8))},dc=function(){E=(E<<Nb^255&x[K+l-1])&ub,F=_b(E),A[K&vb]=F,ac(E,K)},ec=function(a,b){Ec(b[a].fc,b[a].dl)},fc=function(a){return 255&(256>a?fb[a]:fb[256+(a>>7)])},gc=function(a,b,c){return a[b].fc<a[c].fc||a[b].fc==a[c].fc&&db[b]<=db[c]},hc=function(a,b,c){var d;for(d=0;c>d&&rb<qb.length;d++)a[b+d]=255&qb.charCodeAt(rb++);return d},ic=function(){var a;for(a=0;tb>a;a++)A[b+a]=0;if(P=Xb[Q].max_lazy,R=Xb[Q].good_length,g||(S=Xb[Q].nice_length),O=Xb[Q].max_chain,K=0,D=0,N=hc(x,0,2*b),0>=N)return M=!0,void(N=0);for(M=!1;yb>N&&!M;)kc();for(E=0,a=0;l-1>a;a++)E=(E<<Nb^255&x[a])&ub},jc=function(a){var b,c,d=O,e=K,f=J,h=K>zb?K-zb:wb,i=K+m,j=x[e+f-1],k=x[e+f];J>=R&&(d>>=2);do if(b=a,x[b+f]==k&&x[b+f-1]==j&&x[b]==x[e]&&x[++b]==x[e+1]){e+=2,b++;do;while(x[++e]==x[++b]&&x[++e]==x[++b]&&x[++e]==x[++b]&&x[++e]==x[++b]&&x[++e]==x[++b]&&x[++e]==x[++b]&&x[++e]==x[++b]&&x[++e]==x[++b]&&i>e);if(c=m-(i-e),e=i-m,c>f){if(L=a,f=c,g){if(c>=m)break}else if(c>=S)break;j=x[e+f-1],k=x[e+f]}}while((a=A[a&vb])>h&&0!=--d);return f},kc=function(){var a,c,d=k-N-K;if(-1==d)d--;else if(K>=b+zb){for(a=0;b>a;a++)x[a]=x[a+b];for(L-=b,K-=b,D-=b,a=0;tb>a;a++)c=_b(a),ac(a,c>=b?c-b:wb);for(a=0;b>a;a++)c=A[a],A[a]=c>=b?c-b:wb;d+=b}M||(a=hc(x,K+N,d),0>=a?M=!0:N+=a)},lc=function(){for(;0!=N&&null==r;){var a;if(dc(),F!=wb&&zb>=K-F&&(I=jc(F),I>N&&(I=N)),I>=l)if(a=Bc(K-L,I-l),N-=I,P>=I){I--;do K++,dc();while(0!=--I);K++}else K+=I,I=0,E=255&x[K],E=(E<<Nb^255&x[K+1])&ub;else a=Bc(0,255&x[K]),N--,K++;for(a&&(Ac(0),D=K);yb>N&&!M;)kc()}},mc=function(){for(;0!=N&&null==r;){if(dc(),J=I,G=L,I=l-1,F!=wb&&P>J&&zb>=K-F&&(I=jc(F),I>N&&(I=N),I==l&&K-L>xb&&I--),J>=l&&J>=I){var a;a=Bc(K-1-G,J-l),N-=J-1,J-=2;do K++,dc();while(0!=--J);H=0,I=l-1,K++,a&&(Ac(0),D=K)}else 0!=H?(Bc(0,255&x[K-1])&&(Ac(0),D=K),K++,N--):(H=1,K++,N--);for(;yb>N&&!M;)kc()}},nc=function(){M||(B=0,C=0,qc(),ic(),r=null,u=0,v=0,H=0,3>=Q?(J=l-1,I=0):(I=l-1,H=0,H=0),w=!1)},oc=function(a,b,c){var d;return t||(nc(),t=!0,0!=N)?(d=pc(a,b,c))==c?c:w?d:(3>=Q?lc():mc(),0==N&&(0!=H&&Bc(0,255&x[K-1]),Ac(1),w=!0),d+pc(a,d+b,c-d)):(w=!0,0)},pc=function(a,b,c){var d,e,f;for(d=0;null!=r&&c>d;){for(e=c-d,e>r.len&&(e=r.len),f=0;e>f;f++)a[b+d+f]=r.ptr[r.off+f];if(r.off+=e,r.len-=e,d+=e,0==r.len){var g;g=r,r=r.next,Zb(g)}}if(d==c)return d;if(u>v){for(e=c-d,e>u-v&&(e=u-v),f=0;e>f;f++)a[b+d+f]=Ob[v+f];v+=e,d+=e,u==v&&(u=v=0)}return d},qc=function(){var a,b,c,d,e;if(0==W[0].dl){for(Y.dyn_tree=T,Y.static_tree=V,Y.extra_bits=Tb,Y.extra_base=Eb+1,Y.elems=Gb,Y.max_length=Bb,Y.max_code=0,Z.dyn_tree=U,Z.static_tree=W,Z.extra_bits=Ub,Z.extra_base=0,Z.elems=Hb,Z.max_length=Bb,Z.max_code=0,$.dyn_tree=X,$.static_tree=null,$.extra_bits=Vb,$.extra_base=0,$.elems=Ib,$.max_length=Cb,$.max_code=0,c=0,d=0;Db-1>d;d++)for(gb[d]=c,a=0;a<1<<Tb[d];a++)eb[c++]=d;for(eb[c-1]=d,e=0,d=0;16>d;d++)for(hb[d]=e,a=0;a<1<<Ub[d];a++)fb[e++]=d;for(e>>=7;Hb>d;d++)for(hb[d]=e<<7,a=0;a<1<<Ub[d]-7;a++)fb[256+e++]=d;for(b=0;Bb>=b;b++)_[b]=0;for(a=0;143>=a;)V[a++].dl=8,_[8]++;for(;255>=a;)V[a++].dl=9,_[9]++;for(;279>=a;)V[a++].dl=7,_[7]++;for(;287>=a;)V[a++].dl=8,_[8]++;for(uc(V,Gb+1),a=0;Hb>a;a++)W[a].dl=5,W[a].fc=Fc(a,5);rc()}},rc=function(){var a;for(a=0;Gb>a;a++)T[a].fc=0;for(a=0;Hb>a;a++)U[a].fc=0;for(a=0;Ib>a;a++)X[a].fc=0;T[Fb].fc=1,ob=pb=0,jb=kb=lb=0,mb=0,nb=1},sc=function(a,b){for(var c=ab[b],d=b<<1;bb>=d&&(bb>d&&gc(a,ab[d+1],ab[d])&&d++,!gc(a,c,ab[d]));)ab[b]=ab[d],b=d,d<<=1;ab[b]=c},tc=function(a){var b,c,d,e,f,g,h=a.dyn_tree,i=a.extra_bits,j=a.extra_base,k=a.max_code,l=a.max_length,m=a.static_tree,n=0;for(e=0;Bb>=e;e++)_[e]=0;for(h[ab[cb]].dl=0,b=cb+1;Mb>b;b++)c=ab[b],e=h[h[c].dl].dl+1,e>l&&(e=l,n++),h[c].dl=e,c>k||(_[e]++,f=0,c>=j&&(f=i[c-j]),g=h[c].fc,ob+=g*(e+f),null!=m&&(pb+=g*(m[c].dl+f)));if(0!=n){do{for(e=l-1;0==_[e];)e--;_[e]--,_[e+1]+=2,_[l]--,n-=2}while(n>0);for(e=l;0!=e;e--)for(c=_[e];0!=c;)d=ab[--b],d>k||(h[d].dl!=e&&(ob+=(e-h[d].dl)*h[d].fc,h[d].fc=e),c--)}},uc=function(a,b){var c,d,e=new Array(Bb+1),f=0;for(c=1;Bb>=c;c++)f=f+_[c-1]<<1,e[c]=f;for(d=0;b>=d;d++){var g=a[d].dl;0!=g&&(a[d].fc=Fc(e[g]++,g))}},vc=function(a){var b,c,d=a.dyn_tree,e=a.static_tree,f=a.elems,g=-1,h=f;for(bb=0,cb=Mb,b=0;f>b;b++)0!=d[b].fc?(ab[++bb]=g=b,db[b]=0):d[b].dl=0;for(;2>bb;){var i=ab[++bb]=2>g?++g:0;d[i].fc=1,db[i]=0,ob--,null!=e&&(pb-=e[i].dl)}for(a.max_code=g,b=bb>>1;b>=1;b--)sc(d,b);do b=ab[Ab],ab[Ab]=ab[bb--],sc(d,Ab),c=ab[Ab],ab[--cb]=b,ab[--cb]=c,d[h].fc=d[b].fc+d[c].fc,db[h]=db[b]>db[c]+1?db[b]:db[c]+1,d[b].dl=d[c].dl=h,ab[Ab]=h++,sc(d,Ab);while(bb>=2);ab[--cb]=ab[Ab],tc(a),uc(d,g)},wc=function(a,b){var c,d,e=-1,f=a[0].dl,g=0,h=7,i=4;for(0==f&&(h=138,i=3),a[b+1].dl=65535,c=0;b>=c;c++)d=f,f=a[c+1].dl,++g<h&&d==f||(i>g?X[d].fc+=g:0!=d?(d!=e&&X[d].fc++,X[Jb].fc++):10>=g?X[Kb].fc++:X[Lb].fc++,g=0,e=d,0==f?(h=138,i=3):d==f?(h=6,i=3):(h=7,i=4))},xc=function(a,b){var c,d,e=-1,f=a[0].dl,g=0,h=7,i=4;for(0==f&&(h=138,i=3),c=0;b>=c;c++)if(d=f,f=a[c+1].dl,!(++g<h&&d==f)){if(i>g){do ec(d,X);while(0!=--g)}else 0!=d?(d!=e&&(ec(d,X),g--),ec(Jb,X),Ec(g-3,2)):10>=g?(ec(Kb,X),Ec(g-3,3)):(ec(Lb,X),Ec(g-11,7));g=0,e=d,0==f?(h=138,i=3):d==f?(h=6,i=3):(h=7,i=4)}},yc=function(){var a;for(wc(T,Y.max_code),wc(U,Z.max_code),vc($),a=Ib-1;a>=3&&0==X[Wb[a]].dl;a--);return ob+=3*(a+1)+5+5+4,a},zc=function(a,b,c){var d;for(Ec(a-257,5),Ec(b-1,5),Ec(c-4,4),d=0;c>d;d++)Ec(X[Wb[d]].dl,3);xc(T,a-1),xc(U,b-1)},Ac=function(a){var b,f,g,h;if(h=K-D,ib[lb]=mb,vc(Y),vc(Z),g=yc(),b=ob+3+7>>3,f=pb+3+7>>3,b>=f&&(b=f),b>=h+4&&D>=0){var i;for(Ec((c<<1)+a,3),Gc(),cc(h),cc(~h),i=0;h>i;i++)bc(x[D+i])}else f==b?(Ec((d<<1)+a,3),Cc(V,W)):(Ec((e<<1)+a,3),zc(Y.max_code+1,Z.max_code+1,g+1),Cc(T,U));rc(),0!=a&&Gc()},Bc=function(a,b){if(z[jb++]=b,0==a?T[b].fc++:(a--,T[eb[b]+Eb+1].fc++,U[fc(a)].fc++,y[kb++]=a,mb|=nb),nb<<=1,0==(7&jb)&&(ib[lb++]=mb,mb=0,nb=1),Q>2&&0==(4095&jb)){var c,d=8*jb,e=K-D;for(c=0;Hb>c;c++)d+=U[c].fc*(5+Ub[c]);if(d>>=3,kb<parseInt(jb/2)&&d<parseInt(e/2))return!0}return jb==o-1||kb==sb},Cc=function(a,b){var c,d,e,f,g=0,h=0,i=0,j=0;if(0!=jb)do 0==(7&g)&&(j=ib[i++]),d=255&z[g++],0==(1&j)?ec(d,a):(e=eb[d],ec(e+Eb+1,a),f=Tb[e],0!=f&&(d-=gb[e],Ec(d,f)),c=y[h++],e=fc(c),ec(e,b),f=Ub[e],0!=f&&(c-=hb[e],Ec(c,f))),j>>=1;while(jb>g);ec(Fb,a)},Dc=16,Ec=function(a,b){C>Dc-b?(B|=a<<C,cc(B),B=a>>Dc-C,C+=b-Dc):(B|=a<<C,C+=b)},Fc=function(a,b){var c=0;do c|=1&a,a>>=1,c<<=1;while(--b>0);return c>>1},Gc=function(){C>8?cc(B):C>0&&bc(B),B=0,C=0},Hc=function(){if(0!=u){var a,b;for(a=$b(),null==r?r=s=a:s=s.next=a,a.len=u-v,b=0;b<a.len;b++)a.ptr[b]=Ob[v+b];u=v=0}},Ic=function(a,b){var c,d;qb=a,rb=0,"undefined"==typeof b&&(b=f),Yb(b);for(var e=new Array(1024),g=[];(c=oc(e,0,e.length))>0;){var h=new Array(c);for(d=0;c>d;d++)h[d]=String.fromCharCode(e[d]);g[g.length]=h.join("")}return qb=null,g.join("")};a.RawDeflate||(a.RawDeflate={}),a.RawDeflate.deflate=Ic}(this),function(){angular.module("ModuleSettings",["ModulePersistence"]),angular.module("ModuleSettings").factory("Settings",["$q","PersistenceManager",function(a,b){var c;return new(c=function(){function c(){}return c.prototype.init=function(c,d){var e;return this.key=c,this.defaults=d,e=a.defer(),this.writeThruCache=b.cacheWithwriteThruToLocalStorePersister(this.key),this.writeThruCache.init().then(function(a){return function(b){return a.ready=!0,e.resolve(b)}}(this))["catch"](function(a){return function(b){return 0===b[0]?(a.ready=!0,e.resolve(0)):e.reject(b)}}(this)),e.promise},c.prototype.getDefault=function(a){return this.defaults[a]},c.prototype.get=function(a){var b;return b=this.writeThruCache.get(a),void 0!==b?b:this.defaults[a]},c.prototype.set=function(a,b){return this.writeThruCache.set(a,b)},c.prototype.unset=function(a){return this.writeThruCache.remove(a)},c}())}])}.call(this),function(){angular.module("ModuleIdentity",["ModulePersistence","BaseLib"])}.call(this),function(){angular.module("ModuleIdentity").factory("DeviceId",["md5","PersistenceManager","RandomFunctions",function(a,b,c){var d;return new(d=function(){function d(){var d;this.persister=b.localStoreBlockingPersister(document.numeric.key.deviceId),d=this.persister.read(),d?(this.deviceSecretId=d["private"],this.devicePublicId=d["public"]):(this.deviceSecretId=c.randomSomeString(50),this.devicePublicId=a.createHash(this.deviceSecretId),this.persister.save({"private":this.deviceSecretId,"public":this.devicePublicId}))}return d.prototype.qs=function(){return"?did="+this.devicePublicId},d.prototype.qsAnd=function(){return"&did="+this.devicePublicId},d.prototype.qsWithCb=function(a){var b;return b="&cb="+Math.round(new Date/a),this.qs()+b},d.prototype.qsAndWithCb=function(a){var b;return b="&cb="+Math.round(new Date/a),this.qsAnd()+b},d}())}])}.call(this),function(){angular.module("ModuleIdentity").factory("QRSignature",[function(){var a;return new(a=function(){function a(){}return a.prototype.encode=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;k=10,d="rgb(0,0,0)",q="rgb(255,255,255)",c=4,f=document.createElement("canvas"),m=f.getContext("2d");try{l=new QRCode(c,QRErrorCorrectLevel.L),l.addData(a),l.make()}catch(v){return g=v,h=document.createElement("p"),i=document.createTextNode("QR Code generation failed: "+g),h.appendChild(i),h}if(n=l.getModuleCount(),f.setAttribute("height",n*b+k),f.setAttribute("width",n*b+k),p=k/2,f.getContext)for(o=r=0,t=n-1;t>=0?t>=r:r>=t;o=t>=0?++r:--r)for(e=s=0,u=n-1;u>=0?u>=s:s>=u;e=u>=0?++s:--s)m.fillStyle=l.isDark(o,e)?d:q,m.fillRect(e*b+p,o*b+p,b,b);return j=document.createElement("img"),j.src=f.toDataURL("image/png"),j},a}())}])}.call(this),function(){angular.module("ImageLib",[])}.call(this),function(){angular.module("ImageLib").factory("GenerateImageBmp",[function(){var a;return new(a=function(){function a(){}return a.prototype._getLittleEndianHex=function(a){var b,c,d;for(c=[],b=d=4;d>=1;b=--d)c.push(String.fromCharCode(255&a)),a>>=8;return c.join("")},a.prototype._header=function(a,b){var c,d,e,f;return e=this._getLittleEndianHex(a*b),f=this._getLittleEndianHex(a),c=this._getLittleEndianHex(b),d="BM"+e+"\x00\x00\x00\x006\x00\x00\x00(\x00\x00\x00"+f+c+"\x00 \x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"},a.prototype.encode=function(a,b,c){var d,e,f;return e=this._header(b,c),f=e+a.join(""),d=window.btoa?window.btoa(f):$.base64.encode(f),"data:image/bmp;base64,"+d},a}())}])}.call(this),function(){angular.module("ImageLib").factory("GenerateImagePng",[function(){var a,b,c,d,e,f;return a=function(){function a(){this._initTable()}return a.prototype._initTable=function(){var a,b,c,d,e,f;for(this.table=[],f=[],c=d=0;256>d;c=++d){for(a=c,b=e=0;8>e;b=++e)1&a?a=3988292384^a>>>1:a>>>=1;f.push(this.table[c]=a)}return f},a.prototype._update_crc=function(a,b){var c,d,e,f;for(d=e=0,f=b.length;f>=0?f>e:e>f;d=f>=0?++e:--e)c=b.charCodeAt(d),a=this.table[255&(a^c)]^a>>>8;return a},a.prototype._crc=function(a){return 4294967295^this._update_crc(4294967295,a)},a.prototype._byte=function(a,b){return 0===b?(4278190080&a)>>>24:1===b?(16711680&a)>>>16:2===b?(65280&a)>>>8:255&a},a.prototype._word=function(a){return String.fromCharCode(this._byte(a,0),this._byte(a,1),this._byte(a,2),this._byte(a,3))},a.prototype._createChunk=function(a,b){return this._word(b.length)+a+b+this._word(this._crc(a+b))},a.prototype.SIGNATURE=function(){return String.fromCharCode(137,80,78,71,13,10,26,10)},a.prototype.IHDR=function(a,b,c,d){var e;return e=this._word(a)+this._word(b),e+=String.fromCharCode(c),e+=String.fromCharCode(d),e+=String.fromCharCode(0),e+=String.fromCharCode(0),e+=String.fromCharCode(0),this._createChunk("IHDR",e)},a.prototype.PLTE=function(a){return this._createChunk("PLTE",a)},a.prototype.IDAT=function(a){return this._createChunk("IDAT",a)},a.prototype.IEND=function(){return this._createChunk("IEND","")},a}(),f=function(){function a(a){this.bitDepth=a,this.sizeMaxValue=Math.pow(2,this.bitDepth)-1,this.size=0,this.entries={},this.colors=[]}return a.prototype.color=function(a){var b,c;return c=0,b=this.entries[a],void 0!==b?c=b:this.size<=this.sizeMaxValue&&(c=this.size,this.entries[a]=c,this.colors.push(a),this.size+=1),c},a.prototype.getData=function(){var a,b,c,d,e;for(b="",e=this.colors,c=0,d=e.length;d>c;c++)a=e[c],b+=String.fromCharCode(a>>>24),b+=String.fromCharCode(a<<8>>>24),b+=String.fromCharCode(a<<16>>>24);return b},a}(),b=function(){function b(b,d,g,h,i,j,k){var l;this.bitDepth=b,this.colorType=d,this.filterMethod=g,this.compressionLevel=h,this.inputData=i,this.width=j,this.height=k,this.h=new e,this.chunker=new a,this.deflate=new c,this.printData=!1,l={0:{channels:1},2:{channels:3},3:{channels:1},4:{channels:2},6:{channels:4}},this.channels=l[this.colorType].channels,3===this.colorType&&(this.palette=new f(this.bitDepth)),this.colorDepth=this.bitDepth*this.channels,this.BITDEPTHMASK=1===this.bitDepth?1:2===this.bitDepth?3:4===this.bitDepth?15:255}return b.prototype._getPixelChannel=function(a,b){var c,d,e;return c={RED:{mask:4278190080,shift:24},GREEN:{mask:16711680,shift:16},BLUE:{mask:65280,shift:8},ALPHA:{mask:255,shift:0},GRAY:{mask:4278190080,shift:24}},d=c[b],e=(a&d.mask)>>>d.shift},b.prototype._getPixelData=function(a){var b,c,d;return c=0,b=0,d=8-this.bitDepth,2===this.colorType||6===this.colorType?(c=c<<this.bitDepth|this._getPixelChannel(a,"RED")>>>d,c=c<<this.bitDepth|this._getPixelChannel(a,"GREEN")>>>d,c=c<<this.bitDepth|this._getPixelChannel(a,"BLUE")>>>d,b+=3*this.bitDepth):3===this.colorType?(c=c<<this.bitDepth|this.palette.color(a),b+=this.bitDepth):(c=c<<this.bitDepth|this._getPixelChannel(a,"GRAY")>>>d,b+=this.bitDepth),(4===this.colorType||6===this.colorType)&&(c=c<<this.bitDepth|this._getPixelChannel(a,"ALPHA")>>>d,b+=this.bitDepth),[c,b]},b.prototype._fillBytePushLeft=function(a,b,c){var d;return d=c,[]},b.prototype._convertToByteArray=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;for(this.data="",l=m=0,o=this.height;o>=0?o>m:m>o;l=o>=0?++m:--m){for(e=0,f=0,k=n=0,p=this.width;p>=0?p>n:n>p;k=p>=0?++n:--n){for(q=this._getPixelData(this.inputData[l*this.width+k]),h=q[0],a=q[1];f+a>=8;)i=8-f,d=a-i,j=h>>>d,g=255&(e|j),g>255&&console.log("OUT:"+k+","+l+": "+g),this.data+=String.fromCharCode(g),e=0,f=0,b=a-i,c=32-b,h=h<<c>>>c,a=b;a>0&&(e=255&(e|h<<8-f-a),f+=a)}f>0&&(this.data+=String.fromCharCode(e))}return this.byteArrayLineWidth=Math.ceil(this.width*this.colorDepth/8)},b.prototype._filter=function(){return this.filterMethod>0?this._filterSubAndUp():this._filterZero()},b.prototype._filterSubAndUp=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;
for(console.log("filter"),a=String.fromCharCode(1),b=String.fromCharCode(2),h=this.colorDepth<8?1:this.colorDepth/8,d=a+this.data.substr(0,h),i=k=h,p=this.byteArrayLineWidth;h>0?p>k:k>p;i=k+=h)for(e=l=0;h>=0?h>l:l>h;e=h>=0?++l:--l)f=i+e,c=this.data.charCodeAt(f),g=this.data.charCodeAt(f-h),d+=String.fromCharCode(c-g&255);for(j=m=1,q=this.height;q>=1?q>m:m>q;j=q>=1?++m:--m)for(d+=b,i=n=0,r=this.byteArrayLineWidth;h>0?r>n:n>r;i=n+=h)for(e=o=0;h>=0?h>o:o>h;e=h>=0?++o:--o)f=j*this.byteArrayLineWidth+i+e,c=this.data.charCodeAt(f),g=this.data.charCodeAt(f-this.byteArrayLineWidth),d+=String.fromCharCode(c-g&255);return d},b.prototype._filterZero=function(){var a,b,c,d,e;for(a=String.fromCharCode(0),b="",c=d=0,e=this.height;e>=0?e>d:d>e;c=e>=0?++d:--d)b+=a+this.data.substr(c*this.byteArrayLineWidth,this.byteArrayLineWidth);return b},b.prototype._adler32=function(a){var b,c,d,e,f,g,h,i;for(c=65521,b=5550,d=1,e=0,g=0,f=h=0,i=a.length;i>=0?i>h:h>i;f=i>=0?++h:--h)d+=a.charCodeAt(f),e+=d,(g+=1)>b&&(d%=c,e%=c,g=0);return d%=c,e%=c,e<<16|d},b.prototype._byte=function(a,b){return 0===b?(4278190080&a)>>>24:1===b?(16711680&a)>>>16:2===b?(65280&a)>>>8:255&a},b.prototype._word=function(a){return String.fromCharCode(this._byte(a,0),this._byte(a,1),this._byte(a,2),this._byte(a,3))},b.prototype._littleEndianShort=function(a){return String.fromCharCode(this._byte(a,3),this._byte(a,2))},b.prototype._deflate=function(a){return this.compressionLevel>0?this._deflateCompression(a,this.compressionLevel):this._deflateNoCompression(a)},b.prototype._deflateCompression=function(a,b){var c,d;return console.log("compression"),c=String.fromCharCode(120,156),d=this.deflate.encode(a,b),c+d+this._word(this._adler32(a))},b.prototype._deflateNoCompression=function(a){var b,c,d,e,f,g,h,i;for(b=String.fromCharCode(8,29),c=65535,g="",e=h=0,i=a.length;c>0?i>h:h>i;e=h+=c)f=a.length-e,c>=f?d=String.fromCharCode(1):(f=c,d=String.fromCharCode(0)),g+=d+this._littleEndianShort(f)+this._littleEndianShort(~f),g+=a.substring(e,e+f);return b+g+this._word(this._adler32(a))},b.prototype.imageData=function(){var a,b,c,d,e,f,g;return this._convertToByteArray(),g=this._filter(),f=this._deflate(g),e=this.chunker.SIGNATURE(),c=this.chunker.IHDR(this.width,this.height,this.bitDepth,this.colorType),d=3===this.colorType?this.chunker.PLTE(this.palette.getData()):"",a=this.chunker.IDAT(f),b=this.chunker.IEND(),this.printData&&(this.h.printHexOfListOfInts(this.inputData,"inputData"),this.h.printHex(this.data,"byteData"),this.h.printHex(g,"filteredData"),3===this.colorType&&this.h.printHex(this.palette.getData(),"palette"),this.h.printHex(f,"compresedData",[2,4]),this.h.printHex(a,"IDAT")),3===this.colorType&&this.h.printHex(this.palette.getData(),"palette"),e+c+d+a+b},b}(),c=function(){function a(){}return a.prototype.encode=function(a,b){return RawDeflate.deflate(a,b)},a}(),e=function(){function a(){}return a.prototype.hexStringOfByte=function(a){var b,c,d;return b=(240&a)>>>4,c=15&a,d=function(a){return 10>a?""+a:10===a?"A":11===a?"B":12===a?"C":13===a?"D":14===a?"E":"F"},d(b)+d(c)+" "},a.prototype.hex=function(a,b,c){var d,e,f,g,h,i;for(c&&(e=c[0],d=c[1]),g="",f=h=0,i=a.length;i>=0?i>h:h>i;f=i>=0?++h:--h)g+=this.hexStringOfByte(a.charCodeAt(f)),c&&f===e-1&&(g+="[ "),c&&f===a.length-d-1&&(g+="] ");return g},a.prototype.printHex=function(a,b,c){var d;return d=this.hex(a,b,c),d="["+b+", "+a.length+"] "+d,console.log(d)},a.prototype.printHexOfListOfStrings=function(a,b){var c,d,e,f;for(c="",e=0,f=a.length;f>e;e++)d=a[e],c+=this.hexOfString(d);return console.log("["+b+"] "+c)},a.prototype.printHexOfListOfInts=function(a,b){var c,d,e,f;for(c="",e=0,f=a.length;f>e;e++)d=a[e],c+=this.hexOfInt(d);return console.log("["+b+"] "+c)},a.prototype.hexOfInt=function(a){return this.hexStringOfByte(a>>>24)+" "+this.hexStringOfByte(a<<8>>>24)+" "+this.hexStringOfByte(a<<16>>>24)+" "+this.hexStringOfByte(a<<24>>>24)+" "},a.prototype.hexOfString=function(a){var b,c,d,e,f;for(c="",b=e=0,f=a.length;f>=0?f>e:e>f;b=f>=0?++e:--e)d=a.charCodeAt(b),c+=this.hexOfInt(d);return c},a}(),new(d=function(){function c(){this.Chunker=a,this.Data=b,this.hex=new e,this.COLOR_GRAYSCALE=0,this.COLOR_INDEXED=3,this.COLOR_RGB=2,this.COLOR=this.COLOR_INDEXED,this.COMPRESSION_LEVEL=6,this.FILTER_METHOD=0,this.BIT_DEPTH=2}return c.prototype.encode=function(a,c,d,e,f,g){var h,i,j,k,l,m,n,o,p,q,r;for(void 0===g&&(g=this.COMPRESSION_LEVEL),void 0===f&&(f=this.FILTER_METHOD),void 0===e&&(e=this.COLOR_GRAYSCALE),l=[],p=q=0;d>=0?d>q:q>d;p=d>=0?++q:--q)for(o=r=0;c>=0?c>r:r>c;o=c>=0?++r:--r)n=a[(d-p-1)*c+o],m=n.charCodeAt(0),j=n.charCodeAt(1),i=n.charCodeAt(2),h=n.charCodeAt(3),l[c*p+o]=m<<24|j<<16|i<<8|h;return k=new b(this.BIT_DEPTH,this.COLOR_INDEXED,f,g,l,c,d),k.printData=!1,"data:image/png;base64,"+btoa(k.imageData())},c}())}])}.call(this),function(){angular.module("ImageLib").factory("GenerateImageUsingCanvas",[function(){var a;return new(a=function(){function a(){}return a.prototype.getCanvas=function(){return void 0===this.canvas&&(this.canvas=document.createElement("canvas")),this.canvas},a.prototype.getContext=function(){return void 0===this.context&&(this.context=this.getCanvas().getContext("2d")),this.context},a.prototype.encode=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p;if(f=this.getCanvas(),f.setAttribute("width",b),f.setAttribute("height",c),h=this.getContext(),g=h.getImageData(0,0,b,c)){for(n=o=0;c>=0?c>o:o>c;n=c>=0?++o:--o)for(m=p=0;b>=0?b>p:p>b;m=b>=0?++p:--p)l=a[(c-n-1)*b+m],k=l.charCodeAt(0),i=l.charCodeAt(1),e=l.charCodeAt(2),d=l.charCodeAt(3),j=4*(m+n*b),g.data[j]=k,g.data[j+1]=i,g.data[j+2]=e,g.data[j+3]=255-d;return h.putImageData(g,0,0),f.toDataURL("image/png")}return"error"},a}())}])}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};angular.module("ImageLib").factory("GraphicsManager",["ImageData","GenerateImagePng","GenerateImageUsingCanvas",function(b,c,d){var e,f,g;return f=function(){function b(b,c,d,e,f,g,h,i){var j,k,l,m;if(this.imageData=b,this.width=c,this.height=d,this.flipImage=a(this.flipImage,this),this.width=Math.round(this.width),this.height=Math.round(this.height),this.colors=this.imageData.colors[0],this.chars=this.imageData.chars[0],this.data=[],void 0!==f&&void 0!==g&&void 0!==h&&void 0!==i?(this.offsetleft=Math.round(f),this.offsetright=Math.round(g),this.offsettop=Math.round(h),this.offsetbottom=Math.round(i)):void 0!==f?(this.offsetleft=Math.round(f),this.offsetright=Math.round(f),this.offsettop=Math.round(f),this.offsetbottom=Math.round(f)):(this.offsetleft=0,this.offsetright=0,this.offsettop=0,this.offsetbottom=0),this.width=this.width+this.offsetleft+this.offsetright,this.height=this.height+this.offsettop+this.offsetbottom,void 0!==e)for(j=this.colors[e],void 0===j&&(j=this.colors.w),k=l=0,m=this.width*this.height-1;m>=0?m>=l:l>=m;k=m>=0?++l:--l)this.data[k]=j}return b.prototype.colorOrBlack=function(a){var b;return void 0===a||void 0===this.colors[a]?b=this.colors.B:this.colors[a]},b.prototype.placeChar=function(a,b,c,d){var e,f,g,h,i,j,k,l;for(a=Math.round(a),b=Math.round(b),f=this.colorOrBlack(d),e=this.chars[c],void 0===e&&(e=this.chars["?"]),g=0,l=[],i=j=k=b+e[1]-1;b>=k?b>=j:j>=b;i=b>=k?++j:--j)l.push(function(){var b,c,d;for(d=[],h=b=a,c=a+e[0]-1;c>=a?c>=b:b>=c;h=c>=a?++b:--b)e[2][g]>0&&this.setPoint(h,i,f),d.push(g+=1);return d}.call(this));return l},b.prototype.placeCharSequence=function(a,b,c,d){var e,f,g,h,i;if(!(void 0===c||c.length<1)){for(f=6,i=[],e=g=0,h=c.length-1;h>=0?h>=g:g>=h;e=h>=0?++g:--g)i.push(this.placeChar(a+e*f,b,c[e],d));return i}},b.prototype.placeCharSequenceCentered=function(a,b,c,d){return void 0===c||c.length<1?void 0:this.placeCharSequence(a-3*c.length,b-4,c,d)},b.prototype.setPoint=function(a,b,c){return a=Math.round(a+this.offsetleft),b=Math.round(b+this.offsetbottom),this.data[b*this.width+a]=c,this},b.prototype.getPoint=function(a,b){return this.data[b*this.width+a]},b.prototype.drawLine=function(a,b,c,d,e){var f,g,h,i,j,k,l,m;if(f=this.colorOrBlack(e),d===b&&c===a)return this.setPoint(a,b,f),this;if(Math.abs(d-b)>Math.abs(c-a))for(i=(c-a)/(d-b),h=function(c){return Math.round(i*(c-b))+a},k=l=b;d>=b?d>=l:l>=d;k=d>=b?++l:--l)this.setPoint(h(k),k,f);else for(i=(d-b)/(c-a),g=function(c){return Math.round(i*(c-a))+b},j=m=a;c>=a?c>=m:m>=c;j=c>=a?++m:--m)this.setPoint(j,g(j),f);return this},b.prototype.drawRectangle=function(a,b,c,d,e){return this.drawLine(a,b,a+c,b,e),this.drawLine(a,b,a,b+d,e),this.drawLine(a,b+d,a+c,b+d,e),this.drawLine(a+c,b,a+c,b+d,e)},b.prototype.drawTriangle=function(a,b,c,d,e,f,g){return this.drawLine(a,b,c,d,g),this.drawLine(a,b,e,f,g),this.drawLine(c,d,e,f,g)},b.prototype.fillRectangle=function(a,b,c,d,e){var f,g,h,i,j,k,l;for(a=Math.round(a),b=Math.round(b),c=Math.round(c),d=Math.round(d),f=this.colorOrBlack(e),h=i=b,k=b+d-1;k>=b?k>=i:i>=k;h=k>=b?++i:--i)for(g=j=a,l=a+c-1;l>=a?l>=j:j>=l;g=l>=a?++j:--j)this.setPoint(g,h,f);return this},b.prototype.fillRectangleCoords=function(a,b,c,d,e){return this.fillRectangle(a,b,c-a,d-b,e)},b.prototype.transform=function(a){var b,c,d,e,f,g,h,i,j;for(this.buffer=[],d=f=0,h=this.width-1;h>=0?h>=f:f>=h;d=h>=0?++f:--f)for(e=g=0,i=this.height-1;i>=0?i>=g:g>=i;e=i>=0?++g:--g)j=a(d,e),b=j[0],c=j[1],this.buffer[c*this.width+b]=this.data[e*this.width+d];return this.data=this.buffer,this.buffer=void 0,this},b.prototype.flipImage=function(){return this.transform(function(a){return function(b,c){return[b,a.height-1-c]}}(this))},b.prototype.getBase64=function(){return this.getBase64Png()},b.prototype.getBase64Png=function(){return c.encode(this.data,this.width,this.height)},b.prototype.getBase64Canvas=function(){return d.encode(this.data,this.width,this.height)},b}(),e=function(){function a(){this.imageData=b}return a.prototype.newImage=function(a,b,c){return new f(this.imageData,a,b,c)},a.prototype.newImageWhite=function(a,b){return new f(this.imageData,a,b,"w")},a.prototype.newImageWhiteWithOffset=function(a,b,c,d,e,g){return new f(this.imageData,a,b,"w",c,d,e,g)},a.prototype.getColor=function(a,b,c,d){return String.fromCharCode(a,b,c,d)},a.prototype.test=function(){var a;return a=this.newImage(210,210),a.fillRectangle(0,0,210,210,"w"),a.fillRectangle(10,10,90,90,"r"),a.fillRectangle(110,10,90,90,"g"),a.fillRectangle(10,110,90,90,"b"),a.flipImage(),a.getBase64()},a}(),g=new e,document.numeric.modules.Graphics=g,g}])}.call(this),function(){angular.module("ImageLib").factory("ImageData",[function(){var a;return new(a=function(){function a(){this.colors={0:{B:String.fromCharCode(0,0,0,0),D:String.fromCharCode(50,50,50,0),G:String.fromCharCode(150,150,150,0),L:String.fromCharCode(210,210,210,0),w:String.fromCharCode(255,255,255,0),r:String.fromCharCode(255,0,0,0),g:String.fromCharCode(0,255,0,0),b:String.fromCharCode(0,0,255,0)}},this.chars={0:{0:[5,7,[0,1,1,1,0,1,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,0]],1:[5,7,[0,0,1,0,0,0,1,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,1,1,1,1,1]],2:[5,7,[0,1,1,1,0,1,0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,1,1,1,1]],3:[5,7,[1,1,1,1,1,0,0,0,1,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,1,0,0,0,1,0,1,1,1,0]],4:[5,7,[0,0,0,1,0,0,0,1,1,0,0,1,0,1,0,1,0,0,1,0,1,1,1,1,1,0,0,0,1,0,0,0,0,1,0]],5:[5,7,[1,1,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,1,1,1,1,0]],6:[5,7,[0,0,1,1,0,0,1,0,0,0,1,0,0,0,0,1,1,1,1,0,1,0,0,0,1,1,0,0,0,1,0,1,1,1,0]],7:[5,7,[1,1,1,1,1,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0]],8:[5,7,[0,1,1,1,0,1,0,0,0,1,1,0,0,0,1,0,1,1,1,0,1,0,0,0,1,1,0,0,0,1,0,1,1,1,0]],9:[5,7,[0,1,1,1,0,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1,0,0,0,0,1,0,0,0,1,0,0,1,1,0,0]],"?":[5,7,[0,1,1,1,0,1,0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,0]],"-":[5,7,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],".":[5,7,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,1,1,0,0]],A:[5,7,[0,1,1,1,0,1,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,1,1,1,1,1,0,0,0,1,1,0,0,0,1]],B:[5,7,[1,1,1,1,0,1,0,0,0,1,1,0,0,0,1,1,1,1,1,0,1,0,0,0,1,1,0,0,0,1,1,1,1,1,0]],C:[5,7,[0,1,1,1,0,1,0,0,0,1,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,1,0,1,1,1,0]],D:[5,7,[1,1,1,0,0,1,0,0,1,0,1,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,0,0,1,0,1,1,1,0,0]],E:[5,7,[1,1,1,1,1,1,0,0,0,0,1,0,0,0,0,1,1,1,1,0,1,0,0,0,0,1,0,0,0,0,1,1,1,1,1]],F:[5,7,[1,1,1,1,1,1,0,0,0,0,1,0,0,0,0,1,1,1,1,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0]],G:[5,7,[0,1,1,1,0,1,0,0,0,1,1,0,0,0,0,1,0,1,1,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,1]],H:[5,7,[1,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,1,1,1,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0,1]],I:[5,7,[1,1,1,1,1,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,1,1,1,1,1]],J:[5,7,[0,0,1,1,1,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,1,0,0,1,0,0,1,1,0,0]],K:[5,7,[1,0,0,0,1,1,0,0,1,0,1,0,1,0,0,1,1,0,0,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1]],L:[5,7,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,1,1,1,1]],M:[5,7,[1,0,0,0,1,1,1,0,1,1,1,0,1,0,1,1,0,1,0,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0,1]],N:[5,7,[1,0,0,0,1,1,0,0,0,1,1,1,0,0,1,1,0,1,0,1,1,0,0,1,1,1,0,0,0,1,1,0,0,0,1]],O:[5,7,[0,1,1,1,0,1,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,0]],P:[5,7,[1,1,1,1,0,1,0,0,0,1,1,0,0,0,1,1,1,1,1,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0]],Q:[5,7,[0,1,1,1,0,1,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,0,1,0,1,1,0,0,1,0,0,1,1,0,1]],R:[5,7,[1,1,1,1,0,1,0,0,0,1,1,0,0,0,1,1,1,1,1,0,1,0,1,0,0,1,0,0,1,0,1,0,0,0,1]],S:[5,7,[0,1,1,1,1,1,0,0,0,0,1,0,0,0,0,0,1,1,1,0,0,0,0,0,1,0,0,0,0,1,1,1,1,1,0]],T:[5,7,[1,1,1,1,1,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0]],U:[5,7,[1,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0,1,0,1,1,1,0]],V:[5,7,[1,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,0,0,0,1,0,1,0,1,0,0,0,1,0,0]],W:[5,7,[1,0,0,0,1,1,0,0,0,1,1,0,0,0,1,1,0,1,0,1,1,0,1,0,1,1,0,1,0,1,0,1,0,1,0]],X:[5,7,[1,0,0,0,1,1,0,0,0,1,0,1,0,1,0,0,0,1,0,0,0,1,0,1,0,1,0,0,0,1,1,0,0,0,1]],Y:[5,7,[1,0,0,0,1,1,0,0,0,1,1,0,0,0,1,0,1,0,1,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0]],Z:[5,7,[1,1,1,1,1,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,1,1,1,1,1]],a:[5,7,[]],b:[5,7,[]],c:[5,7,[]],d:[5,7,[]],e:[5,7,[]],f:[5,7,[]],g:[5,7,[]],h:[5,7,[]],i:[5,7,[]],j:[5,7,[]],k:[5,7,[]],l:[5,7,[]],m:[5,7,[]],n:[5,7,[]],o:[5,7,[]],p:[5,7,[]],q:[5,7,[]],r:[5,7,[]],s:[5,7,[]],t:[5,7,[]],u:[5,7,[]],v:[5,7,[]],w:[5,7,[]],x:[5,7,[]],y:[5,7,[]],z:[5,7,[]]}}}return a}())}])}.call(this),function(){angular.module("BaseLib",["ImageLib"])}.call(this),function(){angular.module("BaseLib").filter("questionMark",function(){return function(a){return void 0===a?"?":a}}).filter("underscore",function(){return function(a){return void 0===a||""===a?"_":a}}).filter("textOrLoading",function(){return function(a){return void 0===a?"":a}}).filter("secsToMillis",function(){return function(a){return void 0===a||isNaN(a)?a:Math.round(a/1e3)}}).filter("truncate",function(){return function(a,b,c){return isNaN(b)&&(b=27),c||(c="..."),a.length<=b||a.length-c.length<=b?a:String(a).substring(0,b-c.length)+c}}).filter("firstCapital",function(){return function(a){return void 0===a?"":a.substring(0,1).toUpperCase()+a.substring(1)}}).filter("orderObjectBy",function(){return function(a,b,c){var d;return d=[],angular.forEach(a,function(a){return d.push(a)}),d.sort(function(a,c){return a[b]>c[b]?1:-1}),c&&d.reverse(),d}}).filter("secondsToHuman",function(){return function(a){var b,c,d,e,f,g,h;return b=a/86400,e=Math.floor(b),a-=86400*e,c=a/3600,f=Math.floor(c),a-=3600*f,d=a/60,g=Math.floor(d),a-=60*g,h=a,e>1?""+e+" days, "+f+" hours, "+g+" minutes, "+h+" seconds":1===e?"1 day, "+f+" hours, "+g+" minutes, "+h+" seconds":f>1?""+f+" hours, "+g+" minutes, "+h+" seconds":1===f?"1 hour, "+g+" minutes, "+h+" seconds":g>1?""+g+" minutes, "+h+" seconds":1===g?"1 minute, "+h+" seconds":1===h?"1 second":""+h+" seconds"}}).filter("secondsToClock",function(){return function(a){var b,c,d,e,f;return void 0===a||isNaN(a)?"":(b=a/3600,d=Math.floor(b),a-=3600*d,c=a/60,e=Math.floor(c),10>e&&(e="0"+e),a-=60*e,f=a,10>f&&(f="0"+f),d>0?""+d+":"+e+":"+f:""+e+":"+f)}})}.call(this),function(){angular.module("BaseLib").factory("MathFunctions",[function(){var a,b;return a=function(){function a(){}return a.prototype.gcd=function(a,b){var c,d;return 0>a&&(a=-a),0>b&&(b=-b),a>b&&(d=[b,a],a=d[0],b=d[1]),c=b-Math.floor(b/a)*a,0>=c?a:this.gcd(c,a)},a.prototype.reduce=function(a,b){var c;return c=this.gcd(a,b),[a/c,b/c]},a}(),b=new a,document.numeric.modules.MathFunctions=b,b}])}.call(this),function(){angular.module("BaseLib").factory("RandomFunctions",[function(){var a,b;return a=function(){function a(){}return a.prototype.random=function(a,b){return a+(Math.random()*(b-a)|0)},a.prototype.randomAB=function(){return this.random(0,2)>0},a.prototype.randomFromList=function(a){return void 0===a||a.length<1?0:a[this.random(0,a.length)]},a.prototype.randomPairFromList=function(a){var b,c,d,e;if(void 0===a||a.length<1)return[];if(b=a.length,1===b)return[a[0],a[0]];for(e=void 0;void 0===e;)c=this.random(0,b),d=this.random(0,b),c!==d&&(e=[a[c],a[d]]);return e},a.prototype.randomNonRepeating=function(a,b){var c,d,e,f;if(!a||a.length<1)return[];for(b>a.length?b=a.length:1>b&&(b=1),d=a,f=a.length,c=[];b>0;)e=this.random(0,f),c=c.concat(d.splice(e,1)),b-=1,f-=1;return c},a.prototype.randomDigits=function(a){return a>10&&(a=10),1>a&&(a=1),this.randomNonRepeating([0,1,2,3,4,5,6,7,8,9],a)},a.prototype.randomVariableLetter=function(){return this.randomFromList("abcdefghkmnpqrstuvwyzABCDEFGHKLMNPQRSTUVWYZ")},a.prototype.shuffleListInPlace=function(a){var b,c,d,e,f;if(!(void 0===a||a.length<2)){for(b=d=e=a.length-1;1>=e?1>=d:d>=1;b=1>=e?++d:--d)c=Math.floor(Math.random()*(b+1)),f=[a[c],a[b]],a[b]=f[0],a[c]=f[1];return a}},a.prototype.shuffleAnswers4=function(a,b){var c,d,e;return this.shuffleListInPlace(a),d=this.random(0,5),e=a.splice(d,10),c=a.concat([b]).concat(e),[c,d]},a.prototype._someChars="z123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZAB",a.prototype._randomSomeChar=function(){return this._someChars[64*Math.random()|0]},a.prototype.randomSomeString=function(a){var b,c,d;for(c="",b=d=1;a>=1?a>=d:d>=a;b=a>=1?++d:--d)c+=this._randomSomeChar();return c},a}(),b=new a,document.numeric.modules.RandomFunctions=b,b}])}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};angular.module("BaseLib").factory("TextFunctions",["RandomFunctions",function(b){var c,d;return c=function(){function c(){this.combine2=a(this.combine2,this),this.combine3=a(this.combine3,this),this.ifBthenwhatC=a(this.ifBthenwhatC,this),this.AwhatCifB=a(this.AwhatCifB,this),this.whatCifAandB=a(this.whatCifAandB,this),this.AandBwhatC=a(this.AandBwhatC,this),this.AifBthenwhatC=a(this.AifBthenwhatC,this)}return c.prototype.r=b,c.prototype.capitalize=function(a){return void 0===a?"":a[0].toUpperCase()+a.slice(1,1e4)},c.prototype.prettify=function(a){var b,c,d,e,f,g,h,i,j,k,l,m;if(void 0===a)return"";for(b=".,;-!?",h=".!?",d="abcdefghijklmnopqrstuvwxyz",f="",g=void 0,k=!0,i=!0,l=0,m=a.length;m>l;l++)e=a[l],c=e.toLowerCase(),d.indexOf(c)>-1&&k&&(c=e.toUpperCase(),k=!1),h.indexOf(e)>-1&&(k=!0),b.indexOf(e)>-1&&(f+=e+" ",c="")," "===e?(j&&(c=""),j=!0):j=!1,f+=c;return f=f.trim().replace(" .",".").replace(" ?","?")},c.prototype.AifBthenwhatC=function(a,b,c,d){var e;return e=void 0!==d&&""!==d?a+". "+d+" "+b+", "+c+"?":a+". "+b+". "+c+"?",this.prettify(e)},c.prototype.AandBwhatC=function(a,b,c){var d;return d=a+", and "+b+". "+c+"?",this.prettify(d)},c.prototype.whatCifAandB=function(a,b,c){var d;return d=c+", if "+a+", and "+b+"?",this.prettify(d)},c.prototype.AwhatCifB=function(a,b,c,d){var e;return(void 0===d||""===d)&&(d="if"),e=a+". "+c+" "+d+" "+b+"?",this.prettify(e)},c.prototype.ifBthenwhatC=function(a,b,c){var d;return d=void 0!==c||""===c?c+" "+a+", "+b+"?":a+". "+b+"?",this.prettify(d)},c.prototype.combine3=function(a,b,c,d){var e;return e=this.r.randomFromList(["AifBthenwhatC","AandBwhatC","AwhatCifB"]),d=this.r.randomFromList(["if",""]),this[e](a,b,c,d)},c.prototype.combine2=function(a,b,c){var d;return d=this.r.randomFromList(["ifBthenwhatC"]),c=this.r.randomFromList(["if",""]),this[d](a,b,c)},c.prototype.digitToWord=function(a){var b;return b=["zero","one","two","three","four","five","six","seven","eight","nine"],b[a]},c.prototype.numberBelow20ToWord=function(a){var b;return b=["","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],b[a]},c.prototype.tensToWord=function(a){var b;return b=["","ten","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"],b[a]},c.prototype.twoDigitToWords=function(a,b){return 2>a?""+this.numberBelow20ToWord(10*a+b):""+this.tensToWord(a)+" "+this.digitToWord(b)},c}(),d=new c,document.numeric.modules.TextFunctions=d,d}])}.call(this),function(){angular.module("BaseLib").factory("HyperTextManager",[function(){var a,b;return a=function(){function a(){}return a.prototype.table=function(a,b){var c,d,e,f,g,h,i,j,k,l;if(e='<table class="problem-generated-table">',void 0!==b){for(e+="<tr>",g=0,j=b.length;j>g;g++)c=b[g],e+="<th>"+c+"</th>";e+="</tr>"}for(h=0,k=a.length;k>h;h++){for(f=a[h],e+="<tr>",i=0,l=f.length;l>i;i++)d=f[i],e+="<td>"+d+"</td>";e+="</tr>"}return e+"</table>"},a.prototype.tableWrapped=function(a,b){var c;return c=this.table(a,b),"<span class='problem-generated-table-holder'>"+c+"</span>"},a.prototype.fraction=function(a,b){var c;return c='<span class="fraction">',c+='<span class="fraction-top">'+a+"</span>",c+='<span class="fraction-bottom">'+b+"</span>",c+"</span>"},a.prototype.graphic=function(a){var b;return b='<span class="span-question-graphic">',b+='<img class="img-question-graphic" alt="img" src="'+a+'">',b+"</span>"},a}(),b=new a,document.numeric.modules.HyperText=b,b}])}.call(this),function(){angular.module("ModuleCommunication",["ModuleSettings","ModuleIdentity","ModuleMessage","ModulePersistence"])}.call(this),function(){angular.module("ModuleCommunication").factory("ServerHttp",["$q","$http","Settings","DeviceId","MessageDispatcher","FS",function(a,b,c,d,e,f){var g;return new(g=function(){function g(){}return g.prototype._inCordova=function(){return"undefined"!=typeof LocalFileSystem},g.prototype._baseCdv=function(){return document.numeric.url.base.cdv},g.prototype._baseChrome=function(){return document.numeric.url.base.chrome},g.prototype._baseCdvFs=function(a){return this._baseCdv()+document.numeric.url.base.fs+a},g.prototype._base=function(){return this._inCordova()?this._baseCdv():this._baseChrome()},g.prototype.touch=function(a){return this.get(c.get("mainServerAddress")+a,{timeout:2e3},10)},g.prototype.get=function(c,f,g){var h;return h=a.defer(),void 0===g&&(g=1e3),c+=c.indexOf("?")>-1?d.qsAndWithCb(g):d.qsWithCb(g),void 0!==f?(void 0===f.cache&&(f.cache=!1),void 0===f.timeout&&(f.timeout=7e3),void 0===f.headers?f.headers={Authorization:""+d.deviceSecretId}:void 0===f.headers.Authorization&&(f.headers.Authorization=""+d.deviceSecretId)):f={cache:!1,timeout:7e3,headers:{Authorization:""+d.deviceSecretId}},b.get(c,f).then(function(){return function(a){var b;return b=a.data,void 0!==b&&void 0!==b.messages&&void 0!==b.content&&(e.addNewMessages(b.messages),a.data=b.content),h.resolve(a)}}(this))["catch"](function(){return function(a){return h.reject(a)}}(this)),h.promise},g.prototype.download=function(b,c){var e,g;return b+=b.indexOf("?")>-1?d.qsAndWithCb(1e3):d.qsWithCb(1e3),e=a.defer(),this._inCordova()?(g=new FileTransfer,g.download(b,this._baseCdvFs(c),function(){return e.resolve("ok")},function(a){return e.reject(a.code)},!1,{headers:{Authorization:""+d.deviceSecretId}})):this.get(b).then(function(){return function(a){var b,d;try{return b=a.data,f.writeToFile(c,b).then(function(){return e.resolve("ok")})["catch"](function(a){return e.reject(a)})}catch(g){return d=g,e.reject(d)}}}(this))["catch"](function(){return function(a){return e.reject(a)}}(this)),e.promise},g.prototype.transformUrl=function(a){return a+=a.indexOf("?")>-1?d.qsAndWithCb(1e3):d.qsWithCb(1e3)},g}())}])}.call(this),function(){angular.module("ModuleCommunication").factory("Tracker",["Settings","ServerHttp",function(a,b){var c;return new(c=function(){function c(){}return c.prototype.touch=function(c,d){var e;return a.ready?(e=void 0!==d?"&id="+d:"",b.get(a.get("mainServerAddress")+"touch?page="+c+e,{timeout:2e3},10)):0},c}())}])}.call(this),function(){angular.module("ModuleMessage",["ModulePersistence"]),angular.module("ModuleMessage").factory("MessageDispatcher",["PersistenceManager",function(a){var b;return new(b=function(){function b(){var b;this.MAXSEENMSG=20,this.persister=a.localStoreBlockingDictionaryPersister(document.numeric.key.messages),b=this.persister.init(),null===b&&this.addNewMessage({id:1,priority:5,content:"Pick an activity that you want to practice"})}return b.prototype.cmp=function(a){return function(b,c){return b[0]>c[0]?1*a:-1*a}},b.prototype.addNewMessages=function(a){var b,c,d,e,f;try{for(f=[],d=0,e=a.length;e>d;d++)b=a[d],f.push(this.addNewMessage(b));return f}catch(g){return c=g,console.log("could not add messages from server")}},b.prototype.addNewMessage=function(a){var b,c,d,e;try{if(void 0===a||void 0===a.content||void 0===a.id||void 0===a.priority)return void 0;if(b=Number(a.id),d=Number(a.priority),isNaN(b)||isNaN(d))return void 0;if(c=this.persister.get(a.id),void 0===c)return a.seen=!1,a.id=b,a.priority=d,a.rcvdTime=(new Date).getTime(),this.persister.set(a.id,a)}catch(f){return e=f,console.log("could not add new message")}},b.prototype.markAsSeen=function(a){return a=this.persister.get(a.id),a.seen=!0,this.persister.set(a.id,a)},b.prototype.removeMessage=function(a){return this.persister.remove(a.id)},b.prototype.removeOneSeenMessageIfCloseToMax=function(a){var b,c,d,e;try{if(a.length>this.MAXSEENMSG)return d=function(){var d;d=[];for(b in a)c=a[b],c.seen&&d.push([c.rcvdTime,c]);return d}(),d.length<1?void 0:(d.sort(this.cmp(1)),c=d[0][1],this.removeMessage(c))}catch(f){return void(e=f)}},b.prototype.getMessageToShow=function(){var a,b,c,d,e;try{return a=this.persister.getAll(),void 0===a||a.length<1?void 0:(this.removeOneSeenMessageIfCloseToMax(a),e=function(){var d;d=[];for(b in a)c=a[b],c.seen||d.push([c.priority,c]);return d}(),e.length<1?void 0:(e.sort(this.cmp(-1)),c=e[0][1],this.markAsSeen(c),c))}catch(f){return void(d=f)}},b}())}])}.call(this),function(){angular.module("ModulePersistence",[])}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};angular.module("ModulePersistence").factory("PersistenceManager",["$q","SerializationMethods","LocalStorageManager","FileStorageManager","ServerStorageManager",function(b,c,d,e,f){var g,h,i,j,k,l;return j=function(){function a(){this.localStore=d,this.fileStore=e,this.serverStore=f}return a.prototype.serialize=function(a){return c.serialize(a)},a.prototype.deserialize=function(a){return c.deserialize(a)},a.prototype.saveText=function(a,b,c){return a.saveText(b,c)},a.prototype.readText=function(a,b){return a.readText(b)},a.prototype.saveTextBlocking=function(a,b,c){return a.saveTextBlocking(b,c)},a.prototype.readTextBlocking=function(a,b){return a.readTextBlocking(b)},a.prototype.saveObject=function(a,c,d){var e,f,g;e=b.defer();try{g=this.serialize(d)}catch(h){return f=h,e.reject([1,f]),e.promise}return this.saveText(a,c,g).then(function(a){return e.resolve(a)})["catch"](function(a){return e.reject(a)}),e.promise},a.prototype.readObject=function(a,c){var d;return d=b.defer(),this.readText(a,c).then(function(a){return function(b){var c,e;try{c=a.deserialize(b),d.resolve(c)}catch(f){return e=f,d.reject([1,e]),d.promise}return d.resolve(c)}}(this))["catch"](function(a){return d.reject(a)}),d.promise},a.prototype.saveObjectBlocking=function(a,b,c){var d,e;try{e=this.serialize(c)}catch(f){return d=f,null}return this.saveTextBlocking(a,b,e)},a.prototype.readObjectBlocking=function(a,b){var c,d,e;try{return e=this.readTextBlocking(a,b),c=this.deserialize(e)}catch(f){return d=f,null}},a.prototype.save=function(a,b){return this.saveObject(this.localStore,a,b)},a.prototype.read=function(a){return this.readObject(this.localStore,a)},a.prototype.localStorePersister=function(a){return new l(this,this.localStore,a)},a.prototype.localStoreBlockingPersister=function(a){return new k(this,this.localStore,a)},a.prototype.localStoreDictionaryPersister=function(a){return new i(this,this.localStore,a)},a.prototype.localStoreBlockingDictionaryPersister=function(a){return new h(this,this.localStore,a)},a.prototype.cacheWithwriteThruToLocalStorePersister=function(a){return new g(this,this.localStore,a)},a}(),l=function(){function a(a,b,c){this.persistenceManager=a,this.store=b,this.key=c}return a.prototype.read=function(){return this.persistenceManager.readObject(this.store,this.key)},a.prototype.save=function(a){return this.persistenceManager.saveObject(this.store,this.key,a)},a.prototype.clear=function(){return this.persistenceManager.saveObject(this.store,this.key,{})},a}(),k=function(){function a(a,b,c){this.persistenceManager=a,this.store=b,this.key=c}return a.prototype.read=function(){return this.persistenceManager.readObjectBlocking(this.store,this.key)},a.prototype.save=function(a){return this.persistenceManager.saveObjectBlocking(this.store,this.key,a)},a.prototype.clear=function(){return this.persistenceManager.saveObjectBlocking(this.store,this.key,{})},a}(),i=function(){function c(b,c,d){this.persistenceManager=b,this.store=c,this.objkey=d,this.remove=a(this.remove,this),this.set=a(this.set,this),this.get=a(this.get,this),this.persister=new l(this.persistenceManager,this.store,this.objkey)}return c.prototype.init=function(){var a;return a=b.defer(),this.persister.read().then(function(b){return a.resolve(b)})["catch"](function(b){return function(c){return b.persister.clear().then(function(){return a.reject(c)})}}(this)),a.promise},c.prototype.get=function(a){var c;return c=b.defer(),this.persister.read().then(function(){return function(b){return c.resolve(b[a])}}(this))["catch"](function(){return function(a){return c.reject(a)}}(this)),c.promise},c.prototype.set=function(a,c){var d;return d=b.defer(),this.persister.read().then(function(b){return function(e){return e[a]=c,b.persister.save(e).then(function(a){return d.resolve(a)})["catch"](function(a){return d.reject(a)})}}(this))["catch"](function(a){return d.reject(a)}),d.promise},c.prototype.remove=function(a){return this.persister.read().then(function(b){return function(c){return c[a]?(delete c[a],b.persister.save(c)):void 0}}(this))},c.prototype.clear=function(){return this.persister.clear()},c}(),h=function(){function b(b,c,d){this.persistenceManager=b,this.store=c,this.objkey=d,this.remove=a(this.remove,this),this.set=a(this.set,this),this.get=a(this.get,this),this.getAll=a(this.getAll,this),this.persister=new k(this.persistenceManager,this.store,this.objkey)}return b.prototype.init=function(){var a;return a=this.persister.read(),void 0!==a&&null!==a?a:(this.persister.clear(),null)},b.prototype.getAll=function(){return this.persister.read()},b.prototype.get=function(a){var b;return b=this.persister.read(),b[a]},b.prototype.set=function(a,b){var c;return c=this.persister.read(),c[a]=b,this.persister.save(c)},b.prototype.remove=function(a){var b;return b=this.persister.read(),b[a]?(delete b[a],this.persister.save(b)):void 0},b.prototype.clear=function(){return this.persister.clear()},b}(),g=function(){function a(a,b,c){this.persistenceManager=a,this.store=b,this.objkey=c,this.cache={},this.persister=new i(this.persistenceManager,this.store,this.objkey)}return a.prototype.init=function(){var a;return a=b.defer(),this.persister.init().then(function(b){return function(c){var d,e;for(d in c)e=c[d],b.cache[d]=e;return a.resolve(c)}}(this))["catch"](function(b){return a.reject(b)}),a.promise},a.prototype.get=function(a){return this.cache[a]},a.prototype.set=function(a,b){return this.cache[a]=b,this.persister.set(a,b)},a.prototype.remove=function(a){return this.cache[a]&&delete this.cache[a],this.persister.remove(a)},a.prototype.clear=function(){var a,b,c;c=this.cache;
for(a in c)b=c[a],delete this.cache[a];return this.persister.clear()},a}(),new j}])}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};angular.module("ModulePersistence").factory("FS",["$q","md5",function(b,c){var d;return new(d=function(){function d(){this.tryDeleteFile=a(this.tryDeleteFile,this),this.readDataFromFile=a(this.readDataFromFile,this),this.writeDataToFile=a(this.writeDataToFile,this),this.getContents=a(this.getContents,this),this.getFileSystem=a(this.getFileSystem,this),this.quota=10,this.salt="only the first line of defence",window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,this._getDirEntryRawName(document.numeric.url.base.fs,{create:!0}).then(function(a){return function(){return a.getDirEntry(document.numeric.path.result,{create:!0})}}(this)).then(function(a){return function(){return a.getDirEntry(document.numeric.path.activity,{create:!0})}}(this)).then(function(a){return function(){return a.getDirEntry(document.numeric.path.body,{create:!0})}}(this)).then(function(a){return function(){return a.getDirEntry(document.numeric.path.meta,{create:!0})}}(this)).then(function(a){return function(){return a.getDirEntry(document.numeric.path.persistence,{create:!0})}}(this))}return d.prototype._errorHandler=function(a){return function(b){var c;return c=function(){switch(b.code){case FileError.QUOTA_EXCEEDED_ERR:return"QUOTA_EXCEEDED_ERR";case FileError.NOT_FOUND_ERR:return"NOT_FOUND_ERR";case FileError.SECURITY_ERR:return"SECURITY_ERR";case FileError.INVALID_MODIFICATION_ERR:return"INVALID_MODIFICATION_ERR";case FileError.INVALID_STATE_ERR:return"INVALID_STATE_ERR";default:return"Unknown Error: "+b.code}}(),console.log("ERROR: "+c),a.reject(c)}},d.prototype._inCordova=function(){return"undefined"!=typeof LocalFileSystem},d.prototype._printEntries=function(a){var b,c,d,e;for(console.log("entries:"),e=[],c=0,d=a.length;d>c;c++)b=a[c],e.push(console.log(b.name));return e},d.prototype._requestQuota=function(){var a;return a=b.defer(),navigator.webkitPersistentStorage.requestQuota(10485760,function(b){return a.resolve(b)},function(b){return a.reject(b)}),a.promise},d.prototype.getFileSystem=function(){var a;return a=b.defer(),void 0!==this.fileSystem?a.resolve(this.fileSystem):this._inCordova()?window.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(b){return function(c){return b.fileSystem=c,a.resolve(c)}}(this),this._errorHandler(a)):(console.log("running in a browser"),this._requestQuota().then(function(b){return function(c){return window.requestFileSystem(window.PERSISTENT,c,function(c){return b.fileSystem=c,a.resolve(c)},b._errorHandler(a))}}(this))),a.promise},d.prototype._getDirEntryRawName=function(a,c){var d;return console.log("getting dirEntry: "+a),d=b.defer(),this.getFileSystem().then(function(b){return function(e){return"/"===a?d.resolve(e.root):e.root.getDirectory(a,c,function(a){return d.resolve(a)},b._errorHandler(d))}}(this)),d.promise},d.prototype.__getFileEntryRawName=function(a,c){var d;return console.log("getting fileEntry: "+a),d=b.defer(),this.getFileSystem().then(function(b){return function(e){return e.root.getFile(a,c,function(a){return d.resolve(a)},b._errorHandler(d))}}(this))["catch"](function(a){return d.reject(a)}),d.promise},d.prototype.getDirEntry=function(a,b){return this._getDirEntryRawName(document.numeric.url.base.fs+a,b)},d.prototype.getFileEntry=function(a,b){return this.__getFileEntryRawName(document.numeric.url.base.fs+a,b)},d.prototype.getContents=function(a){var c;return c=b.defer(),this.getDirEntry(a,{create:!1}).then(function(a){return function(b){var c;return console.log(b),console.log("fullPath:"+b.fullPath),console.log("toURL:"+b.toURL()),c=b.createReader(),c.readEntries(a._printEntries,a._errorHandler)}}(this))},d.prototype.getFileWriter=function(a){var c;return c=b.defer(),this.getFileEntry(a,{create:!0,exclusive:!1}).then(function(a){return function(b){return b.createWriter(function(a){return c.resolve(a)},a._errorHandler(c))}}(this)),c.promise},d.prototype.getFileReader=function(a){var c;return c=b.defer(),this.getFileEntry(a,{create:!1}).then(function(a){return a.file(function(a){var b;return b=new FileReader,b.onloadend=function(a){return c.resolve(a.target.result)},b.readAsText(a)},function(a){return c.reject(a)})}),c.promise},d.prototype.prepareText=function(a){return void 0===a&&(a=""),this._inCordova()?a:new Blob([a],{type:"text/plain"})},d.prototype.writeToFile=function(a,c){var d;return d=b.defer(),this.getFileWriter(a).then(function(b){return function(e){var f;return console.log("obtained filewriter for: "+a),f=b.prepareText(c),e.seek(0),window.fwfw=e,e.onwriteend=function(){return console.log("finished writing"),d.resolve()},e.onerror=function(a){return d.reject([1,a])},e.write(f)}}(this)),d.promise},d.prototype.readFromFile=function(a){var c;return c=b.defer(),this.getFileReader(a).then(function(a){return c.resolve(a)}),c.promise},d.prototype.writeDataToFile=function(a,d,e){var f,g;return g=b.defer(),f=JSON.stringify(d),this.writeToFile(a,f).then(function(a){return function(){return g.resolve(e?c.createHash(f+a.salt):"ok")}}(this)),g.promise},d.prototype.readDataFromFile=function(a,d){var e;return e=b.defer(),this.readFromFile(a).then(function(a){return function(b){return e.resolve(d&&d!==c.createHash(b+a.salt)?"mismatch":JSON.parse(b))}}(this)),e.promise},d.prototype.tryDeleteFile=function(a){var c;return c=b.defer(),this.getFileEntry(a,{create:!1}).then(function(){return function(a){return a.remove(function(){return c.resolve("removed")},function(){return c.resolve("could not remove, but it is alright")})}}(this),function(){return c.resolve("could not remove, but it is alright")}),c.promise},d}())}])}.call(this),function(){angular.module("ModulePersistence").factory("SerializationMethods",[function(){var a;return new(a=function(){function a(){}return a.prototype.serialize=function(a){return JSON.stringify(a)},a.prototype.deserialize=function(a){return JSON.parse(a)},a}())}])}.call(this),function(){angular.module("ModulePersistence").factory("FileStorageManager",["$q","FS",function(a,b){var c;return new(c=function(){function c(){this.filesystem=b}return c.prototype.readText=function(b){var c;return c=a.defer(),this.filesystem.readFromFile(b).then(function(a){return c.resolve(a)})["catch"](function(a){return c.reject(a)}),c.promise},c.prototype.saveText=function(b,c){var d;return d=a.defer(),this.filesystem.writeToFile(b,c).then(function(){return d.resolve(0)})["catch"](function(a){return d.reject(a)}),d.promise},c}())}])}.call(this),function(){angular.module("ModulePersistence").factory("LocalStorageManager",["$q",function(a){var b,c;return b=function(){function a(){}return a.prototype.isAvailable=function(){return void 0!==window.localStorage},a.prototype.getItem=function(a){return window.localStorage.getItem(a)},a.prototype.setItem=function(a,b){return window.localStorage.setItem(a,b)},a.prototype.clear=function(){return window.localStorage.clear()},a}(),new(c=function(){function b(a){this.rawStore=a}return b.prototype.clear=function(){return this.rawStore.clear()},b.prototype.readText=function(b){var c,d,e;if(c=a.defer(),this.rawStore.isAvailable())try{e=this.rawStore.getItem(b),null===e||void 0===e?c.reject([0]):c.resolve(e)}catch(f){d=f,c.reject([1,d])}else c.reject([-1]);return c.promise},b.prototype.saveText=function(b,c){var d,e;if(d=a.defer(),this.rawStore.isAvailable())try{this.rawStore.setItem(b,c),d.resolve(c)}catch(f){e=f,d.reject([1,e])}else d.reject([-1]);return d.promise},b.prototype.readTextBlocking=function(a){var b,c;if(!this.rawStore.isAvailable())return null;try{return c=this.rawStore.getItem(a),null===c||void 0===c?void 0:c}catch(d){return b=d,null}},b.prototype.saveTextBlocking=function(a,b){var c;if(!this.rawStore.isAvailable())return null;try{return this.rawStore.setItem(a,b),b}catch(d){return c=d,null}},b}())(new b)}])}.call(this),function(){angular.module("ModulePersistence").factory("ServerStorageManager",["$q",function(){}])}.call(this),function(){angular.module("ModuleDataPack",[]),angular.module("ModuleDataPack").factory("DataPack",[function(){var a,b;return a=function(){function a(){}return a.prototype.data={name:{male:["Jackson","Aiden","Liam","Lucas","Noah","Jayden","Ethan","Jacob","Jack","Logan","Benjamin","Michael","Ryan","Alexander","Elijah","James","William","Oliver","Connor","Matthew","Daniel","Luke","Henry","Gabriel","Joshua","Nicholas","Isaac","Nathan","Andrew","Samuel","Christian","Evan","Charlie","David","Sebastian","Joseph","Anthony","John","Tyler","Zachary","Thomas","Julian","Adam","Isaiah","Alex","Aaron","Parker","Cooper","Miles","Chase","Christopher","Blake","Austin","Jordan","Leo","Jonathan","Adrian","Colin","Hudson","Ian","Xavier","Tristan","Jason","Brody","Nathaniel","Jake","Jeremiah","Elliot","Derek","Toby"],female:["Sally","Lynn","Sophia","Emma","Olivia","Isabella","Mia","Ava","Lily","Zoe","Emily","Chloe","Layla","Madison","Madelyn","Abigail","Aubrey","Charlotte","Amelia","Ella","Kaylee","Avery","Aaliyah","Hailey","Hannah","Aria","Arianna","Lila","Evelyn","Grace","Ellie","Anna","Kaitlyn","Isabelle","Sophie","Scarlett","Natalie","Leah","Sarah","Nora","Mila","Elizabeth","Lillian","Kylie","Audrey","Lucy","Maya","Annabelle","Gabriella","Elena","Victoria","Claire","Savannah","Maria","Stella","Liliana","Allison","Samantha","Alyssa","Molly","Violet","Julia","Eva","Alice","Alexis","Kayla","Katherine","Lauren","Jasmine","Caroline","Vivian","Juliana"]},buyable:["a magazine","a new toy robot","a new diary","a book","a book about birds","a movie ticket"],itemsWithPrices:[[["types of pets","pet","prices","price",["$",""]],[["Goldfish",10],["Kitten",35],["Puppy",40],["Ferret",30],["Iguana",70],["Parrot",50],["Parakeet",20],["Snake",20],["Turtle",30],["Frog",10]]],[["types of fish","fish","prices","price",["$",""]],[["Acei Cichlid",10],["African Cichlid",10],["African Featherfin Catfish",20],["African Knifefish",10],["Albino Cory Catfish",5],["Algae Eater",5],["Angelfish",10],["Angelicus Botia",15],["Auratus Cichlid",10],["Australian Rainbowfish",5],["Black Ghost Knifefish",15],["Black Moor Goldfish",10],["Boesemani Rainbowfish",10],["Peacock Eel",15],["Fancy Goldfish",35],["Pigeon Blood Discus",400],["Calico Ryukin Goldfish",200],["Elongated Mbuna",80],["Neon Tetra",60],["Serpae Tetra",65],["Snow White Socolofi",75],["Orange Sailfin Molly",45],["Red Sailfin Molly",45],["Red Swordtail",40],["Green Tiger Barb",30],["Plakat Betta",40]]],[["cars","car","maximum speeds","maximum speed",[""," mph"]],[["Nissan Centra",120],["Toyota Camry",130],["Honda Odyssey",160],["Dodge Caravan",150],["Dodge Caravan",150],["Mazda 626",175],["Mazda Protege",165],["Ford Mustang",170],["Cadillac",160],["Hummer H2",120],["Toyota Prius",110],["Tesla Model S",145],["Mercedes-Benz SLK",140],["BMW i3",170],["Subaru Outback",135],["Subaru Tribeca",145],["BMW x5",150],["Volkswagen Jetta",160]]],[["types of boats","boat","lengths","length",[""," ft"]],[["Class A small",5],["Class A medium",10],["Class A large",15],["Class 1 medium",20],["Class 1 large",25],["Class 2 medium",30],["Class 2 large",35],["Class 3 small",40],["Class 3 medium",50],["Class 3 large",60]]]],item:{person:[[[["boy","boys"],["girl","girls"]],["kid","children"]],[[["boy","boys"],["girl","girls"]],["kid","children"]],[[["adult","adults"],["kid","kids"]],["person","people"]],[[["man","men"],["woman","women"]],["person","people"]]],bird:[[[["red bird","red birds"],["blue bird","blue birds"]],["bird","birds"]],[[["robin","robins"],["sparrow","sparrows"]]]],zoo:[[[["penguin","penguins"],["meerkat","meerkats"]]],[[["zebra","zebras"],["deer","deers"]]]],forest:[[[["wolf","wolves"],["rabbit","rabbits"]]],[[["pine tree","pine trees"],["cedar tree","cedar trees"]],["cedar or pine tree","cedar and pine trees"]],[[["bear","bears"],["squirrel","squirrels"]]]],animal:[[[["red bird","red birds"],["blue bird","blue birds"]],["bird","birds"]],[[["dog","dogs"],["cat","cats"]],["animal","animals"]],[[["mouse","mice"],["cat","cats"]]]],barn:[[[["dog","dogs"],["cat","cats"]],["animal","animals"]],[[["horse","horses"],["cow","cows"]]],[[["pig","pigs"],["cow","cows"]]],[[["duck","ducks"],["chicken","chickens"]]]],thing:[[[["orange candy","orange candies"],["green candy","green candies"]],["candy","candies"]],[[["red ball","red balls"],["green ball","green balls"]],["ball","balls"]],[[["red marble","red marbles"],["blue marble","blue marbles"]],["marble","marbles"]],[[["black pencil","black pencils"],["red pencil","red pencils"]],["pencil","pencils"]],[[["pencil","pencils"],["pen","pens"]]],[[["dime","dimes"],["quarter","quarters"]],["coin","coins"]],[[["apple","apples"],["banana","bananas"]]],[[["fruit","fruits"],["vegetable","vegetables"]]],[[["pea","peas"],["carrot","carrots"]]]]},location:{person:[[[""],""],[[""],""],[["room"],"in the"],[["class","ballet class"],"in the"],[["classroom"],"in the"],[["building"],"in the"],[["lobby"],"in the"],[["hotel"],"in the"],[["park"],"in the"],[["museum"],"in the"],[["train station"],"at the"],[["playground"],"on the"],[["school"],"in the"]],bird:[[[""],""],[[""],""],[["tree","tall"],"on the","sitting"],[["park"],"in the"],[["forest"],"in the"],[["lake"],"by the","sitting"]],zoo:[[[""],""],[[""],""],[["zoo","local"],"at the"]],forest:[[[""],""],[[""],""],[["forest"],"in the"]],animal:[[[""],""],[[""],""],[[""],""],[["city","small"],"in the"]],barn:[[[""],""],[[""],""],[["yard"],"on the"],[["barn"],"in the"]],thing:[[[""],""],[[""],""],[["room"],"in the"],[["box"],"in the"],[["table"],"on the"],[["room"],"in the"]]}},a}(),b=new a,document.numeric.modules.DataPack=b,b}])}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};angular.module("ModuleDataUtilities",["ModuleDataPack","BaseLib"]),angular.module("ModuleDataUtilities").factory("DataUtilities",["DataPack","RandomFunctions",function(b,c){var d,e;return d=function(){function d(){this.randomName=a(this.randomName,this)}return d.prototype.d=b,d.prototype.r=c,d.prototype.randomName=function(){var a,b,c,d,e;return e=this.d.data.name,a=e.male.length,b=e.female.length,c=this.r.random(0,a+b),d=c>=a?[e.female[c-a],"she","her","her"]:[e.male[c],"he","him","his"]},d.prototype.randomNames=function(a,b){var c,d,e,f,g,h;for(g=[],f=[],c=function(a){return void 0===b||b(a)},d=h=1;a>=1?a>=h:h>=a;d=a>=1?++h:--h){for(e=this.randomName();g.indexOf(e[0])>-1||!c(e[0]);)e=this.randomName();g.push(e[0]),f.push(e)}return f},d}(),e=new d,document.numeric.modules.DataUtilities=e,e}])}.call(this),function(){angular.module("AppOne",["ngRoute","ngMd5","timer","ModulePersistence","ModuleSettings","ModuleMessage","BaseLib","ModuleIdentity","ModuleCommunication","ModuleDataPack","ModuleDataUtilities","Krista"])}.call(this),function(){angular.module("AppOne").controller("ConnectCtrl",["$scope","$rootScope","$location","$routeParams","Settings","Tracker","Connections",function(a,b,c,d,e,f,g){return e.ready?(f.touch("connect"),a.teachers=g.getAll(),a.noTeachers=!1):c.path("/")}]).controller("AddTeacherCtrl",["$scope","$location","Settings","Tracker","Connections",function(a,b,c,d,e){var f,g;return c.ready?(d.touch("addteacher"),a.teacherId="",a.scan=function(){return cordova.plugins.barcodeScanner.scan(function(b){return a.teacherId=b.text,console.log("scanned: "+b.text)},function(b){return a.error=b,console.log("scanned-error: "+b)})},f=function(a){return 32===a.length},g=function(a){return a.length>1&&a.length<30},a.addTeacher=function(){return function(){return console.log("adding"),f(a.teacherId)&&g(a.teacherName)?(console.log("passed"),e.add({id:a.teacherId,name:a.teacherName,newItems:0}),b.path("/connect")):void 0}}(this)):b.path("/")}]).controller("TeachersCtrl",["$scope","$location","Settings","Tracker","DeviceId",function(a,b,c,d,e){return c.ready?(d.touch("teachers"),a.myId=e.devicePublicId):b.path("/")}]).controller("MyIdentityCtrl",["$scope","$location","Settings","Tracker","DeviceId","QRSignature",function(a,b,c,d,e,f){return c.ready?(d.touch("myid"),a.myId=e.devicePublicId,a.myId_p1=e.devicePublicId.substring(0,16),a.myId_p2=e.devicePublicId.substring(16),a.size=8,a.showCode=function(){var b,c;return b=f.encode(e.devicePublicId,a.size),c=document.getElementById("qrcode"),c.lastChild?c.replaceChild(b,c.lastChild):c.appendChild(b),1},a.smaller=function(){return a.size=Math.max(a.size-1,5),a.showCode()},a.bigger=function(){return a.size=Math.min(a.size+1,10),a.showCode()},a.showCode()):b.path("/")}])}.call(this),function(){angular.module("AppOne").controller("HistoryCtrl",["$scope","$routeParams","$location","Settings","ActivitySummary","Tracker",function(a,b,c,d,e,f){var g;return d.ready?(f.touch("history"),a.activitySummariesInfoAll=e.getAllSummaries(),a.totalItems=a.activitySummariesInfoAll.length,a.noHistory=a.activitySummariesInfoAll.length<1,a.$watch("activitySummariesInfoAll",function(b){return a.noHistory=b.length<1,a.totalItems=b.length},!0),a.getPage=function(){return function(b,c){return a.activitySummariesInfo=e.getAllSummariesPage(b,c)}}(this),a.refreshList=function(){return e.setFirstIndex(a.startIndex),a.getPage(a.startIndex,a.endIndex)},a.pageSize=d.get("historyPageSize"),a.turnPage=function(b){return a.startIndex=a.startIndex+b<0||a.totalItems<1?0:a.startIndex+b>=a.totalItems?Math.floor((a.totalItems-1)/a.pageSize)*a.pageSize:a.startIndex+b,a.endIndex=Math.min(a.startIndex+a.pageSize,a.totalItems),a.refreshList()},g=b.containedItem,a.startIndex=void 0!==g&&"continue"===g?e.getFirstIndex():-1,a.turnPage(0)):c.path("/")}]).controller("HistoryItemCtrl",["$scope","$routeParams","$location","$sce","Settings","Tracker","ActivitySummary",function(a,b,c,d,e,f,g){var h,i;return e.ready?(a.linkSubmitShow=e.get("linkSubmitShow"),i=b.itemId,void 0===i||""===i||"test"===i?c.path("/"):(f.touch("historyitem",i),h=b.backButton,a.backButton=void 0!==h&&""!==h&&"test"!==h?"#/tasksList":"#/history/continue",g.getSummaryById(i).then(function(b){var c;return"mismatch"===b?a.mismatch=!0:(a.mismatch=!1,a.activityName=b.activityName,a.timestamp=b.endTime,a.responses=function(){var a,e,f,g;for(f=b.responses,g=[],a=0,e=f.length;e>a;a++)c=f[a],g.push([d.trustAsHtml(""+c[0]),d.trustAsHtml(""+c[1]),d.trustAsHtml(""+c[2]),c[3],c[4]]);return g}(),a.correct=b.runningTotals.correct,a.wrong=b.runningTotals.wrong,a.total=b.runningTotals.correct+b.runningTotals.wrong,a.totalSeconds=Math.round((b.endTime-b.startTime)/1e3),a.avgSeconds=Math.round((b.endTime-b.startTime)/a.total/1e3)),a.ready=!0})["catch"](function(b){return console.log(b),a.mismatch=!0,a.ready=!0,c.path("/")}))):c.path("/")}])}.call(this),function(){angular.module("AppOne").controller("HomeCtrl",["$scope","$rootScope","$routeParams","Settings","Bookmarks","ActivityManager","Tracker","DataPack",function(a,b,c,d,e,f,g){var h;return h=function(){return g.touch("home"),a.settingsLoaded=!0,a.linkConnectShow=d.get("linkConnectShow"),a.linkSubmitShow=d.get("linkSubmitShow"),a.linkSettingsShow=d.get("linkSettingsShow")},d.ready?h():(a.settingsLoaded=!1,d.init(document.numeric.key.settings,document.numeric.defaultSettings).then(function(){return function(){return h()}}(this))["catch"](function(){return function(){return a.errorMessage="Application needs some local storage enabled to work."}}(this)))}])}.call(this),function(){angular.module("AppOne").controller("InfoCtrl",["$scope","$rootScope","$location","$routeParams","Settings","Tracker",function(a,b,c,d,e,f){return e.ready?f.touch("info"):c.path("/")}])}.call(this),function(){angular.module("AppOne").controller("TasksMarketplaceCtrl",["$scope","$location","Settings","Tracker","Marketplace","ActivityManager",function(a,b,c,d,e,f){var g;return c.ready?(d.touch("marketplace"),a.currentTab=Object.keys(f.getInstalledActivitiesMeta()).length<1?"available":"installed",a.selectTab=function(b){return a.currentTab=b,a.confirmRemoveId=void 0,a.confirmAddId=void 0,a.detailsId=void 0},a.toggleDetailsId=function(b){return void 0!==a.confirmRemoveId?void(a.confirmRemoveId=void 0):void 0!==a.confirmAddId?void(a.confirmAddId=void 0):void 0!==a.confirmUpdateId?void(a.confirmUpdateId=void 0):a.detailsId===b?void(a.detailsId=void 0):a.detailsId=b},a.mapOfAvailableActivities=f.getInstalledActivitiesMeta(),a.somethingInstalled=function(){return Object.keys(f.getInstalledActivitiesMeta()).length>0},a.isInstalled=function(a){return f.isInstalled(a)},a.needsUpdate=function(a,b){var c;return b.version?(c=f.getInstalledActivityMeta(a),c.version?b.version>c.version:!0):!1},a.uninstallActivity=function(a){return f.uninstallActivity(a)},a.installNewActivity=function(b,c){return a.loadingActivity=b,f.installActivity(b,c)["catch"](function(){return function(a){return console.log("error installing: "+a)}}(this)).then(function(){return a.loadingActivity=void 0})},a.updateActivity=function(b,c){return a.loadingActivity=b,f.updateActivity(b,c)["catch"](function(){return function(a){return console.log("error updating: "+a)}}(this)).then(function(){return a.loadingActivity=void 0})},a.pageNumber=0,g=function(b){return a.loadingList=!0,e.getPublicActivitiesMeta(a.pageNumber,b).then(function(b){return a.errorStatus=void 0,a.availableActivitiesMeta=b.data.activities})["catch"](function(b){return console.log("Could not get list of activity metas from server, status: "+b),a.errorStatus=b,e.getLocalActivitiesMeta().then(function(b){return a.availableActivitiesMeta=b.data.activities})["catch"](function(a){return console.log("error getting local available activities list: "+a)})}).then(function(){return a.loadingList=!1})},g(a.searchTermPublic),a.tryGettingPublicAgain=function(){return g(a.searchTermPublic)},a.searchPublic=function(){var b;return b=a.searchTermPublic,void 0===b||(b=b.trim(),b.length<3)?void 0:g(b)}):b.path("/")}])}.call(this),function(){angular.module("AppOne").controller("SampleQuestionCtrl",["$scope","$sce","PersistenceManager","KristaQuestions",function(a,b,c,d){return a.browserGood="undefined"!=typeof navigator.webkitPersistentStorage,window.pers=c,a.regen=function(e){var f,g;return c.save("testikl",{s:1,b:"as",c:{h:"yello"}}).then(function(){return c.read("testikl").then(function(b){return a.testik=b})})["catch"](function(a){return console.log(a)}),a.showAnswer=!1,g=d.generate(e),a.question=b.trustAsHtml(""+g[0][0]),g[0].length>1?(a.choices=function(){var a,c,d,e;for(d=g[0][1],e=[],a=0,c=d.length;c>a;a++)f=d[a],e.push(b.trustAsHtml(""+f));return e}(),a.answer=b.trustAsHtml(""+g[0][1][g[1]])):(a.choices=void 0,a.answer=b.trustAsHtml(""+g[1]))},a.regen(4)}])}.call(this),function(){angular.module("AppOne").controller("SettingsCtrl",["$scope","$location","Settings","ActivityMeta","ActivityBody","Bookmarks","Tracker",function(a,b,c,d,e,f,g){return c.ready?(g.touch("settings"),a.getAttr=function(a){return c.get(a)},a.setAttr=function(a,b){return c.set(a,b)},a.defaultMainServerAddress=c.getDefault("mainServerAddress"),a.mainServerAddress=c.get("mainServerAddress"),a.newMainServerAddress=c.get("mainServerAddress"),a.mainServerAddress_set=function(){var b;return b=a.newMainServerAddress.trim().replace("http://","https://"),0!==b.length?("/"!==b[b.length-1]&&(b+="/"),c.set("mainServerAddress",b),a.mainServerAddress=c.get("mainServerAddress"),a.newMainServerAddress=a.mainServerAddress):void 0},a.mainServerAddress_reset=function(){return c.unset("mainServerAddress"),a.mainServerAddress=c.get("mainServerAddress"),a.newMainServerAddress=c.get("mainServerAddress")},a.clearLocalStorage=function(){return window.localStorage.clear()}):b.path("/")}])}.call(this),function(){angular.module("AppOne").controller("TaskCtrl",["$scope","$routeParams","$location","Settings","Tracker","ActivityDriver","ActivityManager",function(a,b,c,d,e,f,g){var h;return d.ready?(h=b.taskId,void 0===h||""===h?c.path("/"):(e.touch("task",h),a.activityDriver=f,g.loadActivity(h).then(function(b){return a.currentActivity=f.setActivity(b,a),a.finishActivity=function(){return f.tryFinishActivity().then(function(a){return console.log(a),c.path("/historyItem/"+a+"/tasksList")})["catch"](function(a){return console.log("could not finish activity: "+a)})}})["catch"](function(){return c.path("/")}))):c.path("/")}])}.call(this),function(){angular.module("AppOne").controller("TaskListCtrl",["$scope","$location","$sce","Settings","Tracker","MessageDispatcher","ActivityManager","KristaQuestions",function(a,b,c,d,e,f,g){var h;return d.ready?(e.touch("taskslist"),h=f.getMessageToShow(),void 0!==h?(a.showMessage=!0,a.message=c.trustAsHtml(h.content)):(a.showMessage=!1,a.message=""),a.tableOfAvailableActivities=g.getInstalledActivitiesMeta(),a.noActivities=Object.keys(a.tableOfAvailableActivities).length<1,a.$watch("tableOfAvailableActivities",function(){return a.noActivities=Object.keys(a.tableOfAvailableActivities).length<1},!0)):b.path("/")}])}.call(this),function(){angular.module("AppOne").controller("TestCtrl",["$scope","$rootScope","$routeParams","$http","md5","FS","Settings",function(a,b,c,d,e,f,g){return a.showScriptsInHead=function(){var b,c,d,e,f;for(c=document.getElementsByTagName("script"),a.scripts=[],f=[],d=0,e=c.length;e>d;d++)b=c[d],f.push(void 0!==b.id&&""!==b.id?a.scripts.push(b):void 0);return f},a.getHttpsData=function(){return d.get("https://www.vicinitalk.com/api/v1/post/375/?format=json").then(function(b){return console.log(b),a.httpsdata=b.data},function(a){return console.log("error: "+a)})},a.writeToFile=function(){return f.writeToFile("testdata.txt","hsellodata")},a.readFromFile=function(){return f.readFromFile("testdata.txt").then(function(b){return a.readData=b})},a.getContentsRaw=function(a){return f.getContents(a)},a.getFromLocal=function(b){return a.localData=window.localStorage.getItem(b)},a.testmd5=function(b){return a.localData=e.createHash(b)},a.setServerToLocalHost=function(){return g.set("mainServerAddress","http://localhost:9000/starpractice/data/")}}])}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};angular.module("AppOne").factory("ActivityBody",["$q","Settings","DeviceId","ActivityMeta","ServerHttp","FS",function(b,c,d,e,f,g){var h;return new(h=function(){function d(){this.getOrLoad=a(this.getOrLoad,this),this.loadActivity=a(this.loadActivity,this),this.__loadScript=a(this.__loadScript,this),this._loadScript=a(this._loadScript,this),this._attachActivityMeta=a(this._attachActivityMeta,this)}return d.prototype._activities={},d.prototype._inCordova=function(){return"undefined"!=typeof LocalFileSystem},d.prototype._scriptId=function(a){return"script_"+a},d.prototype._pathFS=function(a){return document.numeric.path.body+a},d.prototype._uriCdv=function(a){var b;return b=this._inCordova()?document.numeric.url.base.cdv:document.numeric.url.base.chrome,b+document.numeric.url.base.fs+this._pathFS(a)},d.prototype._uriLocal=function(a){return document.numeric.url.base.local+document.numeric.path.body+a},d.prototype._uriRemote=function(a){return c.get("mainServerAddress")+document.numeric.path.body+a},d.prototype._attachActivityMeta=function(a){var c;return c=b.defer(),e.get(a).then(function(b){return function(d){return b._activities[a].id=a,b._activities[a].meta=d,c.resolve("attached meta")}}(this),function(a){return c.reject(a)}),c.promise},d.prototype._downloadActivityBody=function(a){return f.download(this._uriRemote(a),this._pathFS(a))},d.prototype._deleteDownloadedFile=function(a){var c;return c=b.defer(),g.tryDeleteFile(this._pathFS(a)).then(this._inCordova()?function(){return function(){return c.resolve("deleted")}}(this):function(){return function(){return c.resolve("deleted")}}(this)),c.promise},d.prototype._loadScript=function(a,c){var d;return d=b.defer(),this.__loadScript(a,c).then(function(){return function(a){return d.resolve(a)}}(this))["catch"](function(a){return function(b){var e;return e=document.getElementById(a._scriptId(c)),e.parentElement.removeChild(e),d.reject(b)}}(this)),d.promise},d.prototype.__loadScript=function(a,c){var d,e,f;return console.log("__ attempt to load script with key: "+c+" and uri: "+a),d=b.defer(),f=this._scriptId(c),e=document.createElement("script"),e.type="text/javascript",e.id=f,e.onload=function(a){return function(){return console.log("script onload"),document.numeric.numericTasks[c]?(a._activities[c]=document.numeric.numericTasks[c],delete document.numeric.numericTasks[c],a._activities[c].id=c,d.resolve("script loaded: "+f)):d.reject("script did not load: "+f)}}(this),e.onerror=function(){return function(){return d.reject("error occured, script did not load: "+f)}}(this),e.src=a,document.getElementsByTagName("head")[0].appendChild(e),d.promise},d.prototype.removeBody=function(a){return this._deleteDownloadedFile(a)},d.prototype.unloadActivity=function(a){var b;return this._activities[a]?(b=document.getElementById(this._scriptId(a)),b.parentElement.removeChild(b),delete this._activities[a]):void 0},d.prototype.loadActivity=function(a){var c;return console.log("Call to load script with activityId: "+a),this._activities[a]?(c=b.defer(),c.resolve("already loaded"),c.promise):this._loadScript(this._uriLocal(a),a)["catch"](function(b){return function(){var c;return c="?cb="+Math.round(new Date/1e3),b._loadScript(b._uriCdv(a)+c,a)}}(this))["catch"](function(b){return function(){return b._downloadActivityBody(a).then(function(){var c;return c="?cb="+Math.round(new Date/1e3),b._loadScript(b._uriCdv(a)+c,a)})}}(this)).then(function(b){return function(){return b._attachActivityMeta(a)}}(this))},d.prototype.loadActivities=function(a){var c,d,e,f;for(console.log("loadScripts called with "+a),d=[],e=0,f=a.length;f>e;e++)c=a[e],d.push(this.loadActivity(c));return b.all(d)},d.prototype.get=function(a){return this._activities[a]},d.prototype.getOrLoad=function(a){var c,d;return d=b.defer(),c=this._activities[a],c?d.resolve(c):this.loadActivity(a).then(function(b){return function(){return c=b._activities[a],c?d.resolve(c):d.reject("could not load activity")}}(this),function(a){return d.reject(a)}),d.promise},d}())}])}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};angular.module("AppOne").factory("ActivityMeta",["$q","$http","Settings","ServerHttp","PersistenceManager",function(b,c,d,e,f){var g;return new(g=function(){function c(){this._httpGet=a(this._httpGet,this),this._cacheGet=a(this._cacheGet,this),this.writeThruCache=f.cacheWithwriteThruToLocalStorePersister(document.numeric.key.bookmarkedActivities),this.writeThruCache.init()}return c.prototype._key=document.numeric.key.activitiesMeta,c.prototype._urls={local:function(){return document.numeric.url.base.local+document.numeric.path.meta},remote:function(){return d.get("mainServerAddress")+document.numeric.path.meta}},c.prototype._uriLocal=function(a){return this._urls.local()+a},c.prototype._uriRemote=function(a){return this._urls.remote()+a},c.prototype._cacheGet=function(a){var c,d;return d=b.defer(),c=this.writeThruCache.get(a),c?d.resolve(c):d.reject(),d.promise},c.prototype._httpGet=function(a,c){return function(d){return function(){var f;return f=b.defer(),e.get(a).then(function(a){var b;return b=a.data,b.id=c,d.writeThruCache.set(c,b),f.resolve(b)},function(a){return f.reject(a)}),f.promise}}(this)},c.prototype.get=function(a){return this._cacheGet(a)["catch"](this._httpGet(this._uriLocal(a),a))["catch"](this._httpGet(this._uriRemote(a),a))},c.prototype.set=function(a,b){return this.writeThruCache.set(a,b)},c}())}])}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};angular.module("AppOne").factory("Bookmarks",["$q","PersistenceManager","ActivityMeta",function(b,c,d){var e;return new(e=function(){function e(){this._findMetaAndAdd=a(this._findMetaAndAdd,this),this.writeThruCache=c.cacheWithwriteThruToLocalStorePersister(document.numeric.key.bookmarkedActivities),this.bookmarks=this.writeThruCache.cache,this.writeThruCache.init()["catch"](function(a){return function(){var c,d,e,f,g;for(d=[],g=document.numeric.defaultActivitiesList,e=0,f=g.length;f>e;e++)c=g[e],d.push(a._findMetaAndAdd(c));
return d.reduce(function(a,b){return a.then(function(a){return b(a)})},b.when(0)).then(function(a){return console.log("loaded "+a+" scripts on bootstrap.")})}}(this))}return e.prototype.get=function(a){return this.writeThruCache.get(a)},e.prototype.add=function(a,b){return this.writeThruCache.set(a,b)},e.prototype.remove=function(a){return this.writeThruCache.remove(a)},e.prototype.clear=function(){return this.writeThruCache.clear()},e.prototype._findMetaAndAdd=function(a){return function(c){return function(e){var f;return f=b.defer(),d.get(a).then(function(b){return c.add(a,b).then(function(){return f.resolve(e+1)})["catch"](function(){return f.resolve(e)})})["catch"](function(){return f.resolve(e)}),f.promise}}(this)},e}())}])}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};angular.module("AppOne").factory("ActivityDriver",["$timeout","$sce","$q","ActivitySummary",function(b,c,d,e){var f,g;return f=function(){function a(a){this.currentTask=a,this.name=this.currentTask.meta.name,this.parameters=this.currentTask.parameters}return a.prototype.lettered=function(a){return" "+"ABCDEFGH"[a]+") "},a.prototype.newQuestion=function(){var a,b,d,e,f;if(this.question=this.currentTask.createNextQuestion(),void 0===this.question)return void 0;if("numeric"===this.question.answerType)this.inputTypeNumeric=!0,this.inputTypeMultipleChoice=!1,this.questionStatementChoices=void 0,this.questionStatementAsHTML_=this.question.statement,this.questionStatementAsHTML=c.trustAsHtml(this.question.statement);else{if("multiple"!==this.question.answerType)return void 0;this.inputTypeNumeric=!1,this.inputTypeMultipleChoice=!0,this.questionStatementChoices_=this.question.choices,d=this.question.statement+'<div class="problem-ol-mult-choice-holder"><ol type="A" class="problem-ol-mult-choice">',f=this.question.choices;for(b in f)a=f[b],d+="<li>"+a+"</li>";d+="</ol></div>",this.questionStatementAsHTML_=d,this.questionStatementAsHTML=c.trustAsHtml(d)}return this.sizingClass=this.question.sizingClassCode&&(this.question.sizingClassCode=5)?"sizeMakeSmaller":"sizeKeepSame",e={questionStatementAsHTML_:this.questionStatementAsHTML_,questionStatementAsHTML:this.questionStatementAsHTML,questionStatementChoices_:this.questionStatementChoices_}},a.prototype.questionString=function(){var a;return a=answer,this.inputTypeMultipleChoice&&(a=this.questionStatementChoices_[answer]),a},a.prototype.answerString=function(a){var b;return b=a,this.inputTypeMultipleChoice&&(b=this.lettered(b)+this.questionStatementChoices_[b]),b},a.prototype.answerStringActual=function(){var a;return a=this.question.getAnswer(),this.inputTypeMultipleChoice&&(a=this.lettered(a)+this.questionStatementChoices_[a]),a},a.prototype.checkAnswer=function(a){return this.question.checkAnswer(a)},a}(),g=function(){function b(){this._checkAnswer=a(this._checkAnswer,this),this.clearResult(),this.resetStats(),this._clearLastQuestion()}return b.prototype._markCorrectResult=function(){return this.statsCorrect=this.statsCorrect+1,this.result={"class":"correct",verbal:"Excellent!"}},b.prototype._markWrongResult=function(){return this.statsWrong=this.statsWrong+1,this.result={"class":"incorrect",verbal:"Wrong..."}},b.prototype.clearResult=function(){return this.result={"class":"none",verbal:""}},b.prototype.resetStats=function(){return this.statsCorrect=0,this.statsWrong=0,this.totalTime=0/0,this.startTime=new Date},b.prototype._clearLastQuestion=function(){return this.answeredQuestion={statement:"","class":"correct",time:""}},b.prototype.setActivity=function(a,b){return this.currentTask=a,this.scope=b,this.clearResult(),this.resetStats(),this.currentActivity=new f(this.currentTask),this.taskName=this.currentTask.meta.name,this._clearLastQuestion(),this.newQuestion(),this.startTime=new Date,e.init(this.currentTask.id,this.currentTask.meta.name),this.currentActivity},b.prototype.tryFinishActivity=function(){var a;return a=d.defer(),e.finish().then(function(b){return a.resolve(b)})["catch"](function(b){return console.log("error finishing task:"+b),a.reject(b)}),a.promise},b.prototype.selectParamValue=function(a,b){return this.currentActivity.parameters[a].selectedValue=b,this.newQuestion(!0)},b.prototype.newQuestion=function(a){return this.totalTime=Math.round((new Date-this.startTime)/1e3),this.answer=void 0,this.question=this.currentActivity.newQuestion(),void 0===this.question?(this.scope.$broadcast("end-of-test"),void this.scope.$broadcast("timer-stop")):(this.questionStatementAsHTML=this.question.questionStatementAsHTML,a?void 0:this.scope.$broadcast("timer-start"))},b.prototype._checkAnswer=function(a){return this.scope.$broadcast("timer-stop"),this.answeredQuestion={statement:this.question.questionStatementAsHTML_,statementAsHTML:this.question.questionStatementAsHTML,answer:this.currentActivity.answerString(a),answerAsHTML:c.trustAsHtml(""+this.currentActivity.answerString(a)),actualAnswer:this.currentActivity.answerStringActual(),actualAnswerAsHTML:c.trustAsHtml(""+this.currentActivity.answerStringActual())},this.currentActivity.checkAnswer(a)?(this._markCorrectResult(),this.answeredQuestion.result=!0):(this._markWrongResult(),this.answeredQuestion.result=!1),e.add(this.answeredQuestion)},b.prototype.pressed=function(a){return void 0===this.answer&&(this.answer=0),this.answer=10*this.answer+a},b.prototype.clear=function(){return this.answer=void 0},b.prototype.enter=function(){return void 0!==this.answer?(this._checkAnswer(this.answer),this.newQuestion()):void 0},b.prototype.pressedChoice=function(a){return this._checkAnswer(a),this.newQuestion()},b}(),console.log("CALL TO FACTORY: ActivityDriver"),new g}])}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};angular.module("AppOne").factory("ActivityManager",["$q","Bookmarks","ActivityBody","ActivityMeta",function(b,c,d,e){var f;return f=function(){function f(){this.updateActivity=a(this.updateActivity,this),this.bookmarks=c.bookmarks}return f.prototype.getInstalledActivitiesMeta=function(){return this.bookmarks},f.prototype.getInstalledActivityMeta=function(a){return this.bookmarks[a]},f.prototype.isInstalled=function(a){return void 0!==this.bookmarks[a]},f.prototype.installActivity=function(a,f){var g;return g=b.defer(),f&&e.set(a,f),d.loadActivity(a).then(function(){return d.unloadActivity(a)}).then(function(){return c.add(a,f),g.resolve("ok")})["catch"](function(a){return console.log(a),g.reject(a)}),g.promise},f.prototype.uninstallActivity=function(a){var e;return e=b.defer(),d.unloadActivity(a),d.removeBody(a).then(function(){return function(){return c.remove(a),e.resolve("ok")}}(this)),e.promise},f.prototype.updateActivity=function(a,c){var d;return d=b.defer(),this.uninstallActivity(a).then(function(b){return function(e){return b.installActivity(a,c),d.resolve(e)}}(this)),d.promise},f.prototype.loadActivity=function(a){return d.getOrLoad(a)},f}(),console.log("CALL TO FACTORY: ActivityManager"),new f}])}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};angular.module("AppOne").factory("ActivitySummary",["$q","FS","PersistenceManager",function(b,c,d){var e;return e=function(){function e(){this.finish=a(this.finish,this),this.currentActivityPersister=d.localStoreBlockingPersister(document.numeric.key.currentActivitySummary),this.activitySummariesPersister=d.localStoreBlockingPersister(document.numeric.key.storedActivitySummaries),this.activitySummariesPersister.read()||this.activitySummariesPersister.save({items:[]}),this._extra="Just the first line of defense."}return e.prototype.__baseFormat=function(){return{activityId:"",activityName:"",runningTotals:{correct:0,wrong:0},responses:[]}},e.prototype._addToAllSummaries=function(a){var b;return b=this.activitySummariesPersister.read(),b.items.unshift(a),this.activitySummariesPersister.save(b)},e.prototype._removeFromAllSummaries=function(a){var b,c,d,e,f,g,h;for(e=this.activitySummariesPersister.read(),c=0,h=e.items,f=0,g=h.length;g>f;f++)b=h[f],b.timestamp!==a&&(d=b);return this.activitySummariesPersister.save(e)},e.prototype.getAllSummaries=function(){return this.activitySummariesPersister.read().items},e.prototype.getAllSummariesPage=function(a,b){return this.getAllSummaries().slice(a,b)},e.prototype.getFromAllSummaries=function(a){var b,c,d,e;for(c=this.getAllSummaries(),d=0,e=c.length;e>d;d++)if(b=c[d],parseInt(b.timestamp)===parseInt(a))return b;return void 0},e.prototype.getSummaryById=function(a){var d,e,f;return d=b.defer(),f=this.getFromAllSummaries(a),e=document.numeric.path.result+a,c.readDataFromFile(e,f.hash).then(function(){return function(a){return d.resolve(a)}}(this),function(){return function(a){return d.reject(a)}}(this)),d.promise},e.prototype.init=function(a,b){var c;return c=this.__baseFormat(),c.activityId=a,c.activityName=b,c.startTime=(new Date).getTime(),this.currentActivityPersister.save(c),this.lastTimePoint=(new Date).getTime()},e.prototype.add=function(a){var b;return b=this.currentActivityPersister.read(),a.result?b.runningTotals.correct=b.runningTotals.correct+1:b.runningTotals.wrong=b.runningTotals.wrong+1,b.responses.push(a.questionHasGraphicData?[a.statement,a.answer,a.actualAnswer,a.result,new Date-this.lastTimePoint,[a.questionGraphicData]]:[a.statement,a.answer,a.actualAnswer,a.result,new Date-this.lastTimePoint,[]]),this.currentActivityPersister.save(b),this.lastTimePoint=(new Date).getTime()},e.prototype.finish=function(){var a,d,e;return d=b.defer(),a=this.currentActivityPersister.read(),a.endTime=this.lastTimePoint,e=document.numeric.path.result+a.endTime,console.log("trying to write to filename: "+e),c.writeDataToFile(e,a,!0).then(function(b){return function(c){var e;return e={activityName:a.activityName,timestamp:a.endTime,totalTime:a.endTime-a.startTime,numberCorrect:a.runningTotals.correct,numberWrong:a.runningTotals.wrong,hash:c},b._addToAllSummaries(e),b.currentActivityPersister.save({}),b.newFirst=0,d.resolve(a.endTime)}}(this))["catch"](function(a){return d.reject(a)}),d.promise},e.prototype.setFirstIndex=function(a){return this.newFirst=a},e.prototype.getFirstIndex=function(){return this.newFirst},e}(),console.log("CALL TO FACTORY: ActivitySummary"),new e}])}.call(this),function(){angular.module("AppOne").factory("Marketplace",["Settings","DeviceId","ServerHttp",function(a,b,c){var d;return new(d=function(){function b(){}return b.prototype.config={activitiesLocal:function(){return document.numeric.url.base.local+document.numeric.path.list},activitiesPublic:function(){return a.get("mainServerAddress")+document.numeric.path.list}},b.prototype.getLocalActivitiesMeta=function(){return c.get(this.config.activitiesLocal())},b.prototype.getPublicActivitiesMeta=function(a,b){var d;return d="",void 0!==b&&(d="&q="+b.trim()),c.get(this.config.activitiesPublic()+"?p="+a+d)},b}())}])}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};angular.module("AppOne").factory("Connections",["$q","ServerHttp","Settings","DeviceId",function(b,c,d){var e;return e=function(){function e(){this._httpGet=a(this._httpGet,this),this._indexOf=a(this._indexOf,this),this._read()||this._httpGet()()["catch"](function(){return function(){}}(this),this._write(document.numeric.defaultTeachersList))}return e.prototype._key=document.numeric.key.connections,e.prototype._urls={remote:function(){return d.get("mainServerAddress")+document.numeric.path.connections}},e.prototype._read=function(){return JSON.parse(window.localStorage.getItem(this._key))},e.prototype._write=function(a){return window.localStorage.setItem(this._key,JSON.stringify(a))},e.prototype._clear=function(){return window.localStorage.setItem(this._key,JSON.stringify({}))},e.prototype._add=function(a){var b;return b=this._read(),b.push(a),this._write(b)},e.prototype._indexOf=function(a){var b,c,d;d=this._read();for(b in d)if(c=d[b],c.id===a)return b;return-1},e.prototype._remove=function(a){var b,c;return b=this._indexOf(a),0>b?1:(c=this._read(),c.splice(b,1),this._write(c))},e.prototype._httpGet=function(){return function(a){return function(){var d,e;return e=a._urls.remote(),d=b.defer(),console.log("|- trying "+e+" ..."),c.get(e).then(function(b){return console.log("| |- found at "+e),void 0!==b.data?(a._write(b.data),d.resolve(data)):d.reject("no data")},function(a){return console.log("| |- not found at "+e),d.reject(a)}),d.promise}}(this)},e.prototype.getAll=function(){return this._read()},e.prototype.add=function(a,b){return this._add(a,b)},e}(),console.log("CALL TO FACTORY: Connections"),new e}])}.call(this),function(){angular.module("AppOne").config(["$routeProvider",function(a){return a.when("/",{templateUrl:"/assets/templates/home.html",controller:"HomeCtrl"}).when("/info",{templateUrl:"/assets/templates/info.html",controller:"InfoCtrl"}).when("/tasksList",{templateUrl:"/assets/templates/tasksList.html",controller:"TaskListCtrl"}).when("/task/:taskId",{templateUrl:"/assets/templates/task.html",controller:"TaskCtrl"}).when("/history",{templateUrl:"/assets/templates/history.html",controller:"HistoryCtrl"}).when("/history/:containedItem",{templateUrl:"/assets/templates/history.html",controller:"HistoryCtrl"}).when("/historyItem/:itemId",{templateUrl:"/assets/templates/historyItem.html",controller:"HistoryItemCtrl"}).when("/historyItem/:itemId/:backButton",{templateUrl:"/assets/templates/historyItem.html",controller:"HistoryItemCtrl"}).when("/tasksMarketplace",{templateUrl:"/assets/templates/tasksMarketplace.html",controller:"TasksMarketplaceCtrl"}).when("/settings",{templateUrl:"/assets/templates/settings.html",controller:"SettingsCtrl"}).when("/connect",{templateUrl:"/assets/templates/connect.html",controller:"ConnectCtrl"}).when("/myIdentity",{templateUrl:"/assets/templates/myIdentity.html",controller:"MyIdentityCtrl"}).when("/teachers",{templateUrl:"/assets/templates/teachers.html",controller:"TeachersCtrl"}).when("/addTeacher",{templateUrl:"/assets/templates/addTeacher.html",controller:"AddTeacherCtrl"}).when("/test",{templateUrl:"/assets/templates/test.html",controller:"TestCtrl"}).when("/sampleQuestion",{templateUrl:"/assets/templates/sampleQuestion.html",controller:"SampleQuestionCtrl"}).otherwise({redirectTo:"/"})}]).run(["$route","$location","ActivityDriver",function(a,b){return a.reload(),document.addEventListener("backbutton",function(){return function(){var c;return c=b.path(),"undefined"==typeof c||"/task/"!==c.substr(0,6)?"undefined"!=typeof c&&"/taskSummary"===c.substr(0,12)?void b.path("/history"):(b.path("/"),a.reload()):void 0}}(this),!1),document.addEventListener("menubutton",function(){return function(){var c;return c=b.path(),console.log("menu button, current: "+c),"undefined"!=typeof c&&"/task/"===c.substr(0,6)||"undefined"!=typeof c&&"/settings"===c.substr(0,9)?void 0:(b.path("/settings"),a.reload())}}(this),!1)}]).config(["$compileProvider","$httpProvider",function(a,b){return a.aHrefSanitizationWhitelist(/^\s*(https?|cdvfile|ftp|mailto|file|tel):/),b.defaults.useXDomain=!0}])}.call(this),function(){angular.module("Krista",["BaseLib","ModuleDataPack","ModuleDataUtilities"]).factory("KristaQuestions",["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12","M13","M14","M15","M16","M17","M18","M19","M20","M21","M22","M23","M24","M25","M26","M27","M28","M29","M30",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D){var E,F;return E=function(){function E(){this.questions=[a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D]}return E.prototype.generate=function(a){var b;return b=this.questions[a-1],void 0===b||void 0===b.generate?[["question has not been implemented"],""]:b.generate()},E}(),F=new E,document.numeric.modules.KristaQuestions=F,F}])}.call(this),function(){angular.module("Krista").factory("M01",["RandomFunctions",function(a){var b;return new(b=function(){function b(){}return b.prototype.r=a,b.prototype.generate=function(){var a,b;return a=this.r.random(21,50),b=this.r.random(3,40),[[""+a+" + "+b+" = ?"],a+b]},b}())}])}.call(this),function(){angular.module("Krista").factory("M02",["RandomFunctions","HyperTextManager",function(a,b){var c;return new(c=function(){function c(){}return c.prototype.r=a,c.prototype.h=b,c.prototype.increaseRandomly=function(a,b){var c,d;return d=this.r.randomFromList([0,1,2,3]),0===d?(c=this.r.random(1,2),b>a?[a+c,b+c]:[a+c,b]):1===d?[a+this.r.random(1,2),b]:2===d?b>2?[a,Math.max(2,b-this.r.random(1,2))]:[a+1,b+1]:(c=Math.ceil((b+1)/a),b>=c+2?[a-1,b-c]:[a+1,b+1])},c.prototype.generate=function(){var a,b,c,d,e,f,g,h,i,j,k;for(g=this.r.random(1,6),h=g>3?g+this.r.random(5,9):g+this.r.random(1,6),c=[g,h],e=[],d=i=1;4>=i;d=++i)j=this.increaseRandomly(g,h),g=j[0],h=j[1],e.push([g,h]);return k=this.r.shuffleAnswers4(e,c),b=k[0],f=k[1],b=function(){var c,d,e;for(e=[],c=0,d=b.length;d>c;c++)a=b[c],e.push(this.h.fraction(a[0],a[1]));return e}.call(this),[["What is the smallest fraction?",b],f]},c}())}])}.call(this),function(){angular.module("Krista").factory("M03",["RandomFunctions",function(a){var b;return new(b=function(){function b(){}return b.prototype.r=a,b.prototype.generate=function(){var a,b;return a=this.r.random(21,50),b=this.r.random(3,40),[[""+a+" + "+b+" = ?"],a+b]},b}())}])}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};angular.module("Krista").factory("M04",["DataPack","RandomFunctions","TextFunctions",function(b,c,d){var e;return new(e=function(){function e(){this.generate=a(this.generate,this),this.generateDataForQuestionType04=a(this.generateDataForQuestionType04,this)}return e.prototype.d=b,e.prototype.r=c,e.prototype.t=d,e.prototype.generateDataForQuestionType04=function(){var a,b,c,d,e,f,g,h;return h=this.r.randomFromList(["person","bird","zoo","forest","animal","barn","thing","thing"]),b=this.r.randomFromList(this.d.data.item[h]),c=this.r.randomFromList(this.d.data.location[h]),e=this.r.randomPairFromList([1,2,3,4,5,6,7]),f=e[0],g=e[1],f%2===0&&g%2===0&&(f/=2,g/=2),f%3===0&&g%3===0&&(f/=3,g/=3),d=this.r.random(2,6),a={location:c,elements:b,ratio:[f,g],numbers:[f*d,g*d]}},e.prototype.generate=function(){var a,b;return b=this.generateDataForQuestionType04(),a={},a.ratio=function(){return b.ratio.join(":")},a.ratioFor=function(a){return b.ratio[a]},a.number=function(a){return b.numbers[a]},a.numberTotal=function(){var a,c,d,e,f;for(c=0,f=b.numbers,d=0,e=f.length;e>d;d++)a=f[d],c+=a;return c},a.element=function(a){return b.elements[0][a][0]},a.elements=function(a){return b.elements[0][a][1]},a.item=function(){return b.elements.length>1&&b.elements[1]?b.elements[1][0]:b.elements[0][0][0]+" or "+b.elements[0][1][0]},a.items=function(){return b.elements.length>1&&b.elements[1]?b.elements[1][1]:b.elements[0][0][1]+" and "+b.elements[0][1][1]+" together"},a.inSet=function(a,c){var d;return d="",a&&b.location[2]&&(d+=b.location[2]+" "),b.location[1]&&(d+=b.location[1]+" "),c&&b.location[0].length>1&&(d+=b.location[0][1]+" "),d+b.location[0][0]},a.forEvery=function(b){var c;return c=1===a.ratioFor(b)?"one "+a.element(b):a.ratioFor(b)+" "+a.elements(b)},a.forEveryThere=function(b){var c;return c=1===a.ratioFor(b)?"there is one "+a.element(b):"there are "+a.ratioFor(b)+" "+a.elements(b)},a.thereAre=function(b){var c;return c="there ",c+=1===a.number(b)?"is one "+a.element(b):"are "+a.number(b)+" "+a.elements(b)},a.thereAreTotal=function(){var b,c;return c=a.numberTotal(),b="there ",b+=1===c?"is 1 "+a.item():"are "+c+" "+a.items()},a.ratioIsSingleVariant=function(b){return void 0===b||""===b?"the ratio of "+a.elements(0)+" to "+a.elements(1)+" is "+a.ratio():"the ratio of "+a.elements(0)+" to "+a.elements(1)+" "+b+" is "+a.ratio()},a.ratioIs=function(b){return function(c){return b.r.random(0,2)>0?void 0===c||""===c?"the ratio of "+a.elements(0)+" to "+a.elements(1)+" is "+a.ratio():"the ratio of "+a.elements(0)+" to "+a.elements(1)+" "+c+" is "+a.ratio():void 0===c||""===c?"for every "+a.forEvery(0)+" "+a.forEveryThere(1):"for every "+a.forEvery(0)+" "+c+" "+a.forEveryThere(1)}}(this),a.howMany=function(b){return"how many "+a.elements(b)+" are there"},a.howManyTotal=function(){return"how many "+a.items()+" are there"},a.ratioIsInSet=function(b,c){return a.ratioIs(a.inSet(b,c))},a.thereAreInSet=function(b,c,d){return a.thereAre(b)+" "+a.inSet(c,d)},a.thereAreTotalInSet=function(b,c){return a.thereAreTotal()+" "+a.inSet(b,c)},a.howManyInSet=function(b,c,d){return a.howMany(b)+" "+a.inSet(c,d)},a.howManyTotalInSet=function(b,c){return a.howManyTotal()+" "+a.inSet(b,c)},a.generateQuestion=function(b){return function(){var c,d,e,f,g,h,i,j;return j=b.r.randomFromList([!1,!0]),e=b.r.randomPairFromList([0,1,2]),2!==e[0]?j?(g=a.thereAreInSet(e[0],!0,!0),f=b.r.random(0,2)>0?a.ratioIs():a.ratioIsInSet()):(f=a.ratioIsInSet(!0,!0),g=b.r.random(0,2)>0?a.thereAre(e[0]):a.thereAreInSet(e[0],!1,!1)):j?(g=a.thereAreTotalInSet(!0,!0),f=b.r.random(0,2)>0?a.ratioIs():a.ratioIsInSet()):(f=a.ratioIsInSet(!0,!0),g=b.r.random(0,2)>0?a.thereAreTotal():a.thereAreTotalInSet(!1,!1)),2===e[1]?(c=a.numberTotal(),h=b.r.random(0,2)>0?a.howManyTotal():a.howManyTotalInSet(!1,!1)):(c=a.number(e[1]),h=b.r.random(0,2)>0?a.howMany(e[1]):a.howManyInSet(e[1],!1,!1)),d=b.t.combine3,i=j?d(g,f,h):d(f,g,h),[[i],c]}}(this),a.generateQuestion()},e}())}])}.call(this),function(){angular.module("Krista").factory("M05",["RandomFunctions",function(a){var b;return new(b=function(){function b(){}return b.prototype.r=a,b.prototype.generate=function(){var a,b,c,d,e,f,g,h,i,j,k;for(j=this.r.random(1,90),h=0,d=[],c=k=1;5>=k;c=++k)h+=this.r.randomFromList([.01,.02,.03,.04,.05,.06]),d.push(h);return g=function(){var a,b,c;for(c=[],a=0,b=d.length;b>a;a++)e=d[a],c.push((j+e*this.r.randomFromList([-1,1])).toFixed(2));return c}.call(this),b=g.splice(0,1),this.r.shuffleListInPlace(g),f=this.r.random(0,5),i=g.splice(f,10),a=g.concat(b).concat(i),[["Which of the following is closest in value to "+j+"?",a],f]},b}())}])}.call(this),function(){angular.module("Krista").factory("M06",["RandomFunctions","DataUtilities","GraphicsManager","HyperTextManager",function(a,b,c,d){var e;return new(e=function(){function e(){}return e.prototype.u=b,e.prototype.r=a,e.prototype.h=d,e.prototype.generate=function(){var a,b,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G;for(y="the scores that 5 students earned on a quiz",G="scores",D=[50,92],r=D[0],q=D[1],d=[],k=z=1;5>=z;k=++z)d.push(this.r.random(r,q+1));for(t=function(){var a,b,c,d;for(c=this.u.randomNames(5,function(a){return a.length<9}),d=[],a=0,b=c.length;b>a;a++)s=c[a],d.push(s[0]);return d}.call(this),u=this.r.randomNonRepeating([0,1,2,3,4],2),i=(d[u[0]]+d[u[1]])/2,n=[i+this.r.randomFromList([-2.5,2.5,-5,5]),i+this.r.randomFromList([-7.5,7.5,-10,10,-10.5,10.5]),i+this.r.randomFromList([-15.5,15.5,-15,15,-20.5,20.5,-20,20]),i+this.r.randomFromList([-25.5,25.5,-25,25,-30.5,30.5,-30,30])],E=this.r.shuffleAnswers4(n,i),b=E[0],o=E[1],p=100,g=250,h=250,F=[h/5,g/10],w=F[0],x=F[1],a=g/p,j="L",v=3,e="G",f=10,l=c.newImageWhiteWithOffset(h,g,35,5,5,15),k=A=0;10>=A;k=++A)l.drawLine(-v,k*x,h,k*x,j);for(k=B=0;5>=B;k=++B)l.placeCharSequenceCentered(-13,2*k*x,""+20*k),l.drawLine(k*w,-v,k*w,g,j);for(k=C=0;4>=C;k=++C)l.fillRectangleCoords(k*w+f,0,(k+1)*w-f,a*d[k],e),l.placeCharSequence((k+.5)*w-6,a*d[k]+4,""+d[k]),l.placeCharSequenceCentered((k+.5)*w,-6,""+t[k].toUpperCase());return m=l.getBase64(),[["The graph shows "+y+". What is the average of "+t[u[0]]+" and "+t[u[1]]+"'s "+G+"?"+this.h.graphic(m),b],o]},e}())}])}.call(this),function(){angular.module("Krista").factory("M07",["RandomFunctions",function(a){var b;return new(b=function(){function b(){}return b.prototype.r=a,b.prototype.generate=function(){var a,b,c,d;return b=this.r.random(2,10),c=this.r.random(2,10),d=this.r.random(2,10),a=this.r.randomVariableLetter(),[["If "+d*b+" ÷ "+a+" = "+b+", then "+c+" x "+a+" = ?"],c*d]},b}())}])}.call(this),function(){angular.module("Krista").factory("M08",["RandomFunctions","HyperTextManager",function(a,b){var c;return new(c=function(){function c(){}return c.prototype.u=a,c.prototype.h=b,c.prototype.generate=function(){var a,b,c,d,e,f,g,h;return a=this.u.random(2,9),d=this.u.randomNonRepeating([11,13,17,19,23,29,31],4),d.sort(),g=d.concat(),f=[[d[3],d[2],d[1],d[0]],[d[3],d[1],d[2],d[0]],[d[0],d[2],d[1],d[3]],[d[2],d[1],d[0],d[3]]],h=this.u.shuffleAnswers4(f,g),c=h[0],e=h[1],c=function(){var d,e,f;for(f=[],d=0,e=c.length;e>d;d++)b=c[d],f.push(this.h.fraction(a,b[0])+", "+this.h.fraction(a,b[1])+", "+this.h.fraction(a,b[2])+", "+this.h.fraction(a,b[3]));return f}.call(this),[["Which of the below fractions are ordered from largest to smallest?",c],e]},c}())}])}.call(this),function(){angular.module("Krista").factory("M09",["RandomFunctions","GraphicsManager","HyperTextManager",function(a,b,c){var d;return new(d=function(){function d(){}return d.prototype.u=a,d.prototype.h=c,d.prototype.generate=function(){var a,c,d,e,f,g,h;return c=this.u.random(3,9),e=this.u.random(4,10),c%2===1&&e%2===1&&(c+=1),f=110,a=f/e,d=c*a,g=b.newImageWhiteWithOffset(d,f,20),g.drawTriangle(0,0,0,f,d,0,"B"),g.drawRectangle(0,0,10,10,"B"),g.placeCharSequence(Math.floor(d/2)-4,-11,""+c),g.placeCharSequence(-10,Math.floor(f/2),""+e),h=g.getBase64(),[["If the area of a triangle is ½ × base × vertical height, what is the area of the triangle?"+this.h.graphic(h)],Math.round(c*e/2)]},d}())}])}.call(this),function(){angular.module("Krista").factory("M10",["RandomFunctions","HyperTextManager",function(a,b){var c;return new(c=function(){function c(){}return c.prototype.u=a,c.prototype.h=b,c.prototype.generate=function(){var a,b,c,d;return c=this.u.randomNonRepeating([1,2,3,4,5,6,7,8,9],5),d=this.u.random(0,5),b=c[d],a=[this.h.fraction(b,10),this.h.fraction(b,100),this.h.fraction(b,"1,000"),this.h.fraction(b,"10,000"),this.h.fraction(b,"100,000")],[["In the decimal 0."+c.join("")+", the digit "+b+" is equal to which of the following?",a],d]},c}())}])}.call(this),function(){angular.module("Krista").factory("M11",["RandomFunctions",function(a){var b;return new(b=function(){function b(){}return b.prototype.u=a,b.prototype.generate=function(){var a,b;return a=this.u.random(21,50),b=this.u.random(11,40),[[""+(a+b)+" - "+a+" = ?"],b]},b}())}])}.call(this),function(){angular.module("Krista").factory("M12",["RandomFunctions","GraphicsManager","HyperTextManager",function(a,b,c){var d;return new(d=function(){function d(){}return d.prototype.u=a,d.prototype.h=c,d.prototype.generate=function(){var a,c,d,e,f,g,h;return c=this.u.random(3,9),e=this.u.random(4,10),f=110,a=f/e,d=c*a,g=b.newImageWhiteWithOffset(d,f,20),g.drawRectangle(0,0,d,f,"B"),g.placeCharSequence(Math.floor(d/2)-4,-11,""+c),g.placeCharSequence(-10,Math.floor(f/2),"?"),h=g.getBase64(),[["The area of the rectangle shown is "+c*e+" centimeters squared. The length of one of the sides is "+c+" centimeters. What is the length of the other side?"+this.h.graphic(h)],e]},d}())}])}.call(this),function(){angular.module("Krista").factory("M13",["RandomFunctions",function(a){var b;return new(b=function(){function b(){}return b.prototype.u=a,b.prototype.generate=function(){var a;return a=this.u.random(3,8),a=(a/2).toFixed(1),[[""+a+" m = _ cm?"],100*a]},b}())}])}.call(this),function(){angular.module("Krista").factory("M14",["RandomFunctions","DataUtilities",function(a,b){var c;return new(c=function(){function c(){}return c.prototype.u=b,c.prototype.r=a,c.prototype.generate=function(){var a,b,c,d,e,f,g,h;for(g=this.r.random(11,30),a=this.r.random(3,Math.floor(g/2)),d=this.r.random(3,Math.floor(g/2));a===d;)d=this.r.random(2,Math.floor(g/2));return this.r.randomAB()?(b=g-a,c="more"):(b=g+a,c="less"),this.r.randomAB()?(e=g-d,f="less"):(e=g+d,f="more"),h=this.u.randomNames(2),[[""+h[0][0]+" has $"+a+" dollars "+c+" than $"+b+". How much money does "+h[1][0]+" have if "+h[1][1]+" has $"+d+" "+f+" than "+h[0][0]],e]},c}())}])}.call(this),function(){angular.module("Krista").factory("M15",["DataPack","RandomFunctions","HyperTextManager","TextFunctions",function(a,b,c,d){var e;return new(e=function(){function e(){}return e.prototype.u=b,e.prototype.d=a,e.prototype.h=c,e.prototype.t=d,e.prototype.generate=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;return g=this.u.randomFromList(this.d.data.itemsWithPrices),o=g[0][0],n=g[0][1],l=g[0][2],k=g[0][3],b=function(a){return g[0][4][0]+a+" "+g[0][4][1]},j=this.u.randomNonRepeating(function(){q=[];for(var a=0,b=g[1].length-1;b>=0?b>=a:a>=b;b>=0?a++:a--)q.push(a);return q}.apply(this),4),i=function(){var a,b,c;for(c=[],a=0,b=j.length;b>a;a++)d=j[a],c.push(g[1][d]);return c}(),c=i.reduce(function(a,b){return[1,a[1]+b[1]]})[1]/4,e=[c+this.u.randomFromList([-1.5,-1.25,1.25,1.5]),c+this.u.randomFromList([-3,-2,2,3]),c+this.u.randomFromList([-4.5,-4,4,4.5]),c+this.u.randomFromList([-10,-9,-8,-7,-6,-5,5,6,7,8,9,10])],p=this.u.shuffleAnswers4(e,c),a=p[0],f=p[1],m=this.h.tableWrapped(function(){var a,c,d;for(d=[],a=0,c=i.length;c>a;a++)h=i[a],d.push([h[0],b(h[1])]);return d}(),[this.t.capitalize(n),this.t.capitalize(k)]),[["The table below shows the "+l+" for 4 "+o+". What is the average "+k+"? <br>"+m,a],f]},e}())}])}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};angular.module("Krista").factory("M16",["DataPack","DataUtilities","RandomFunctions",function(b,c,d){var e;return new(e=function(){function e(){this.randomBuyableItem=a(this.randomBuyableItem,this)}return e.prototype.r=d,e.prototype.u=c,e.prototype.d=b,e.prototype.randomBuyableItem=function(){return this.randomFromList(b.data.buyable)},e.prototype.generate=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n;return g=this.r.randomNonRepeating([2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],5),f=g.splice(this.r.random(0,5),1)[0],m=function(a){var b,c,d;return d=Math.floor(a/4),a-=4*d,b=Math.floor(a/2),c=a-2*b,[d,b,c]},k=function(a){var b,c,d,e;return e=m(a),d=e[0],b=e[1],c=e[2],.25*d+.1*b+.05*c},l=function(a){var b,c,d,e,f;return f=m(a),d=f[0],b=f[1],c=f[2],e=[],1===d?e.push("1 quarter"):d>1&&e.push(""+d+" quarters"),1===b?e.push("1 dime"):b>1&&e.push(""+b+" dimes"),1===c?e.push("1 nickel"):c>1&&e.push(""+c+" nickels"),a="",0===e.length?a="":1===e.length?a=e[0]:2===e.length?a=e[0]+" and "+e[1]:(e[e.length-1]="and "+e[e.length-1],a=e.join(", ")),a},n=this.r.shuffleAnswers4(g,f),d=n[0],h=n[1],d=function(){var a,b,e;for(e=[],a=0,b=d.length;b>a;a++)c=d[a],e.push(l(c));return e}(),j=this.u.randomName(),e=this.r.randomFromList(this.d.data.buyable),a=this.r.random(200,800),a=5*Math.round(a/5)/100,b=a+k(f),a=a.toFixed(2),b=b.toFixed(2),i=this.r.randomFromList(["mother","father","friend","classmate"]),[[""+j[0]+" wants to buy "+e+" that costs $"+b+". However, "+j[1]+" has only $"+a+". What coins could "+j[0]+"'s "+i+" give "+j[2]+" so that "+j[1]+" would have exactly $"+b+"?",d],h]},e}())}])}.call(this),function(){angular.module("Krista").factory("M17",["RandomFunctions",function(a){var b;return new(b=function(){function b(){}return b.prototype.u=a,b.prototype.generate=function(){var a,b,c,d,e,f;return e=this.u.randomFromList([2,3,5,7,11,13,17,19,23,29,31]),d=this.u.randomNonRepeating([4,6,8,9,10,12,14,15,16,18,20,21,22,24,25,26,27,28,30,32,33,34,35,36,38,39,40,42,44,45,46,48,49,50],4),f=this.u.shuffleAnswers4(d,e),b=f[0],c=f[1],b=function(){var c,d,e;for(e=[],c=0,d=b.length;d>c;c++)a=b[c],e.push(""+a);return e}(),[["Which of the numbers below is a prime number?",b],c]},b}())}])}.call(this),function(){angular.module("Krista").factory("M18",["RandomFunctions",function(a){var b;return new(b=function(){function b(){}return b.prototype.u=a,b.prototype.generate=function(){var a,b;return a=this.u.random(111,450),b=this.u.random(111,450),[["What is the value of the expression "+a+" + "+b+"?"],a+b]},b}())}])}.call(this),function(){angular.module("Krista").factory("M19",["RandomFunctions",function(a){var b;return new(b=function(){function b(){}return b.prototype.u=a,b.prototype.generate=function(){var a;
return a=this.u.random(3,8),a=(a/2).toFixed(1),[[""+a+" ft. = _ inches?"],12*a]},b}())}])}.call(this),function(){angular.module("Krista").factory("M20",["RandomFunctions","GraphicsManager","HyperTextManager",function(a,b,c){var d;return new(d=function(){function d(){}return d.prototype.u=a,d.prototype.h=c,d.prototype.generate=function(){var a,c,d,e,f,g,h;return c=this.u.random(3,9),e=this.u.random(4,10),c%2===1&&e%2===1&&(c+=1),f=110,a=f/e,d=c*a,g=b.newImageWhiteWithOffset(d+f,f,20),g.drawTriangle(f,0,f,f,f+d,0,"B"),g.drawRectangle(0,0,f,f,"B"),g.placeCharSequence(Math.floor(f/2)-4,-11,""+e),g.placeCharSequence(f-10,Math.floor(f/2),""+e),g.placeCharSequence(f+Math.floor(d/2)-4,-11,""+c),h=g.getBase64(),[["If the area of a triangle is ½ × base × vertical height, what is the combined area of the square and triangle below?"+this.h.graphic(h)],e*e+Math.round(c*e/2)]},d}())}])}.call(this),function(){angular.module("Krista").factory("M21",["RandomFunctions",function(a){var b;return new(b=function(){function b(){}return b.prototype.u=a,b.prototype.generate=function(){var a,b,c,d;return c=this.u.random(2,10),d=this.u.randomPairFromList([2,3,4,5,6,7,8,9,10,11]),a=d[0],b=d[1],[[""+a+" is to "+a*c+" as "+b+" is to _ ?"],b*c]},b}())}])}.call(this),function(){angular.module("Krista").factory("M22",["RandomFunctions","TextFunctions",function(a,b){var c;return new(c=function(){function c(){}return c.prototype.u=a,c.prototype.t=b,c.prototype.generate=function(){var a,b,c,d,e,f,g,h,i,j,k,l;return a=this.u.random(1,9),c=0,d=this.u.random(1,9),e=this.u.random(1,9),j=this.u.randomAB(),j&&(k=[d,c],c=k[0],d=k[1]),h=""+a+","+c+d+e,i=""+this.t.digitToWord(a)+" thousand",j?(i+=" "+this.t.digitToWord(c)+" hundred and "+this.t.digitToWord(e),g=[""+a+","+c+e+"0",""+a+","+c+c+e,""+a+"0,0"+c+e,""+a+"0,"+c+"0"+e]):(i+=" "+this.t.twoDigitToWords(d,e),g=[""+a+","+d+"0"+e,""+a+","+d+d+e,""+a+"0,0"+d+e,""+a+"0,"+d+"0"+e]),l=this.u.shuffleAnswers4(g,h),b=l[0],f=l[1],[["Which is "+i+"?",b],f]},c}())}])}.call(this),function(){angular.module("Krista").factory("M23",["RandomFunctions","HyperTextManager","MathFunctions",function(a,b,c){var d;return new(d=function(){function d(){}return d.prototype.u=a,d.prototype.h=b,d.prototype.m=c,d.prototype.generate=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;for(l=this.u.randomPairFromList([1,2,3,5]),c=l[0],f=l[1],c>f&&(m=[f,c],c=m[0],f=m[1]),j=this.u.random(c+1,3*c+1),k=this.u.random(f+1,3*f+1);k/f===j/c||k>9;)k=this.u.random(f+1,3*f+1);return n=this.m.reduce(c,j),c=n[0],j=n[1],o=this.m.reduce(f,k),f=o[0],k=o[1],a=c*k+f*j,b=j*k,g=this.m.reduce(a,b),h=[],h.push(this.m.reduce(c+f,j+k)),h.push(this.m.reduce(c+f,j*k)),h.push(this.m.reduce(c+k,j*k)),h.push(this.m.reduce(c*k+f*j,j+k)),p=this.u.shuffleAnswers4(h,g),e=p[0],i=p[1],e=function(){var a,b,c;for(c=[],a=0,b=e.length;b>a;a++)d=e[a],c.push(""+this.h.fraction(d[0],d[1]));return c}.call(this),[["What is "+this.h.fraction(c,j)+" + "+this.h.fraction(f,k)+"?",e],i]},d}())}])}.call(this),function(){angular.module("Krista").factory("M24",["RandomFunctions",function(a){var b;return new(b=function(){function b(){}return b.prototype.u=a,b.prototype.generate=function(){var a,b,c,d;return b=this.u.random(2,10),c=this.u.random(2,10),d=this.u.random(2,10),a=this.u.randomVariableLetter(),[["If "+d*b+" ÷ "+a+" = "+b+", then "+c+" x "+a+" = ?"],c*d]},b}())}])}.call(this),function(){angular.module("Krista").factory("M25",["RandomFunctions","GraphicsManager","HyperTextManager",function(a,b,c){var d;return new(d=function(){function d(){}return d.prototype.u=a,d.prototype.h=c,d.prototype.generate=function(){var a,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;return g=this.u.random(4,12),e=Math.ceil(g/2),f=Math.floor(3*g/2),k=this.u.random(e+1,f),c=g/2,i=k/2,d=100,a=d/c,j=i*a,l=Math.sqrt(j*j-d*d/4),o=b.newImageWhiteWithOffset(d+l,d,20),n="D",o.drawLine(0,0,0,d,n),o.drawLine(0,d,d,d,n),o.drawLine(d,d,d+l,d/2,n),o.drawLine(d+l,d/2,d,0,n),o.drawLine(d,0,0,0,n),o.placeCharSequence(Math.floor(d/2)-4,-11,""+c),o.placeCharSequence(-19,Math.floor(d/2),""+c),o.placeCharSequence(Math.floor(d/2)-4,d+4,""+c),o.placeCharSequence(Math.floor(d+l/2),3*d/4+7,""+i),o.placeCharSequence(Math.floor(d+l/2),d/4-11,""+i),p=o.getBase64(),m=3*c+2*i,q=[m+c,m-c,m-2*i,m+this.u.random(1,3)],s=this.u.shuffleAnswers4(q,m),h=s[0],r=s[1],[["What is the perimeter of the shape shown below?"+this.h.graphic(p),h],r]},d}())}])}.call(this),function(){angular.module("Krista").factory("M26",["RandomFunctions","HyperTextManager","MathFunctions",function(a,b,c){var d;return new(d=function(){function d(){}return d.prototype.u=a,d.prototype.h=b,d.prototype.m=c,d.prototype.generate=function(){var a,b,c,d,e,f,g,h,i,j,k;return i=this.u.random(3,8),a=this.u.random(1,6),d=a+this.u.random(2,5),j=this.m.reduce(a,d),a=j[0],d=j[1],f=[i,a,d],g=[],e=!1,this.u.randomAB()?(g.push([i-this.u.random(1,3),a,2*d]),e=!0):g.push(this.u.randomAB()?[i-this.u.random(1,3),a+1,d]:[i,a,d]),g.push(this.u.randomAB()?[i+this.u.random(1,3),Math.max(1,a-1),d]:[i-this.u.random(1,3),Math.max(1,a-1),d]),g.push(this.u.randomAB()?a>1?[i+this.u.random(1,3),a+1,2*d]:[i+this.u.random(1,3),a,2*d]:[i,a+this.u.random(1,3),2*d]),g.push(this.u.randomAB()>0||e?[i,a,2*d]:[i-this.u.random(1,3),a,2*d]),k=this.u.shuffleAnswers4(g,f),c=k[0],h=k[1],c=function(){var a,d,e;for(e=[],a=0,d=c.length;d>a;a++)b=c[a],e.push([b[0]].concat(this.m.reduce(b[1],b[2])));return e}.call(this),c=function(){var a,d,e;for(e=[],a=0,d=c.length;d>a;a++)b=c[a],e.push(""+b[0]+this.h.fraction(b[1],b[2]));return e}.call(this),[["What is "+this.h.fraction(i*d+a,d)+" expressed as a mixed number?",c],h]},d}())}])}.call(this),function(){angular.module("Krista").factory("M27",["RandomFunctions","HyperTextManager",function(a,b){var c;return new(c=function(){function c(){}return c.prototype.u=a,c.prototype.h=b,c.prototype.generate=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o;n="pies",h="friends",m="person",l=this.u.random(17,50),g=this.u.random(5,8),d=this.u.random(1,4),e=this.u.random(2,5),f=this.u.random(3,6),c=[[g-1,l],[g+1,l],[l-d,g-1],[l-d,g+f],[l+e,g-1]],this.u.shuffleListInPlace(c),o=100,j=-1;for(i in c)a=c[i],k=Math.abs(a[0]/a[1]-l/g),o>k&&(o=k,j=i);return c=function(){var a,d,e;for(e=[],a=0,d=c.length;d>a;a++)b=c[a],e.push(""+this.h.fraction(b[0],b[1]));return e}.call(this),[[""+l+" "+n+" will be divided evenly among "+g+" "+h+". Of the below, which expression gives the best estimate of the total number of "+n+" each "+m+" will receive?",c],j]},c}())}])}.call(this),function(){angular.module("Krista").factory("M28",["RandomFunctions","GraphicsManager","HyperTextManager",function(a,b,c){var d;return new(d=function(){function d(){}return d.prototype.u=a,d.prototype.h=c,d.prototype.generate=function(){var a,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D;for(k=this.u.random(3,6),o=k/2,a=this.u.random(-7,-1),l=2*this.u.random(2,3),e=l*o,m=2*this.u.random(2,4),f=m*o,c=a+e,d=c+f,p=60,y=250,x=y/(l+m+2),r=b.newImageWhiteWithOffset(y,p,20),n="D",g=2*p/3,h=p/3,r.drawLine(0,g,y,g,n),r.drawLine(0,g,5,g-3,n),r.drawLine(0,g,5,g+3,n),r.drawLine(y,g,y-5,g-3,n),r.drawLine(y,g,y-5,g+3,n),w=A=0,C=l+m;C>=0?C>=A:A>=C;w=C>=0?++A:--A)z=(w+1)*x,r.drawLine(z,g-5,z,g+5,n);for(r.drawLine(x,h,x,g-8),r.drawLine(x,g-8,x-2,g-8-4),r.drawLine(x,g-8,x+2,g-8-4),r.placeCharSequence(x-8,h-12,""+a,n),z=x*(l+1),r.drawLine(z,h,z,g-8),r.drawLine(z,g-8,z-2,g-8-4),r.drawLine(z,g-8,z+2,g-8-4),r.placeCharSequence(z-2,h-12,"?",n),z=x*(l+m+1),r.drawLine(z,h,z,g-8),r.drawLine(z,g-8,z-2,g-8-4),r.drawLine(z,g-8,z+2,g-8-4),r.placeCharSequence(z-2,h-12,""+d,n),s=r.getBase64(),j=c,v=this.u.random(-4,1),t=[],q=B=0;4>=B;q=++B)v+q!==0&&t.push(c+v+q);return D=this.u.shuffleAnswers4(t,j),i=D[0],u=D[1],[["Use the number line below to answer the question. The hash marks are evenly spaced. What number is the vertical arrow with question mark pointing to on the number line?"+this.h.graphic(s),i],u]},d}())}])}.call(this),function(){angular.module("Krista").factory("M29",["RandomFunctions","HyperTextManager","MathFunctions",function(a,b,c){var d;return new(d=function(){function d(){}return d.prototype.u=a,d.prototype.h=b,d.prototype.m=c,d.prototype.generate=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;for(l=this.u.randomPairFromList([1,2,3,5]),c=l[0],f=l[1],c>f&&(m=[f,c],c=m[0],f=m[1]),j=this.u.random(c+1,3*c+1),k=this.u.random(f+1,3*f+1);k/f===j/c||k>9;)k=this.u.random(f+1,3*f+1);return n=this.m.reduce(c,j),c=n[0],j=n[1],o=this.m.reduce(f,k),f=o[0],k=o[1],a=c*f,b=j*k,g=this.m.reduce(a,b),h=[],h.push(this.m.reduce(c+f,j*k)),h.push(this.m.reduce(c*f,j*f)),h.push(this.m.reduce(c+f,j+k)),h.push(this.m.reduce(1,j+k)),p=this.u.shuffleAnswers4(h,g),e=p[0],i=p[1],e=function(){var a,b,c;for(c=[],a=0,b=e.length;b>a;a++)d=e[a],c.push(""+this.h.fraction(d[0],d[1]));return c}.call(this),[["What is "+this.h.fraction(c,j)+" x "+this.h.fraction(f,k)+"?",e],i]},d}())}])}.call(this),function(){angular.module("Krista").factory("M30",["RandomFunctions",function(a){var b;return new(b=function(){function b(){}return b.prototype.u=a,b.prototype.generate=function(){var a,b,c,d,e,f,g,h,i;return b=this.u.randomFromList([-3,-2,-1,1,2,3]),d=function(a){return Math.round(Math.pow(2,a+1)+b)},c=[d(1),d(2),d(3),d(4),d(5)],g=c.slice(0,4),h=c[4],e=[h-2,g.reduce(function(a,b){return a+b}),h+this.u.randomFromList([-4,4]),h+this.u.randomFromList([-6,6])],i=this.u.shuffleAnswers4(e,h),a=i[0],f=i[1],[["What is the next number in the pattern  "+g.join(", ")+", ...?",a],f]},b}())}])}.call(this),function(){console.log("registering for deviceready"),document.addEventListener("deviceready",function(){var a;return a=document.getElementsByTagName("html"),angular.bootstrap(a,["AppOne"]),console.log("bootstrapped App"),StatusBar.overlaysWebView(!1),StatusBar.backgroundColorByHexString("#ffffff"),StatusBar.styleDefault(),FastClick.attach(document.body),void 0!==window.navigator.notification?window.alert=function(a){return navigator.notification.alert(a,null,"StarPractice","OK")}:void 0},!1)}.call(this);