(function(){angular.module("Krista",[]).factory("KristaQuestions",["M01","M02","M03","M04","M05","M06","M07","M08","M09","M10","M11","M12","M13","M14","M15","M16","M17","M18","M19","M20","M21","M22","M23","M24","M25","M26","M27","M28","M29","M30",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D){var E,F;return E=function(){function t(){this.questions=[a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,j,u,v,w,x,y,z,A,B,C,D]}return t.prototype.generate=function(a){var b;return b=this.questions[a-1],void 0===b||void 0===b.generate?[["question has not been implemented"],""]:b.generate()},t}(),F=new E,document.numeric.modules.Krista=F,F}])}).call(this),function(){angular.module("Krista").factory("KristaData",[function(){var a;return a=function(){function a(){}return a.prototype.data={name:{male:["Jackson","Aiden","Liam","Lucas","Noah","Jayden","Ethan","Jacob","Jack","Logan","Benjamin","Michael","Ryan","Alexander","Elijah","James","William","Oliver","Connor","Matthew","Daniel","Luke","Henry","Gabriel","Joshua","Nicholas","Isaac","Nathan","Andrew","Samuel","Christian","Evan","Charlie","David","Sebastian","Joseph","Anthony","John","Tyler","Zachary","Thomas","Julian","Adam","Isaiah","Alex","Aaron","Parker","Cooper","Miles","Chase","Christopher","Blake","Austin","Jordan","Leo","Jonathan","Adrian","Colin","Hudson","Ian","Xavier","Tristan","Jason","Brody","Nathaniel","Jake","Jeremiah","Elliot"],female:["Sally","Lynn","Sophia","Emma","Olivia","Isabella","Mia","Ava","Lily","Zoe","Emily","Chloe","Layla","Madison","Madelyn","Abigail","Aubrey","Charlotte","Amelia","Ella","Kaylee","Avery","Aaliyah","Hailey","Hannah","Aria","Arianna","Lila","Evelyn","Grace","Ellie","Anna","Kaitlyn","Isabelle","Sophie","Scarlett","Natalie","Leah","Sarah","Nora","Mila","Elizabeth","Lillian","Kylie","Audrey","Lucy","Maya","Annabelle","Gabriella","Elena","Victoria","Claire","Savannah","Maria","Stella","Liliana","Allison","Samantha","Alyssa","Molly","Violet","Julia","Eva","Alice","Alexis","Kayla","Katherine","Lauren","Jasmine","Caroline","Vivian","Juliana"]},item:{person:[[[["boy","boys"],["girl","girls"]],["kid","children"]],[[["boy","boys"],["girl","girls"]],["kid","children"]],[[["adult","adults"],["kid","kids"]],["person","people"]],[[["man","men"],["woman","women"]],["person","people"]]],bird:[[[["red bird","red birds"],["blue bird","blue birds"]],["bird","birds"]],[[["robin","robins"],["sparrow","sparrows"]]]],zoo:[[[["penguin","penguins"],["meerkat","meerkats"]]],[[["zebra","zebras"],["deer","deers"]]]],forest:[[[["wolf","wolves"],["rabbit","rabbits"]]],[[["pine tree","pine trees"],["cedar tree","cedar trees"]],["cedar or pine tree","cedar and pine trees"]],[[["bear","bears"],["squirrel","squirrels"]]]],animal:[[[["red bird","red birds"],["blue bird","blue birds"]],["bird","birds"]],[[["dog","dogs"],["cat","cats"]],["animal","animals"]],[[["mouse","mice"],["cat","cats"]]]],barn:[[[["dog","dogs"],["cat","cats"]],["animal","animals"]],[[["horse","horses"],["cow","cows"]]],[[["pig","pigs"],["cow","cows"]]],[[["duck","ducks"],["chicken","chickens"]]]],thing:[[[["orange candy","orange candies"],["green candy","green candies"]],["candy","candies"]],[[["red ball","red balls"],["green ball","green balls"]],["ball","balls"]],[[["red marble","red marbles"],["blue marble","blue marbles"]],["marble","marbles"]],[[["black pencil","black pencils"],["red pencil","red pencils"]],["pencil","pencils"]],[[["pencil","pencils"],["pen","pens"]]],[[["dime","dimes"],["quarter","quarters"]],["coin","coins"]],[[["apple","apples"],["banana","bananas"]]],[[["fruit","fruits"],["vegetable","vegetables"]]],[[["pea","peas"],["carrot","carrots"]]]]},location:{person:[[[""],""],[[""],""],[["room"],"in the"],[["class","ballet class"],"in the"],[["classroom"],"in the"],[["building"],"in the"],[["lobby"],"in the"],[["hotel"],"in the"],[["park"],"in the"],[["museum"],"in the"],[["train station"],"at the"],[["playground"],"on the"],[["school"],"in the"]],bird:[[[""],""],[[""],""],[["tree","tall"],"on the","sitting"],[["park"],"in the"],[["forest"],"in the"],[["lake"],"by the","sitting"]],zoo:[[[""],""],[[""],""],[["zoo","local"],"at the"]],forest:[[[""],""],[[""],""],[["forest"],"in the"]],animal:[[[""],""],[[""],""],[[""],""],[["city","small"],"in the"]],barn:[[[""],""],[[""],""],[["yard"],"on the"],[["barn"],"in the"]],thing:[[[""],""],[[""],""],[["room"],"in the"],[["box"],"in the"],[["table"],"on the"],[["room"],"in the"]]}},a}(),console.log("KristaData factory"),new a}])}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};angular.module("Krista").factory("KristaUtil",["KristaData",function(b){var c;return c=function(){function c(){this.combine2=a(this.combine2,this),this.combine3=a(this.combine3,this),this.ifBthenwhatC=a(this.ifBthenwhatC,this),this.AwhatCifB=a(this.AwhatCifB,this),this.whatCifAandB=a(this.whatCifAandB,this),this.AandBwhatC=a(this.AandBwhatC,this),this.AifBthenwhatC=a(this.AifBthenwhatC,this),this.randomPairNames=a(this.randomPairNames,this)}return c.prototype.random=function(a,b){return a+Math.random()*(b-a)|0},c.prototype.randomAB=function(){return this.random(0,2)>0},c.prototype.randomFromList=function(a){return a[this.random(0,a.length)]},c.prototype.randomPairFromList=function(a){var b,c,d,e;if(b=a.length,1===b)return[a[0],a[0]];for(e=void 0;void 0===e;)c=this.random(0,b),d=this.random(0,b),c!==d&&(e=[a[c],a[d]]);return e},c.prototype.randomPairNames=function(){var a,c,d,e,f,g;for(f=b.data.name,a=f.male.length,c=f.female.length,g=void 0;void 0===g;)d=this.random(0,a+c),e=this.random(0,a+c),d!==e&&(g=[],g.push(d>=a?[f.female[d-a],"she","her","her"]:[f.male[d],"he","him","his"]),g.push(e>=a?[f.female[e-a],"she","her","her"]:[f.male[e],"he","him","his"]));return g},c.prototype.randomNonRepeating=function(a,b){var c,d,e,f;if(!a||a.length<1)return[];for(b>a.length?b=a.length:1>b&&(b=1),d=a,f=a.length,c=[];b>0;)e=this.random(0,f),c=c.concat(d.splice(e,1)),b-=1,f-=1;return c},c.prototype.randomDigits=function(a){return this.randomNonRepeating([0,1,2,3,4,5,6,7,8,9],a)},c.prototype.randomVariableLetter=function(){return this.randomFromList("abcdefghkmnpqrstuvwyzABCDEFGHKLMNPQRSTUVWYZ")},c.prototype.shuffleListInPlace=function(a){var b,c,d,e,f;for(b=d=e=a.length-1;1>=e?1>=d:d>=1;b=1>=e?++d:--d)c=Math.floor(Math.random()*(b+1)),f=[a[c],a[b]],a[b]=f[0],a[c]=f[1];return a},c.prototype.shuffleAnswers4=function(a,b){var c,d,e;return this.shuffleListInPlace(a),d=this.random(0,5),e=a.splice(d,10),c=a.concat([b]).concat(e),[c,d]},c.prototype.digitToWord=function(a){var b;return b=["zero","one","two","three","four","five","six","seven","eight","nine"],b[a]},c.prototype.numberBelow20ToWord=function(a){var b;return b=["","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],b[a]},c.prototype.tensToWord=function(a){var b;return b=["","ten","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"],b[a]},c.prototype.gcd=function(a,b){var c,d;return 0>a&&(a=-a),0>b&&(b=-b),a>b&&(d=[b,a],a=d[0],b=d[1]),c=b-Math.floor(b/a)*a,0>=c?a:this.gcd(c,a)},c.prototype.reduce=function(a,b){var c;return c=this.gcd(a,b),[a/c,b/c]},c.prototype.toCssFraction=function(a,b){var c;return c='<span class="fraction">',c+='<span class="fraction-top">'+a+"</span>",c+='<span class="fraction-bottom">'+b+"</span>",c+="</span>"},c.prototype.prettify=function(a){var b,c,d,e,f,g,h,i,j,k,l,m;for(b=".,;-!?",h=".!?",d="abcdefghijklmnopqrstuvwxyz",f="",g=void 0,k=!0,i=!0,l=0,m=a.length;m>l;l++)e=a[l],c=e.toLowerCase(),d.indexOf(c)>-1&&k&&(c=e.toUpperCase(),k=!1),h.indexOf(e)>-1&&(k=!0),b.indexOf(e)>-1&&(f+=e+" ",c="")," "===e?(j&&(c=""),j=!0):j=!1,f+=c;return f=f.trim().replace(" .",".")},c.prototype.AifBthenwhatC=function(a,b,c,d){var e;return e=void 0!==d&&""!==d?a+". "+d+" "+b+", "+c+"?":a+". "+b+". "+c+"?",this.prettify(e)},c.prototype.AandBwhatC=function(a,b,c){var d;return d=a+", and "+b+". "+c+"?",this.prettify(d)},c.prototype.whatCifAandB=function(a,b,c){var d;return d=c+", if "+a+", and "+b+"?",this.prettify(d)},c.prototype.AwhatCifB=function(a,b,c,d){var e;return(void 0===d||""===d)&&(d="if"),e=a+". "+c+" "+d+" "+b+"?",this.prettify(e)},c.prototype.ifBthenwhatC=function(a,b,c){var d;return d=void 0!==c||""===c?c+" "+a+", "+b+"?":a+". "+b+"?",this.prettify(d)},c.prototype.combine3=function(a,b,c,d){var e;return e=this.randomFromList(["AifBthenwhatC","AandBwhatC","AwhatCifB"]),d=this.randomFromList(["if",""]),this[e](a,b,c,d)},c.prototype.combine2=function(a,b,c){var d;return d=this.randomFromList(["ifBthenwhatC"]),c=this.randomFromList(["if",""]),this[d](a,b,c)},c}(),console.log("KristaUtil factory"),new c}])}.call(this),function(){angular.module("Krista").factory("M03",["KristaData","KristaUtil",function(){return void 0}]).factory("M06",["KristaData","KristaUtil",function(){return void 0}]).factory("M07",["KristaData","KristaUtil",function(){return void 0}]).factory("M08",["KristaData","KristaUtil",function(){return void 0}]).factory("M09",["KristaData","KristaUtil",function(){return void 0}]).factory("M10",["KristaData","KristaUtil",function(){return void 0}]).factory("M11",["KristaData","KristaUtil",function(){return void 0}]).factory("M12",["KristaData","KristaUtil",function(){return void 0}]).factory("M13",["KristaData","KristaUtil",function(){return void 0}]).factory("M14",["KristaData","KristaUtil",function(){return void 0}]).factory("M15",["KristaData","KristaUtil",function(){return void 0}]).factory("M16",["KristaData","KristaUtil",function(){return void 0}]).factory("M17",["KristaData","KristaUtil",function(){return void 0}]).factory("M18",["KristaData","KristaUtil",function(){return void 0}]).factory("M19",["KristaData","KristaUtil",function(){return void 0}]).factory("M20",["KristaData","KristaUtil",function(){return void 0}]).factory("M21",["KristaData","KristaUtil",function(){return void 0}]).factory("M22",["KristaData","KristaUtil",function(){return void 0}]).factory("M23",["KristaData","KristaUtil",function(){return void 0}]).factory("M24",["KristaData","KristaUtil",function(){return void 0}]).factory("M25",["KristaData","KristaUtil",function(){return void 0}]).factory("M26",["KristaData","KristaUtil",function(){return void 0}]).factory("M27",["KristaData","KristaUtil",function(){return void 0}]).factory("M28",["KristaData","KristaUtil",function(){return void 0}]).factory("M29",["KristaData","KristaUtil",function(){return void 0}]).factory("M30",["KristaData","KristaUtil",function(){return void 0}])}.call(this),function(){angular.module("Krista").factory("M01",["KristaData","KristaUtil",function(a,b){var c;return new(c=function(){function a(){}return a.prototype.u=b,a.prototype.generate=function(){var a,b;return a=this.u.random(21,50),b=this.u.random(3,40),[[""+a+" + "+b+" = ?"],a+b]},a}())}])}.call(this),function(){angular.module("Krista").factory("M02",["KristaData","KristaUtil",function(a,b){var c;return new(c=function(){function a(){}return a.prototype.u=b,a.prototype.increaseRandomly=function(a,b){var c,d;return d=this.u.randomFromList([0,1,2,3]),0===d?(c=this.u.random(1,2),b>a?[a+c,b+c]:[a+c,b]):1===d?[a+this.u.random(1,2),b]:2===d?b>2?[a,Math.max(2,b-this.u.random(1,2))]:[a+1,b+1]:(c=Math.ceil((b+1)/a),b>=c+2?[a-1,b-c]:[a+1,b+1])},a.prototype.generate=function(){var a,b,c,d,e,f,g,h,i,j,k;for(g=this.u.random(1,6),h=g>3?g+this.u.random(5,9):g+this.u.random(1,6),c=[g,h],e=[],d=i=1;4>=i;d=++i)j=this.increaseRandomly(g,h),g=j[0],h=j[1],e.push([g,h]);return k=this.u.shuffleAnswers4(e,c),b=k[0],f=k[1],b=function(){var c,d,e;for(e=[],c=0,d=b.length;d>c;c++)a=b[c],e.push(this.u.toCssFraction(a[0],a[1]));return e}.call(this),[["What is the smallest fraction?",b],f]},a}())}])}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};angular.module("Krista").factory("M04",["KristaData","KristaUtil",function(b,c){var d;return new(d=function(){function d(){this.generate=a(this.generate,this),this.generateDataForQuestionType04=a(this.generateDataForQuestionType04,this)}return d.prototype.u=c,d.prototype.generateDataForQuestionType04=function(){var a,c,d,e,f,g,h,i;return i=this.u.randomFromList(["person","bird","zoo","forest","animal","barn","thing","thing"]),c=this.u.randomFromList(b.data.item[i]),d=this.u.randomFromList(b.data.location[i]),f=this.u.randomPairFromList([1,2,3,4,5,6,7]),g=f[0],h=f[1],g%2===0&&h%2===0&&(g/=2,h/=2),g%3===0&&h%3===0&&(g/=3,h/=3),e=this.u.random(2,6),a={location:d,elements:c,ratio:[g,h],numbers:[g*e,h*e]}},d.prototype.generate=function(){var a,b;return b=this.generateDataForQuestionType04(),a={},a.ratio=function(){return b.ratio.join(":")},a.ratioFor=function(a){return b.ratio[a]},a.number=function(a){return b.numbers[a]},a.numberTotal=function(){var a,c,d,e,f;for(c=0,f=b.numbers,d=0,e=f.length;e>d;d++)a=f[d],c+=a;return c},a.element=function(a){return b.elements[0][a][0]},a.elements=function(a){return b.elements[0][a][1]},a.item=function(){return b.elements.length>1&&b.elements[1]?b.elements[1][0]:b.elements[0][0][0]+" or "+b.elements[0][1][0]},a.items=function(){return b.elements.length>1&&b.elements[1]?b.elements[1][1]:b.elements[0][0][1]+" and "+b.elements[0][1][1]+" together"},a.inSet=function(a,c){var d;return d="",a&&b.location[2]&&(d+=b.location[2]+" "),b.location[1]&&(d+=b.location[1]+" "),c&&b.location[0].length>1&&(d+=b.location[0][1]+" "),d+b.location[0][0]},a.forEvery=function(b){var c;return c=1===a.ratioFor(b)?"one "+a.element(b):a.ratioFor(b)+" "+a.elements(b)},a.forEveryThere=function(b){var c;return c=1===a.ratioFor(b)?"there is one "+a.element(b):"there are "+a.ratioFor(b)+" "+a.elements(b)},a.thereAre=function(b){var c;return c="there ",c+=1===a.number(b)?"is one "+a.element(b):"are "+a.number(b)+" "+a.elements(b)},a.thereAreTotal=function(){var b,c;return c=a.numberTotal(),b="there ",b+=1===c?"is 1 "+a.item():"are "+c+" "+a.items()},a.ratioIsSingleVariant=function(b){return void 0===b||""===b?"the ratio of "+a.elements(0)+" to "+a.elements(1)+" is "+a.ratio():"the ratio of "+a.elements(0)+" to "+a.elements(1)+" "+b+" is "+a.ratio()},a.ratioIs=function(b){return function(c){return b.u.random(0,2)>0?void 0===c||""===c?"the ratio of "+a.elements(0)+" to "+a.elements(1)+" is "+a.ratio():"the ratio of "+a.elements(0)+" to "+a.elements(1)+" "+c+" is "+a.ratio():void 0===c||""===c?"for every "+a.forEvery(0)+" "+a.forEveryThere(1):"for every "+a.forEvery(0)+" "+c+" "+a.forEveryThere(1)}}(this),a.howMany=function(b){return"how many "+a.elements(b)+" are there"},a.howManyTotal=function(){return"how many "+a.items()+" are there"},a.ratioIsInSet=function(b,c){return a.ratioIs(a.inSet(b,c))},a.thereAreInSet=function(b,c,d){return a.thereAre(b)+" "+a.inSet(c,d)},a.thereAreTotalInSet=function(b,c){return a.thereAreTotal()+" "+a.inSet(b,c)},a.howManyInSet=function(b,c,d){return a.howMany(b)+" "+a.inSet(c,d)},a.howManyTotalInSet=function(b,c){return a.howManyTotal()+" "+a.inSet(b,c)},a.generateQuestion=function(b){return function(){var c,d,e,f,g,h,i,j;return j=b.u.randomFromList([!1,!0]),e=b.u.randomPairFromList([0,1,2]),2!==e[0]?j?(g=a.thereAreInSet(e[0],!0,!0),f=b.u.random(0,2)>0?a.ratioIs():a.ratioIsInSet()):(f=a.ratioIsInSet(!0,!0),g=b.u.random(0,2)>0?a.thereAre(e[0]):a.thereAreInSet(e[0],!1,!1)):j?(g=a.thereAreTotalInSet(!0,!0),f=b.u.random(0,2)>0?a.ratioIs():a.ratioIsInSet()):(f=a.ratioIsInSet(!0,!0),g=b.u.random(0,2)>0?a.thereAreTotal():a.thereAreTotalInSet(!1,!1)),2===e[1]?(c=a.numberTotal(),h=b.u.random(0,2)>0?a.howManyTotal():a.howManyTotalInSet(!1,!1)):(c=a.number(e[1]),h=b.u.random(0,2)>0?a.howMany(e[1]):a.howManyInSet(e[1],!1,!1)),d=b.u.combine3,i=j?d(g,f,h):d(f,g,h),[[i],c]}}(this),a.generateQuestion()},d}())}])}.call(this),function(){angular.module("Krista").factory("M05",["KristaData","KristaUtil",function(a,b){var c;return new(c=function(){function a(){}return a.prototype.u=b,a.prototype.generate=function(){var a,b,c,d,e,f,g,h,i,j,k;for(j=this.u.random(1,90),h=0,d=[],c=k=1;5>=k;c=++k)h+=this.u.randomFromList([.01,.02,.03,.04,.05,.06]),d.push(h);return g=function(){var a,b,c;for(c=[],a=0,b=d.length;b>a;a++)e=d[a],c.push((j+e*this.u.randomFromList([-1,1])).toFixed(2));return c}.call(this),b=g.splice(0,1),this.u.shuffleListInPlace(g),f=this.u.random(0,5),i=g.splice(f,10),a=g.concat(b).concat(i),[["Which of the following is closest in value to "+j+"?",a],f]},a}())}])}.call(this),function(){angular.module("Krista").factory("M07",["KristaData","KristaUtil",function(a,b){var c;return new(c=function(){function a(){}return a.prototype.u=b,a.prototype.generate=function(){var a,b,c,d;return b=this.u.random(2,10),c=this.u.random(2,10),d=this.u.random(2,10),a=this.u.randomVariableLetter(),[["If "+d*b+" ÷ "+a+" = "+b+", then "+c+" x "+a+" = ?"],c*d]},a}())}])}.call(this),function(){angular.module("Krista").factory("M08",["KristaData","KristaUtil",function(a,b){var c;return new(c=function(){function a(){}return a.prototype.u=b,a.prototype.generate=function(){var a,b,c,d,e,f,g,h;return a=this.u.random(2,9),d=this.u.randomNonRepeating([11,13,17,19,23,29,31],4),d.sort(),g=d.concat(),f=[[d[3],d[2],d[1],d[0]],[d[3],d[1],d[2],d[0]],[d[0],d[2],d[1],d[3]],[d[2],d[1],d[0],d[3]]],h=this.u.shuffleAnswers4(f,g),c=h[0],e=h[1],c=function(){var d,e,f;for(f=[],d=0,e=c.length;e>d;d++)b=c[d],f.push(this.u.toCssFraction(a,b[0])+", "+this.u.toCssFraction(a,b[1])+", "+this.u.toCssFraction(a,b[2])+", "+this.u.toCssFraction(a,b[3]));return f}.call(this),[["Which of the below fractions are ordered from largest to smallest?",c],e]},a}())}])}.call(this),function(){angular.module("Krista").factory("M10",["KristaData","KristaUtil",function(a,b){var c;return new(c=function(){function a(){}return a.prototype.u=b,a.prototype.generate=function(){var a,b,c,d;return c=this.u.randomNonRepeating([1,2,3,4,5,6,7,8,9],5),d=this.u.random(0,5),b=c[d],a=[this.u.toCssFraction(b,10),this.u.toCssFraction(b,100),this.u.toCssFraction(b,"1,000"),this.u.toCssFraction(b,"10,000"),this.u.toCssFraction(b,"100,000")],[["In the decimal 0."+c.join("")+", the digit "+b+" is equal to which of the following?",a],d]},a}())}])}.call(this),function(){angular.module("Krista").factory("M11",["KristaData","KristaUtil",function(a,b){var c;return new(c=function(){function a(){}return a.prototype.u=b,a.prototype.generate=function(){var a,b;return a=this.u.random(21,50),b=this.u.random(11,40),[[""+(a+b)+" - "+a+" = ?"],b]},a}())}])}.call(this),function(){angular.module("Krista").factory("M13",["KristaData","KristaUtil",function(a,b){var c;return new(c=function(){function a(){}return a.prototype.u=b,a.prototype.generate=function(){var a;return a=this.u.random(3,8),a=(a/2).toFixed(1),[[""+a+" m = _ cm?"],100*a]},a}())}])}.call(this),function(){angular.module("Krista").factory("M14",["KristaData","KristaUtil",function(a,b){var c;return new(c=function(){function a(){}return a.prototype.u=b,a.prototype.generate=function(){var a,b,c,d,e,f,g,h;for(g=this.u.random(11,30),a=this.u.random(3,Math.floor(g/2)),d=this.u.random(3,Math.floor(g/2));a===d;)d=this.u.random(2,Math.floor(g/2));return this.u.randomAB()?(b=g-a,c="more"):(b=g+a,c="less"),this.u.randomAB()?(e=g-d,f="less"):(e=g+d,f="more"),h=this.u.randomPairNames(),[[""+h[0][0]+" has $"+a+" dollars "+c+" than $"+b+". How much money does "+h[1][0]+" have if "+h[1][1]+" has $"+d+" "+f+" than "+h[0][0]],e]},a}())}])}.call(this),function(){angular.module("Krista").factory("M17",["KristaData","KristaUtil",function(a,b){var c;return new(c=function(){function a(){}return a.prototype.u=b,a.prototype.generate=function(){var a,b,c,d,e,f;return e=this.u.randomFromList([2,3,5,7,11,13,17,19,23,29,31]),d=this.u.randomNonRepeating([4,6,8,9,10,12,14,15,16,18,20,21,22,24,25,26,27,28,30,32,33,34,35,36,38,39,40,42,44,45,46,48,49,50,51,52,54,55,56,57,58,60,62,63,64,65,66,68,69,70,72,74,75,76,77,78,80,81,82,84,85,86,87,88,90,91,92,93,94,95,96,98,99,100],4),f=this.u.shuffleAnswers4(d,e),b=f[0],c=f[1],b=function(){var c,d,e;for(e=[],c=0,d=b.length;d>c;c++)a=b[c],e.push(""+a);return e}(),[["Which of the numbers below is a prime number?",b],c]},a}())}])}.call(this),function(){angular.module("Krista").factory("M18",["KristaData","KristaUtil",function(a,b){var c;return new(c=function(){function a(){}return a.prototype.u=b,a.prototype.generate=function(){var a,b;return a=this.u.random(111,450),b=this.u.random(111,450),[["What is the value of the expression "+a+" + "+b+"?"],a+b]},a}())}])}.call(this),function(){angular.module("Krista").factory("M19",["KristaData","KristaUtil",function(a,b){var c;return new(c=function(){function a(){}return a.prototype.u=b,a.prototype.generate=function(){var a;return a=this.u.random(3,8),a=(a/2).toFixed(1),[[""+a+" ft. = _ inches?"],12*a]},a}())}])}.call(this),function(){angular.module("Krista").factory("M21",["KristaData","KristaUtil",function(a,b){var c;return new(c=function(){function a(){}return a.prototype.u=b,a.prototype.generate=function(){var a,b,c,d;return c=this.u.random(2,10),d=this.u.randomPairFromList([2,3,4,5,6,7,8,9,10,11]),a=d[0],b=d[1],[[""+a+" is to "+a*c+" as "+b+" is to _ ?"],b*c]},a}())}])}.call(this),function(){angular.module("Krista").factory("M22",["KristaData","KristaUtil",function(a,b){var c;return new(c=function(){function a(){}return a.prototype.u=b,a.prototype.generate=function(){var a,b,c,d,e,f,g,h,i,j,k,l;return a=this.u.random(1,9),c=0,d=this.u.random(1,9),e=this.u.random(1,9),j=this.u.randomAB(),j&&(k=[d,c],c=k[0],d=k[1]),h=""+a+","+c+d+e,i=""+this.u.digitToWord(a)+" thousand",j?(i+=" "+this.u.digitToWord(c)+" hundred and "+this.u.digitToWord(e),g=[""+a+","+c+e+"0",""+a+","+c+c+e,""+a+"0,0"+c+e,""+a+"0,"+c+"0"+e]):(i+=2>d?" "+this.u.numberBelow20ToWord(10*d+e):" "+this.u.tensToWord(d)+" "+this.u.digitToWord(e),g=[""+a+","+d+"0"+e,""+a+","+d+d+e,""+a+"0,0"+d+e,""+a+"0,"+d+"0"+e]),l=this.u.shuffleAnswers4(g,h),b=l[0],f=l[1],[["Which is "+i+"?",b],f]},a}())}])}.call(this),function(){angular.module("Krista").factory("M23",["KristaData","KristaUtil",function(a,b){var c;return new(c=function(){function a(){}return a.prototype.u=b,a.prototype.generate=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;for(l=this.u.randomPairFromList([1,2,3,5]),c=l[0],f=l[1],c>f&&(m=[f,c],c=m[0],f=m[1]),j=this.u.random(c+1,3*c+1),k=this.u.random(f+1,3*f+1);k/f===j/c||k>9;)k=this.u.random(f+1,3*f+1);return n=this.u.reduce(c,j),c=n[0],j=n[1],o=this.u.reduce(f,k),f=o[0],k=o[1],a=c*k+f*j,b=j*k,g=this.u.reduce(a,b),h=[],h.push(this.u.reduce(c+f,j+k)),h.push(this.u.reduce(c+f,j*k)),h.push(this.u.reduce(c+k,j*k)),h.push(this.u.reduce(c*k+f*j,j+k)),p=this.u.shuffleAnswers4(h,g),e=p[0],i=p[1],e=function(){var a,b,c;for(c=[],a=0,b=e.length;b>a;a++)d=e[a],c.push(""+this.u.toCssFraction(d[0],d[1]));return c}.call(this),[["What is "+this.u.toCssFraction(c,j)+" + "+this.u.toCssFraction(f,k)+"?",e],i]},a}())}])}.call(this),function(){angular.module("Krista").factory("M24",["KristaData","KristaUtil",function(a,b){var c;return new(c=function(){function a(){}return a.prototype.u=b,a.prototype.generate=function(){var a,b,c,d;return b=this.u.random(2,10),c=this.u.random(2,10),d=this.u.random(2,10),a=this.u.randomVariableLetter(),[["If "+d*b+" ÷ "+a+" = "+b+", then "+c+" x "+a+" = ?"],c*d]},a}())}])}.call(this),function(){angular.module("Krista").factory("M26",["KristaData","KristaUtil",function(a,b){var c;return new(c=function(){function a(){}return a.prototype.u=b,a.prototype.generate=function(){var a,b,c,d,e,f,g,h,i,j,k;return i=this.u.random(3,8),a=this.u.random(1,6),d=a+this.u.random(2,5),j=this.u.reduce(a,d),a=j[0],d=j[1],f=[i,a,d],g=[],e=!1,this.u.randomAB()?(g.push([i-this.u.random(1,3),a,2*d]),e=!0):g.push(this.u.randomAB()?[i-this.u.random(1,3),a+1,d]:[i,a,d]),g.push(this.u.randomAB()?[i+this.u.random(1,3),Math.max(1,a-1),d]:[i-this.u.random(1,3),Math.max(1,a-1),d]),g.push(this.u.randomAB()?a>1?[i+this.u.random(1,3),a+1,2*d]:[i+this.u.random(1,3),a,2*d]:[i,a+this.u.random(1,3),2*d]),g.push(this.u.randomAB()>0||e?[i,a,2*d]:[i-this.u.random(1,3),a,2*d]),k=this.u.shuffleAnswers4(g,f),c=k[0],h=k[1],c=function(){var a,d,e;for(e=[],a=0,d=c.length;d>a;a++)b=c[a],e.push([b[0]].concat(this.u.reduce(b[1],b[2])));return e}.call(this),c=function(){var a,d,e;for(e=[],a=0,d=c.length;d>a;a++)b=c[a],e.push(""+b[0]+this.u.toCssFraction(b[1],b[2]));return e}.call(this),[["What is "+this.u.toCssFraction(i*d+a,d)+" expressed as a mixed number?",c],h]},a}())}])}.call(this),function(){angular.module("Krista").factory("M27",["KristaData","KristaUtil",function(a,b){var c;return new(c=function(){function a(){}return a.prototype.u=b,a.prototype.generate=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o;n="pies",h="friends",m="person",l=this.u.random(17,50),g=this.u.random(5,8),d=this.u.random(1,4),e=this.u.random(2,5),f=this.u.random(3,6),c=[[g-1,l],[g+1,l],[l-d,g-1],[l-d,g+f],[l+e,g-1]],this.u.shuffleListInPlace(c),o=100,j=-1;for(i in c)a=c[i],k=Math.abs(a[0]/a[1]-l/g),o>k&&(o=k,j=i);return c=function(){var a,d,e;for(e=[],a=0,d=c.length;d>a;a++)b=c[a],e.push(""+this.u.toCssFraction(b[0],b[1]));return e}.call(this),[[""+l+" "+n+" will be divided evenly among "+g+" "+h+". Of the below, which expression gives the best estimate of the total number of "+n+" each "+m+" will receive?",c],j]},a}())}])}.call(this),function(){angular.module("Krista").factory("M29",["KristaData","KristaUtil",function(a,b){var c;return new(c=function(){function a(){}return a.prototype.u=b,a.prototype.generate=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;for(l=this.u.randomPairFromList([1,2,3,5]),c=l[0],f=l[1],c>f&&(m=[f,c],c=m[0],f=m[1]),j=this.u.random(c+1,3*c+1),k=this.u.random(f+1,3*f+1);k/f===j/c||k>9;)k=this.u.random(f+1,3*f+1);return n=this.u.reduce(c,j),c=n[0],j=n[1],o=this.u.reduce(f,k),f=o[0],k=o[1],a=c*f,b=j*k,g=this.u.reduce(a,b),h=[],h.push(this.u.reduce(c+f,j*k)),h.push(this.u.reduce(c*f,j*f)),h.push(this.u.reduce(c+f,j+k)),h.push(this.u.reduce(1,j+k)),p=this.u.shuffleAnswers4(h,g),e=p[0],i=p[1],e=function(){var a,b,c;for(c=[],a=0,b=e.length;b>a;a++)d=e[a],c.push(""+this.u.toCssFraction(d[0],d[1]));return c}.call(this),[["What is "+this.u.toCssFraction(c,j)+" x "+this.u.toCssFraction(f,k)+"?",e],i]},a}())}])}.call(this),function(){angular.module("filters",[]).filter("questionMark",function(){return function(a){return void 0===a?"?":a}}).filter("underscore",function(){return function(a){return void 0===a||""===a?"_":a}}).filter("textOrLoading",function(){return function(a){return void 0===a?"":a}}).filter("secsToMillis",function(){return function(a){return void 0===a||isNaN(a)?a:Math.round(a/1e3)}}).filter("truncate",function(){return function(a,b,c){return isNaN(b)&&(b=27),c||(c="..."),a.length<=b||a.length-c.length<=b?a:String(a).substring(0,b-c.length)+c}}).filter("firstCapital",function(){return function(a){return void 0===a?"":a.substring(0,1).toUpperCase()+a.substring(1)}}).filter("orderObjectBy",function(){return function(a,b,c){var d;return d=[],angular.forEach(a,function(a){return d.push(a)}),d.sort(function(a,c){return a[b]>c[b]?1:-1}),c&&d.reverse(),d}}).filter("secondsToHuman",function(){return function(a){var b,c,d,e,f,g,h;return b=a/86400,e=Math.floor(b),a-=86400*e,c=a/3600,f=Math.floor(c),a-=3600*f,d=a/60,g=Math.floor(d),a-=60*g,h=a,e>1?""+e+" days, "+f+" hours, "+g+" minutes, "+h+" seconds":1===e?"1 day, "+f+" hours, "+g+" minutes, "+h+" seconds":f>1?""+f+" hours, "+g+" minutes, "+h+" seconds":1===f?"1 hour, "+g+" minutes, "+h+" seconds":g>1?""+g+" minutes, "+h+" seconds":1===g?"1 minute, "+h+" seconds":1===h?"1 second":""+h+" seconds"}}).filter("secondsToClock",function(){return function(a){var b,c,d,e,f;return void 0===a||isNaN(a)?"":(b=a/3600,d=Math.floor(b),a-=3600*d,c=a/60,e=Math.floor(c),10>e&&(e="0"+e),a-=60*e,f=a,10>f&&(f="0"+f),d>0?""+d+":"+e+":"+f:""+e+":"+f)}})}.call(this),function(){angular.module("AppOne",["ngRoute","ngMd5","timer","filters","Krista"])}.call(this),function(){angular.module("AppOne").factory("DeviceId",["md5",function(a){var b;return b=function(){function b(){var b;b=this._read(),b?(this.deviceSecretId=b["private"],this.devicePublicId=b["public"]):(this.deviceSecretId=this._randomString(50),this.devicePublicId=a.createHash(this.deviceSecretId),this._write({"private":this.deviceSecretId,"public":this.devicePublicId}))}return b.prototype._chars="z123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZAB",b.prototype._randomChar=function(){return this._chars[64*Math.random()|0]},b.prototype._randomString=function(a){var b,c,d;for(c="",b=d=1;a>=1?a>=d:d>=a;b=a>=1?++d:--d)c+=this._randomChar();return c},b.prototype._key=document.numeric.key.deviceId,b.prototype._read=function(){return JSON.parse(window.localStorage.getItem(this._key))},b.prototype._write=function(a){return window.localStorage.setItem(this._key,JSON.stringify(a))},b.prototype._clear=function(){return window.localStorage.setItem(this._key,JSON.stringify({}))},b.prototype.qs=function(){return"?did="+this.devicePublicId},b.prototype.qsAnd=function(){return"&did="+this.devicePublicId},b.prototype.qsWithCb=function(a){var b;return b="&cb="+Math.round(new Date/a),this.qs()+b},b.prototype.qsAndWithCb=function(a){var b;return b="&cb="+Math.round(new Date/a),this.qsAnd()+b},b}(),console.log("CALL TO FACTORY: DeviceId"),new b}])}.call(this),function(){angular.module("AppOne").factory("FileDownload",["$q","DeviceId",function(a,b){var c;return c=function(){function c(){}return c.prototype.download=function(c,d){var e,f;return console.log("downloading from: "+c+" to: "+d),e=a.defer(),f=new FileTransfer,f.download(c,d,function(){return e.resolve("ok")},function(a){return e.reject(a.code)},!1,{headers:{Authorization:"Basic "+b.deviceSecretId}}),e.promise},c}(),console.log("CALL TO FACTORY: FileDownload"),new c}])}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};angular.module("AppOne").factory("FS",["$q","md5",function(b,c){var d;return d=function(){function d(){this.tryDeleteFile=a(this.tryDeleteFile,this),this.readDataFromFile=a(this.readDataFromFile,this),this.writeDataToFile=a(this.writeDataToFile,this),this.getContents=a(this.getContents,this),this.getFileSystem=a(this.getFileSystem,this),this.salt="only the first line of defence",window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,this._getDirEntry(document.numeric.url.base.fs,{create:!0}).then(function(a){return function(){return a.getDirEntry(document.numeric.path.result,{create:!0})}}(this))}return d.prototype._errorHandler=function(a){return function(b){var c;return c=function(){switch(b.code){case FileError.QUOTA_EXCEEDED_ERR:return"QUOTA_EXCEEDED_ERR";case FileError.NOT_FOUND_ERR:return"NOT_FOUND_ERR";case FileError.SECURITY_ERR:return"SECURITY_ERR";case FileError.INVALID_MODIFICATION_ERR:return"INVALID_MODIFICATION_ERR";case FileError.INVALID_STATE_ERR:return"INVALID_STATE_ERR";default:return"Unknown Error: "+b.code}}(),console.log("ERROR: "+c),a.reject(c)}},d.prototype._printEntries=function(a){var b,c,d,e;for(console.log("entries:"),e=[],c=0,d=a.length;d>c;c++)b=a[c],e.push(console.log(b.name));return e},d.prototype.getFileSystem=function(){var a;return a=b.defer(),"undefined"!=typeof LocalFileSystem?window.requestFileSystem(LocalFileSystem.PERSISTENT,0,function(){return function(b){return a.resolve(b)}}(this),this._errorHandler(a)):console.log("LocalFileSystem is undefined"),a.promise},d.prototype._getDirEntry=function(a,c){var d;return console.log("getting dirEntry: "+a),d=b.defer(),this.getFileSystem().then(function(b){return function(e){return"/"===a?d.resolve(e.root):e.root.getDirectory(a,c,function(a){return d.resolve(a)},b._errorHandler(d))}}(this)),d.promise},d.prototype._getFileEntry=function(a,c){var d;return console.log("getting fileEntry: "+a),d=b.defer(),this.getFileSystem().then(function(b){return function(e){return e.root.getFile(a,c,function(a){return d.resolve(a)},b._errorHandler(d))}}(this))["catch"](function(a){return d.reject(a)}),d.promise},d.prototype.getDirEntry=function(a,b){return this._getDirEntry(document.numeric.url.base.fs+a,b)
},d.prototype.getFileEntry=function(a,b){return this._getFileEntry(document.numeric.url.base.fs+a,b)},d.prototype.getContents=function(a){var c;return c=b.defer(),this.getDirEntry(a,{create:!1}).then(function(a){return function(b){var c;return console.log(b),console.log("fullPath:"+b.fullPath),console.log("toURL:"+b.toURL()),c=b.createReader(),c.readEntries(a._printEntries,a._errorHandler)}}(this))},d.prototype.getFileWriter=function(a){var c;return c=b.defer(),this.getFileEntry(a,{create:!0,exclusive:!1}).then(function(a){return function(b){return b.createWriter(function(a){return c.resolve(a)},a._errorHandler(c))}}(this)),c.promise},d.prototype.getFileReader=function(a){var c;return c=b.defer(),this.getFileEntry(a,{create:!1}).then(function(a){return a.file(function(a){var b;return b=new FileReader,b.onloadend=function(a){return c.resolve(a.target.result)},b.readAsText(a)},function(a){return c.reject(a)})}),c.promise},d.prototype.writeToFile=function(a,c){var d;return d=b.defer(),this.getFileWriter(a).then(function(b){return console.log("obtained filewriter for: "+a),b.seek(0),b.write(c),d.resolve("wrote to file: "+a)}),d.promise},d.prototype.readFromFile=function(a){var c;return c=b.defer(),this.getFileReader(a).then(function(a){return c.resolve(a)}),c.promise},d.prototype.writeDataToFile=function(a,d,e){var f,g;return g=b.defer(),f=JSON.stringify(d),this.writeToFile(a,f).then(function(a){return function(){return e?(g.resolve(c.createHash(f+a.salt)),console.log("h:"+c.createHash(f+a.salt))):g.resolve("ok")}}(this)),g.promise},d.prototype.readDataFromFile=function(a,d){var e;return e=b.defer(),this.readFromFile(a).then(function(a){return function(b){return d&&d!==c.createHash(b+a.salt)?(console.log(d),console.log(b),console.log(a.salt),console.log(c.createHash(b+a.salt)),e.resolve("mismatch"),console.log("H:"+c.createHash(b+a.salt))):e.resolve(JSON.parse(b))}}(this)),e.promise},d.prototype.tryDeleteFile=function(a){var c;return c=b.defer(),this.getFileEntry(a,{create:!1}).then(function(){return function(a){return a.remove(function(){return c.resolve("removed")},function(){return c.resolve("could not remove, but it is alright")})}}(this),function(){return c.resolve("could not remove, but it is alright")}),c.promise},d}(),console.log("CALL TO FACTORY: FS"),new d}])}.call(this),function(){angular.module("AppOne").factory("QRSignature",[function(){var a;return a=function(){function a(){}return a.prototype.encode=function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;k=10,d="rgb(0,0,0)",q="rgb(255,255,255)",c=4,f=document.createElement("canvas"),m=f.getContext("2d");try{l=new QRCode(c,QRErrorCorrectLevel.L),l.addData(a),l.make()}catch(v){return g=v,h=document.createElement("p"),i=document.createTextNode("QR Code generation failed: "+g),h.appendChild(i),h}if(n=l.getModuleCount(),f.setAttribute("height",n*b+k),f.setAttribute("width",n*b+k),p=k/2,f.getContext)for(o=r=0,t=n-1;t>=0?t>=r:r>=t;o=t>=0?++r:--r)for(e=s=0,u=n-1;u>=0?u>=s:s>=u;e=u>=0?++s:--s)m.fillStyle=l.isDark(o,e)?d:q,m.fillRect(e*b+p,o*b+p,b,b);return j=document.createElement("img"),j.src=f.toDataURL("image/png"),j},a}(),console.log("CALL TO FACTORY: QRSignature"),new a}])}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};angular.module("AppOne").factory("Connections",["$q","$http","Settings","DeviceId",function(b,c,d,e){var f;return f=function(){function f(){this._httpGet=a(this._httpGet,this),this._indexOf=a(this._indexOf,this),this._read()||this._httpGet()()["catch"](function(){return function(){}}(this),this._write(document.numeric.defaultTeachersList))}return f.prototype._key=document.numeric.key.connections,f.prototype._urls={remote:function(){return d.get("mainServerAddress")+document.numeric.path.connections+e.qsWithCb(1e3)}},f.prototype._read=function(){return JSON.parse(window.localStorage.getItem(this._key))},f.prototype._write=function(a){return window.localStorage.setItem(this._key,JSON.stringify(a))},f.prototype._clear=function(){return window.localStorage.setItem(this._key,JSON.stringify({}))},f.prototype._add=function(a){var b;return b=this._read(),b.push(a),this._write(b)},f.prototype._indexOf=function(a){var b,c,d;d=this._read();for(b in d)if(c=d[b],c.id===a)return b;return-1},f.prototype._remove=function(a){var b,c;return b=this._indexOf(a),0>b?1:(c=this._read(),c.splice(b,1),this._write(c))},f.prototype._httpGet=function(){return function(a){return function(){var d,f;return f=a._urls.remote(),d=b.defer(),console.log("|- trying "+f+" ..."),c.get(f,{cache:!1,headers:{Authorization:"Basic "+e.deviceSecretId}}).then(function(b){return console.log("| |- found at "+f),void 0!==b.data?(a._write(b.data),d.resolve(data)):d.reject("no data")},function(a){return console.log("| |- not found at "+f),d.reject(a)}),d.promise}}(this)},f.prototype.getAll=function(){return this._read()},f.prototype.add=function(a,b){return this._add(a,b)},f}(),console.log("CALL TO FACTORY: Connections"),new f}])}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};angular.module("AppOne").factory("ActivityMeta",["$q","$http","Settings","DeviceId",function(b,c,d,e){var f;return f=function(){function f(){this._httpGet=a(this._httpGet,this),this._cacheGet=a(this._cacheGet,this),this._read()||this._clear()}return f.prototype._key=document.numeric.key.activitiesMeta,f.prototype._urls={local:function(){return document.numeric.url.base.local+document.numeric.path.meta},remote:function(){return d.get("mainServerAddress")+document.numeric.path.meta+e.qsWithCb(1e3)}},f.prototype._read=function(){return JSON.parse(window.localStorage.getItem(this._key))},f.prototype._write=function(a){return window.localStorage.setItem(this._key,JSON.stringify(a))},f.prototype._clear=function(){return window.localStorage.setItem(this._key,JSON.stringify({}))},f.prototype._get=function(a){return this._read()[a]},f.prototype._add=function(a,b){var c;return c=this._read(),c[a]=b,this._write(c)},f.prototype._remove=function(a){var b;return b=this._read(),b[a]?(delete b[a],this._write(b)):void 0},f.prototype._cacheGet=function(a){var c,d;return d=b.defer(),console.log("|- trying localStorage..."),c=this._get(a),c?(console.log("| |- found in localStorage."),d.resolve(c)):(console.log("| |- not found in localStorage."),d.reject()),d.promise},f.prototype._httpGet=function(a,d){return function(f){return function(){var g;return g=b.defer(),console.log("|- trying "+a+" ..."),c.get(a,{cache:!1,headers:{Authorization:"Basic "+e.deviceSecretId}}).then(function(b){var c;return console.log("| |- found at "+a),c=b.data,c.id=d,f._add(d,c),g.resolve(c)},function(b){return console.log("| |- not found at "+a),g.reject(b)}),g.promise}}(this)},f.prototype.clearLocalStorage=function(){return this._clear()},f.prototype.get=function(a){return console.log("Looking for activity "+a),this._cacheGet(a)["catch"](this._httpGet(this._urls.local()+a,a))["catch"](this._httpGet(this._urls.remote()+a,a))},f.prototype.set=function(a,b){return console.log("Updating Meta Cache for activity "+a),this._add(a,b)},f}(),console.log("CALL TO FACTORY: ActivityMeta"),new f}])}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};angular.module("AppOne").factory("ActivityBody",["$q","Settings","DeviceId","ActivityMeta","FileDownload","FS",function(b,c,d,e,f,g){var h;return h=function(){function h(){this.getOrLoad=a(this.getOrLoad,this),this.loadActivity=a(this.loadActivity,this),this.__loadScript=a(this.__loadScript,this),this._loadScript=a(this._loadScript,this),this._attachActivityMeta=a(this._attachActivityMeta,this)}return h.prototype._activities={},h.prototype._scriptId=function(a){return"script_"+a},h.prototype._uriFS=function(a){return document.numeric.path.body+a},h.prototype._uriCdv=function(a){return document.numeric.url.base.cdv+document.numeric.url.base.fs+document.numeric.path.body+a},h.prototype._uriLocal=function(a){return document.numeric.url.base.local+document.numeric.path.body+a},h.prototype._uriRemote=function(a){return c.get("mainServerAddress")+document.numeric.path.body+a+d.qsWithCb(1e3)},h.prototype._attachActivityMeta=function(a){var c;return c=b.defer(),e.get(a).then(function(b){return function(d){return b._activities[a].id=a,b._activities[a].meta=d,c.resolve("attached meta")}}(this),function(a){return c.reject(a)}),c.promise},h.prototype._downloadActivityBody=function(a){return f.download(this._uriRemote(a),this._uriCdv(a))},h.prototype._deleteDownloadedFile=function(a){var c;return c=b.defer(),"undefined"!=typeof LocalFileSystem?g.tryDeleteFile(this._uriFS(a)).then(function(){return function(){return c.resolve("deleted")}}(this)):c.resolve("ok"),c.promise},h.prototype._loadScript=function(a,c){var d;return d=b.defer(),this.__loadScript(a,c).then(function(){return function(a){return d.resolve(a)}}(this))["catch"](function(a){return function(b){var e;return e=document.getElementById(a._scriptId(c)),e.parentElement.removeChild(e),d.reject(b)}}(this)),d.promise},h.prototype.__loadScript=function(a,c){var d,e,f;return console.log("__ attempt to load script with key: "+c+" and uri: "+a),d=b.defer(),f=this._scriptId(c),e=document.createElement("script"),e.type="text/javascript",e.id=f,e.onload=function(a){return function(){return console.log("script onload"),document.numeric.numericTasks[c]?(a._activities[c]=document.numeric.numericTasks[c],delete document.numeric.numericTasks[c],a._activities[c].id=c,d.resolve("script loaded: "+f)):d.reject("script did not load: "+f)}}(this),e.onerror=function(){return function(){return d.reject("error occured, script did not load: "+f)}}(this),e.src=a,document.getElementsByTagName("head")[0].appendChild(e),d.promise},h.prototype.removeBody=function(a){return this._deleteDownloadedFile(a)},h.prototype.unloadActivity=function(a){var b;return this._activities[a]?(b=document.getElementById(this._scriptId(a)),b.parentElement.removeChild(b),delete this._activities[a]):void 0},h.prototype.loadActivity=function(a){var c;return console.log("Call to load script with activityId: "+a),this._activities[a]?(c=b.defer(),c.resolve("already loaded"),c.promise):"undefined"==typeof LocalFileSystem?this._loadScript(this._uriRemote(a),a).then(function(b){return function(){return b._attachActivityMeta(a)}}(this)):this._loadScript(this._uriLocal(a),a)["catch"](function(b){return function(){var c;return c="?cb="+Math.round(new Date/1e3),b._loadScript(b._uriCdv(a)+c,a)}}(this))["catch"](function(b){return function(){return b._downloadActivityBody(a).then(function(){var c;return c="?cb="+Math.round(new Date/1e3),b._loadScript(b._uriCdv(a)+c,a)})}}(this)).then(function(b){return function(){return b._attachActivityMeta(a)}}(this))},h.prototype.loadActivities=function(a){var c,d,e,f;for(console.log("loadScripts called with "+a),d=[],e=0,f=a.length;f>e;e++)c=a[e],d.push(this.loadActivity(c));return b.all(d)},h.prototype.get=function(a){return this._activities[a]},h.prototype.getOrLoad=function(a){var c,d;return d=b.defer(),c=this._activities[a],c?d.resolve(c):this.loadActivity(a).then(function(b){return function(){return c=b._activities[a],c?d.resolve(c):d.reject("could not load activity")}}(this),function(a){return d.reject(a)}),d.promise},h}(),console.log("CALL TO FACTORY: ActivityBody"),new h}])}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};angular.module("AppOne").factory("Bookmarks",["ActivityMeta",function(b){var c;return c=function(){function c(){this.add=a(this.add,this);var b,c,d,e,f,g,h;if(this._read()){e=this._read();for(c in e)d=e[c],this.bookmarks[c]=d}else for(this._clear(),h=document.numeric.defaultActivitiesList,f=0,g=h.length;g>f;f++)b=h[f],this.add(b)}return c.prototype.bookmarks={},c.prototype.get=function(a){return this.bookmarks[a]},c.prototype._key=document.numeric.key.bookmarkedActivities,c.prototype._read=function(){return JSON.parse(window.localStorage.getItem(this._key))},c.prototype._write=function(a){return window.localStorage.setItem(this._key,JSON.stringify(a))},c.prototype._clear=function(){return window.localStorage.setItem(this._key,JSON.stringify({}))},c.prototype._add=function(a,b){var c;return c=this._read(),c[a]=b,this._write(c)},c.prototype._remove=function(a){var b;return b=this._read(),b[a]?(delete b[a],this._write(b)):void 0},c.prototype.clear=function(){var a,b,c;c=this.bookmarks;for(a in c)b=c[a],delete this.bookmarks[a];return this._clear()},c.prototype.add=function(a){return b.get(a).then(function(b){return function(c){return b.bookmarks[a]=c,b._add(a,c)}}(this),function(a){return console.log(a)})},c.prototype.remove=function(a){return this.bookmarks[a]&&delete this.bookmarks[a],this._remove(a)},c}(),console.log("CALL TO FACTORY: Bookmarks"),new c}])}.call(this),function(){angular.module("AppOne").factory("Marketplace",["$http","Settings","DeviceId",function(a,b,c){var d;return new(d=function(){function d(){}return d.prototype.config={activitiesLocal:function(){return document.numeric.url.base.local+document.numeric.path.list},activitiesPublic:function(){return b.get("mainServerAddress")+document.numeric.path.list}},d.prototype.getLocalActivitiesMeta=function(){return a.get(this.config.activitiesLocal())},d.prototype.getPublicActivitiesMeta=function(b,d,e){var f,g;return g="",void 0!==d&&(g="&q="+d.trim()),f="",e||(f="&cb="+Math.round(new Date/15e3)),a.get(this.config.activitiesPublic()+"?p="+b+g+c.qsAnd()+f,{timeout:7e3,cache:!1,headers:{Authorization:"Basic "+c.deviceSecretId}})},d}())}])}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};angular.module("AppOne").factory("ActivitySummary",["$q","FS",function(b,c){var d;return d=function(){function d(){this.finish=a(this.finish,this),this._readAllSummaries()||this._writeAllSummaries({items:[]}),this._extra="Just the first line of defense.",this.failoverBuffer={},"undefined"==typeof LocalFileSystem&&this._writeAllSummaries({items:[]})}return d.prototype.__baseFormat=function(){return{activityId:"",activityName:"",runningTotals:{correct:0,wrong:0},responses:[]}},d.prototype._key=document.numeric.key.currentActivitySummary,d.prototype._read=function(){return JSON.parse(window.localStorage.getItem(this._key))},d.prototype._write=function(a){return window.localStorage.setItem(this._key,JSON.stringify(a))},d.prototype._keyAllSummaries=document.numeric.key.storedActivitySummaries,d.prototype._readAllSummaries=function(){return JSON.parse(window.localStorage.getItem(this._keyAllSummaries))},d.prototype._writeAllSummaries=function(a){return window.localStorage.setItem(this._keyAllSummaries,JSON.stringify(a))},d.prototype._addToAllSummaries=function(a){var b;return b=this._readAllSummaries(),b.items.unshift(a),this._writeAllSummaries(b)},d.prototype._removeFromAllSummaries=function(a){var b,c,d,e,f,g,h;for(e=this._readAllSummaries(),c=0,h=e.items,f=0,g=h.length;g>f;f++)b=h[f],b.timestamp!==a&&(d=b);return this._writeAllSummaries(d)},d.prototype.getAllSummaries=function(){return this._readAllSummaries().items},d.prototype.getAllSummariesPage=function(a,b){return this._readAllSummaries().items.slice(a,b)},d.prototype.getFromAllSummaries=function(a){var b,c,d,e;for(e=this._readAllSummaries().items,c=0,d=e.length;d>c;c++)if(b=e[c],console.log(b.timestamp),parseInt(b.timestamp)===parseInt(a))return b;return void 0},d.prototype.getSummaryById=function(a){var d,e,f;return d=b.defer(),f=this.getFromAllSummaries(a),"test"===f.hash?(d.resolve(this.failoverBuffer[a]),d.promise):(e=document.numeric.path.result+a,c.readDataFromFile(e,f.hash).then(function(){return function(a){return d.resolve(a)}}(this),function(){return function(a){return d.reject(a)}}(this)),d.promise)},d.prototype.init=function(a,b){var c;return c=this.__baseFormat(),c.activityId=a,c.activityName=b,c.startTime=(new Date).getTime(),this._write(c),this.lastTimePoint=(new Date).getTime()},d.prototype.add=function(a){var b;return b=this._read(),a.result?b.runningTotals.correct=b.runningTotals.correct+1:b.runningTotals.wrong=b.runningTotals.wrong+1,b.responses.push([a.statement,a.answer,a.result,new Date-this.lastTimePoint]),this._write(b),this.lastTimePoint=(new Date).getTime()},d.prototype.finish=function(){var a,d,e,f;return e=b.defer(),d=this._read(),d.endTime=this.lastTimePoint,"undefined"==typeof LocalFileSystem?(a={activityName:d.activityName,timestamp:d.endTime,totalTime:d.endTime-d.startTime,numberCorrect:d.runningTotals.correct,numberWrong:d.runningTotals.wrong,hash:"test"},this.failoverBuffer[d.endTime]=d,this._addToAllSummaries(a),this._write({}),this.newFirst=0,e.resolve(d.endTime),e.promise):(f=document.numeric.path.result+d.endTime,console.log("trying to write to filename: "+f),c.writeDataToFile(f,d,!0).then(function(b){return function(c){return a={activityName:d.activityName,timestamp:d.endTime,totalTime:d.endTime-d.startTime,numberCorrect:d.runningTotals.correct,numberWrong:d.runningTotals.wrong,hash:c},b._addToAllSummaries(a),b._write({}),b.newFirst=0,e.resolve(d.endTime)}}(this))["catch"](function(a){return e.reject(a)}),e.promise)},d.prototype.setFirstIndex=function(a){return this.newFirst=a},d.prototype.getFirstIndex=function(){return this.newFirst},d}(),console.log("CALL TO FACTORY: ActivitySummary"),new d}])}.call(this),function(){angular.module("AppOne").factory("Settings",[function(){var a;return a=function(){function a(){this._read()||this._write({})}return a.prototype._key=document.numeric.key.settings,a.prototype._read=function(){return JSON.parse(window.localStorage.getItem(this._key))},a.prototype._write=function(a){return window.localStorage.setItem(this._key,JSON.stringify(a))},a.prototype._clear=function(){return window.localStorage.setItem(this._key,JSON.stringify({}))},a.prototype._get=function(a){return this._read()[a]},a.prototype._add=function(a,b){var c;return c=this._read(),c[a]=b,this._write(c)},a.prototype._remove=function(a){var b;return b=this._read(),void 0!==b[a]?(delete b[a],this._write(b)):void 0},a.prototype.defaults={historyPageSize:10,historyServerSync:!1,mainServerAddress:document.numeric.url.base.server},a.prototype.getDefault=function(a){return this.defaults[a]},a.prototype.get=function(a){var b;return b=this._get(a),void 0!==b?b:this.defaults[a]},a.prototype.set=function(a,b){return this._add(a,b)},a.prototype.unset=function(a){return this._remove(a)},a}(),console.log("CALL TO FACTORY: Settings"),new a}])}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};angular.module("AppOne").factory("ActivityManager",["$q","Bookmarks","ActivityBody","ActivityMeta",function(b,c,d,e){var f;return f=function(){function f(){this.updateActivity=a(this.updateActivity,this),this.bookmarks=c.bookmarks}return f.prototype.getInstalledActivitiesMeta=function(){return this.bookmarks},f.prototype.getInstalledActivityMeta=function(a){return this.bookmarks[a]},f.prototype.isInstalled=function(a){return void 0!==this.bookmarks[a]},f.prototype.installActivity=function(a,f){var g;return g=b.defer(),f&&e.set(a,f),d.loadActivity(a).then(function(){return d.unloadActivity(a)}).then(function(){return c.add(a,f),g.resolve("ok")})["catch"](function(a){return console.log(a),g.reject(a)}),g.promise},f.prototype.uninstallActivity=function(a){var e;return e=b.defer(),d.unloadActivity(a),d.removeBody(a).then(function(){return function(){return c.remove(a),e.resolve("ok")}}(this)),e.promise},f.prototype.updateActivity=function(a,c){var d;return d=b.defer(),this.uninstallActivity(a).then(function(b){return function(e){return b.installActivity(a,c),d.resolve(e)}}(this)),d.promise},f.prototype.loadActivity=function(a){return d.getOrLoad(a)},f}(),console.log("CALL TO FACTORY: ActivityManager"),new f}])}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}};angular.module("AppOne").factory("ActivityDriver",["$timeout","$sce","$q","ActivitySummary",function(b,c,d,e){var f,g;return f=function(){function a(a){this.currentTask=a,this.name=this.currentTask.meta.name,this.parameters=this.currentTask.parameters}return a.prototype.newQuestion=function(){var a;return this.question=this.currentTask.createNextQuestion(),void 0===this.question?void 0:(this.questionStatement_=this.question.statement,this.questionStatementAsHTML_=c.trustAsHtml(this.question.statement),"numeric"===this.question.answerType&&(this.inputTypeNumeric=!0,this.inputTypeMultipleChoice=!1,this.questionStatement=this.question.answerOnNextLine?this.questionStatement_:this.questionStatement_+" = "),"multiple"===this.question.answerType&&(this.inputTypeNumeric=!1,this.inputTypeMultipleChoice=!0,this.questionStatement=this.questionStatement_),this.answerOnNextLine=this.question.answerOnNextLine?!0:!1,this.sizingClass=this.question.sizingClassCode&&(this.question.sizingClassCode=5)?"sizeMakeSmaller":"sizeKeepSame",this.questionStatementAsHTML=c.trustAsHtml(this.questionStatement),this.questionStatementChoices=this.question.choices,a={questionStatement_:this.questionStatement_,questionStatementAsHTML_:this.questionStatementAsHTML_,questionStatement:this.questionStatement,questionStatementAsHTML:this.questionStatementAsHTML,questionStatementChoices:this.questionStatementChoices})},a.prototype.questionString=function(){var a;return a=answer,this.inputTypeMultipleChoice&&(a=this.questionStatementChoices[answer]),a},a.prototype.answerString=function(a){var b;return b=a,this.inputTypeMultipleChoice&&(b=this.questionStatementChoices[a]),b},a.prototype.checkAnswer=function(a){return this.question.checkAnswer(a)},a}(),g=function(){function c(){this._checkAnswer=a(this._checkAnswer,this),this.clearResult(),this.resetStats(),this._clearLastQuestion()}return c.prototype._markCorrectResult=function(){return this.statsCorrect=this.statsCorrect+1,this.result={"class":"correct",verbal:"Excellent!"}},c.prototype._markWrongResult=function(){return this.statsWrong=this.statsWrong+1,this.result={"class":"incorrect",verbal:"Wrong..."}},c.prototype.clearResult=function(){return this.result={"class":"none",verbal:"&nbsp;"}},c.prototype.resetStats=function(){return this.statsCorrect=0,this.statsWrong=0,this.totalTime=0/0,this.startTime=new Date},c.prototype._clearLastQuestion=function(){return this.answeredQuestion={statement:"","class":"correct",time:""}},c.prototype.setActivity=function(a,b){return this.currentTask=a,this.scope=b,this.clearResult(),this.resetStats(),this.currentActivity=new f(this.currentTask),this.taskName=this.currentTask.meta.name,this._clearLastQuestion(),this.newQuestion(),this.startTime=new Date,e.init(this.currentTask.id,this.currentTask.meta.name),this.currentActivity},c.prototype.tryFinishActivity=function(){var a;return a=d.defer(),e.finish().then(function(b){return a.resolve(b)})["catch"](function(b){return console.log("error finishing task:"+b),a.reject(b)}),a.promise},c.prototype.selectParamValue=function(a,b){return this.currentActivity.parameters[a].selectedValue=b,this.newQuestion(!0)},c.prototype.newQuestion=function(a){return this.totalTime=Math.round((new Date-this.startTime)/1e3),this.answer=void 0,this.question=this.currentActivity.newQuestion(),void 0===this.question?(this.scope.$broadcast("end-of-test"),void this.scope.$broadcast("timer-stop")):(this.questionStatement_=this.question.questionStatement_,this.questionStatementAsHTML_=this.question.questionStatementAsHTML_,this.questionStatement=this.question.questionStatement,this.questionStatementAsHTML=this.question.questionStatementAsHTML,this.questionStatementChoices=this.question.questionStatementChoices,a?void 0:this.scope.$broadcast("timer-start"))},c.prototype._checkAnswer=function(a){var c;return this.scope.$broadcast("timer-stop"),c=this.currentActivity.answerString(a),this.currentActivity.checkAnswer(a)?(this._markCorrectResult(),this.answeredQuestion={statement:this.questionStatement_,statementAsHTML:this.questionStatementAsHTML_,answer:c,result:!0}):(this._markWrongResult(),this.answeredQuestion={statement:this.questionStatement_,statementAsHTML:this.questionStatementAsHTML_,answer:c,result:!1}),e.add(this.answeredQuestion),b(function(a){return function(){return a.result["class"]="none"}}(this),1e3)},c.prototype.pressed=function(a){return this.clearResult(),void 0===this.answer&&(this.answer=0),this.answer=10*this.answer+a},c.prototype.clear=function(){return this.answer=void 0},c.prototype.enter=function(){return void 0!==this.answer?(this._checkAnswer(this.answer),this.newQuestion()):void 0},c.prototype.pressedChoice=function(a){return this._checkAnswer(a),this.newQuestion()},c}(),console.log("CALL TO FACTORY: ActivityDriver"),new g}])}.call(this),function(){angular.module("AppOne").controller("TaskCtrl",["$scope","$routeParams","$location","ActivityDriver","ActivityManager",function(a,b,c,d,e){var f;return f=b.taskId,void 0===f||""===f?c.path("/"):(a.activityDriver=d,e.loadActivity(f).then(function(b){return a.currentActivity=d.setActivity(b,a),a.finishActivity=function(){return d.tryFinishActivity().then(function(a){return console.log(a),c.path("/historyItem/"+a+"/tasksList")})["catch"](function(a){return console.log("could not finish activity: "+a)})}})["catch"](function(){return c.path("/")}))}])}.call(this),function(){angular.module("AppOne").controller("TasksMarketplaceCtrl",["$scope","Marketplace","ActivityManager",function(a,b,c){var d;return a.currentTab=Object.keys(c.getInstalledActivitiesMeta()).length<1?"available":"installed",a.selectTab=function(b){return a.currentTab=b,a.confirmRemoveId=void 0,a.confirmAddId=void 0,a.detailsId=void 0},a.toggleDetailsId=function(b){return void 0!==a.confirmRemoveId?void(a.confirmRemoveId=void 0):void 0!==a.confirmAddId?void(a.confirmAddId=void 0):void 0!==a.confirmUpdateId?void(a.confirmUpdateId=void 0):a.detailsId===b?void(a.detailsId=void 0):a.detailsId=b},a.mapOfAvailableActivities=c.getInstalledActivitiesMeta(),a.somethingInstalled=function(){return Object.keys(c.getInstalledActivitiesMeta()).length>0},a.isInstalled=function(a){return c.isInstalled(a)},a.needsUpdate=function(a,b){var d;return b.version?(d=c.getInstalledActivityMeta(a),d.version?b.version>d.version:!0):!1},a.uninstallActivity=function(a){return c.uninstallActivity(a)},a.installNewActivity=function(b,d){return a.loadingActivity=b,c.installActivity(b,d)["catch"](function(){return function(a){return console.log("error installing: "+a)}}(this)).then(function(){return a.loadingActivity=void 0})},a.updateActivity=function(b,d){return a.loadingActivity=b,c.updateActivity(b,d)["catch"](function(){return function(a){return console.log("error updating: "+a)}}(this)).then(function(){return a.loadingActivity=void 0})},a.pageNumber=0,d=function(c){return a.loadingList=!0,b.getPublicActivitiesMeta(a.pageNumber,c).then(function(b){return a.errorStatus=void 0,a.availableActivitiesMeta=b.data.activities})["catch"](function(c){return console.log("Could not get list of activity metas from server, status: "+c),a.errorStatus=c,b.getLocalActivitiesMeta().then(function(b){return a.availableActivitiesMeta=b.data.activities})["catch"](function(a){return console.log("error getting local available activities list: "+a)})}).then(function(){return a.loadingList=!1})},d(a.searchTermPublic),a.tryGettingPublicAgain=function(){return d(a.searchTermPublic)},a.searchPublic=function(){var b;return b=a.searchTermPublic,void 0===b||(b=b.trim(),b.length<3)?void 0:d(b)}}])}.call(this),function(){angular.module("AppOne").controller("SettingsCtrl",["$scope","Settings","ActivityMeta","ActivityBody","Bookmarks",function(a,b){return a.getAttr=function(a){return b.get(a)},a.setAttr=function(a,c){return b.set(a,c)},a.defaultMainServerAddress=b.getDefault("mainServerAddress"),a.mainServerAddress=b.get("mainServerAddress"),a.newMainServerAddress=a.mainServerAddress,a.mainServerAddress_set=function(){var c;return c=a.newMainServerAddress.trim().replace("http://","https://"),0!==c.length?("/"!==c[c.length-1]&&(c+="/"),b.set("mainServerAddress",c),a.mainServerAddress=b.get("mainServerAddress"),a.newMainServerAddress=a.mainServerAddress):void 0},a.mainServerAddress_reset=function(){return b.unset("mainServerAddress"),a.mainServerAddress=b.get("mainServerAddress"),a.newMainServerAddress=a.mainServerAddress},a.clearLocalStorage=function(){return window.localStorage.clear()}}])}.call(this),function(){angular.module("AppOne").controller("HistoryCtrl",["$scope","$routeParams","Settings","ActivitySummary",function(a,b,c,d){var e;return a.activitySummariesInfoAll=d.getAllSummaries(),a.totalItems=a.activitySummariesInfoAll.length,a.noHistory=a.activitySummariesInfoAll.length<1,a.$watch("activitySummariesInfoAll",function(b){return a.noHistory=b.length<1,a.totalItems=b.length},!0),a.getPage=function(){return function(b,c){return a.activitySummariesInfo=d.getAllSummariesPage(b,c)}}(this),a.refreshList=function(){return d.setFirstIndex(a.startIndex),a.getPage(a.startIndex,a.endIndex)},a.pageSize=c.get("historyPageSize"),a.turnPage=function(b){return a.startIndex=a.startIndex+b<0||a.totalItems<1?0:a.startIndex+b>=a.totalItems?Math.floor((a.totalItems-1)/a.pageSize)*a.pageSize:a.startIndex+b,a.endIndex=Math.min(a.startIndex+a.pageSize,a.totalItems),a.refreshList()},e=b.containedItem,a.startIndex=void 0!==e&&"continue"===e?d.getFirstIndex():-1,a.turnPage(0)}]).controller("HistoryItemCtrl",["$scope","$routeParams","$location","ActivitySummary",function(a,b,c,d){var e,f;return f=b.itemId,void 0===f||""===f||"test"===f?c.path("/"):(e=b.backButton,a.backButton=void 0!==e&&""!==e&&"test"!==e?"#/tasksList":"#/history/continue",d.getSummaryById(f).then(function(b){return"mismatch"===b?a.mismatch=!0:(a.mismatch=!1,a.activityName=b.activityName,a.responses=b.responses,a.correct=b.runningTotals.correct,a.wrong=b.runningTotals.wrong,a.total=b.runningTotals.correct+b.runningTotals.wrong,a.totalSeconds=Math.round((b.endTime-b.startTime)/1e3),a.avgSeconds=Math.round((b.endTime-b.startTime)/a.total/1e3)),a.ready=!0})["catch"](function(b){return console.log(b),a.mismatch=!0,a.ready=!0,c.path("/")}))}])}.call(this),function(){angular.module("AppOne").controller("ConnectCtrl",["$scope","$rootScope","$routeParams","Connections",function(a,b,c,d){return a.teachers=d.getAll(),a.noTeachers=!1}]).controller("AddTeacherCtrl",["$scope","$location","Connections",function(a,b,c){var d,e;return a.teacherId="",a.scan=function(){return cordova.plugins.barcodeScanner.scan(function(b){return a.teacherId=b.text,console.log("scanned: "+b.text)},function(b){return a.error=b,console.log("scanned-error: "+b)})},d=function(a){return 32===a.length},e=function(a){return a.length>1&&a.length<30},a.addTeacher=function(){return function(){return console.log("adding"),d(a.teacherId)&&e(a.teacherName)?(console.log("passed"),c.add({id:a.teacherId,name:a.teacherName,newItems:0}),b.path("/connect")):void 0}}(this)}]).controller("TeachersCtrl",["$scope","DeviceId",function(a,b){return a.myId=b.devicePublicId}]).controller("MyIdentityCtrl",["$scope","DeviceId","QRSignature",function(a,b,c){return a.myId=b.devicePublicId,a.myId_p1=b.devicePublicId.substring(0,16),a.myId_p2=b.devicePublicId.substring(16),a.size=8,a.showCode=function(){var d,e;return d=c.encode(b.devicePublicId,a.size),e=document.getElementById("qrcode"),e.lastChild?e.replaceChild(d,e.lastChild):e.appendChild(d),1},a.smaller=function(){return a.size=Math.max(a.size-1,5),a.showCode()},a.bigger=function(){return a.size=Math.min(a.size+1,10),a.showCode()},a.showCode()}])}.call(this),function(){angular.module("AppOne").controller("TestCtrl",["$scope","$rootScope","$routeParams","$http","md5","FS",function(a,b,c,d,e,f){return a.showScriptsInHead=function(){var b,c,d,e,f;for(c=document.getElementsByTagName("script"),a.scripts=[],f=[],d=0,e=c.length;e>d;d++)b=c[d],f.push(void 0!==b.id&&""!==b.id?a.scripts.push(b):void 0);return f},a.getHttpsData=function(){return d.get("https://www.vicinitalk.com/api/v1/post/375/?format=json").then(function(b){return console.log(b),a.httpsdata=b.data
},function(a){return console.log("error: "+a)})},a.writeToFile=function(){return f.writeToFile("testdata.txt","hsellodata")},a.readFromFile=function(){return f.readFromFile("testdata.txt").then(function(b){return a.readData=b})},a.getContentsRaw=function(a){return f.getContents(a)},a.getFromLocal=function(b){return a.localData=window.localStorage.getItem(b)},a.testmd5=function(b){return a.localData=e.createHash(b)}}]).controller("SampleQuestionCtrl",["$scope","$sce","KristaQuestions",function(a,b,c){return a.regen=function(d){var e,f;return a.showAnswer=!1,f=c.generate(d),a.question=b.trustAsHtml(f[0][0]),f[0].length>1?(a.choices=function(){var a,c,d,g;for(d=f[0][1],g=[],a=0,c=d.length;c>a;a++)e=d[a],g.push(b.trustAsHtml(e));return g}(),a.answer=b.trustAsHtml(f[0][1][f[1]])):(a.choices=void 0,a.answer=b.trustAsHtml(""+f[1]))},a.regen(4)}]).controller("SampleQuestionOriginalCtrl",["$scope","$rootScope","$routeParams","$http","md5","FS",function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C;return u=[[["boy","boys"],["girl","girls"]],["kid","children"]],s=[[["red bird","red birds"],["blue bird","blue birds"]],["bird","birds"]],r=[[["red ball","red balls"],["green ball","green balls"]],["ball","balls"]],v=[[["red marble","red marbles"],["blue marble","blue marbles"]],["marble","marbles"]],w=[[["pencil","pencils"],["pen","pens"]],["pen or pencil","pens and pencils"]],q=[[["apple","apples"],["banana","bananas"]],["fruit","fruits"]],t=[[["book about computers","books about computers"],["book about food","books about food"]],["book","books"]],p=[s,r,v,w,q,t],k=[["class","jazz dance class"],"in the"],n=[["tree","tall"],"on the","sitting"],h=[[""],""],j=[["class"],"in the"],i=[["box"],"in the"],m=[["table"],"on the"],l=[["room"],"in the"],g=[h,j,i,m,l],B=function(a,b){return a+Math.random()*(b-a)|0},A=function(a){return Math.random()*a|0},C=function(a){return a[A(a.length)]},x=function(a){var b,c,d,e,f,g,h,i,j,k,l,m;for(b=".,;-!?",h=".!?",d="abcdefghijklmnopqrstuvwxyz",f="",g=void 0,k=!0,i=!0,l=0,m=a.length;m>l;l++)e=a[l],c=e.toLowerCase(),d.indexOf(c)>-1&&k&&(c=e.toUpperCase(),k=!1),h.indexOf(e)>-1&&(k=!0),b.indexOf(e)>-1&&(f+=e+" ",c="")," "===e?(j&&(c=""),j=!0):j=!1,f+=c;return f},y=B(1,7),z=B(1,7),o=B(2,7),f={location:C(g),elements:C(p),ratio:[y,z],numbers:[y*o,z*o]},c={location:k,elements:u,ratio:[1,2],numbers:[7,14]},d={location:n,elements:s,ratio:[1,2],numbers:[7,14]},e={location:n,elements:u,ratio:[1,2],numbers:[7,14]},b=function(a){var b;return b={},b.ratio=function(){return a.ratio.join(":")},b.number=function(b){return a.numbers[b]},b.numberTotal=function(){var b,c,d,e,f;for(c=0,f=a.numbers,d=0,e=f.length;e>d;d++)b=f[d],c+=b;return c},b.element=function(b){return a.elements[0][b][0]},b.elements=function(b){return a.elements[0][b][1]},b.item=function(){return a.elements[1][0]},b.items=function(){return a.elements[1][1]},b.inSet=function(b,c){var d;return d="",b&&a.location[2]&&(d+=a.location[2]+" "),d+=a.location[1],c&&a.location[0].length>1&&(d+=a.location[0][1]+" "),d+a.location[0][0]},b.thereAre=function(a){var c;return c="there ",c+=1===b.number(a)?"is 1 "+b.element(a):"are "+b.number(a)+" "+b.elements(a)},b.thereAreTotal=function(){var a,c;return c=b.numberTotal(),a="there ",a+=1===c?"is 1 "+b.item():"are "+c+" "+b.items()},b.ratioIs=function(a){return void 0===a||""===a?"the ratio of "+b.elements(0)+" to "+b.elements(1)+" is "+b.ratio():"the ratio of "+b.elements(0)+" to "+b.elements(1)+" "+a+" is "+b.ratio()},b.howMany=function(a){return"how many "+b.elements(a)+" are there"},b.howManyTotal=function(){return"how many "+b.items()+" are there"},b.ratioIsInSet=function(a,c){return b.ratioIs(b.inSet(a,c))},b.thereAreInSet=function(a,c,d){return b.thereAre(a)+" "+b.inSet(c,d)},b.thereAreTotalInSet=function(a,c){return b.thereAreTotal()+" "+b.inSet(a,c)},b.howManyInSet=function(a,c,d){return b.howMany(a)+" "+b.inSet(c,d)},b.howManyTotalInSet=function(a,c){return b.howManyTotal()+" "+b.inSet(a,c)},b.AifBthenwhatC=function(a,c,d,e){var f;return f=void 0!==e||""===e?a+". "+e+" "+c+", "+d+"?":a+". "+c+". "+d+"?",b.prettify(f)},b.AwhatCifB=function(a,c,d,e){var f;return(void 0===e||""===e)&&(e="if"),f=a+". "+d+" "+e+" "+c+"?",b.prettify(f)},b.ifBthenwhatC=function(a,c,d){var e;return e=void 0!==d||""===d?d+" "+a+", "+c+"?":a+". "+c+"?",b.prettify(e)},b.generate=function(){var a,c;return a=["AifBthenwhatC","AwhatCifB"],c=["if",""],b[C(a)](b.ratioIsActingInSet(),b.thereAre(0),b.howManyInSet(1),C(c))},b},a.c=b(f)}])}.call(this),function(){angular.module("AppOne").controller("HomeCtrl",["$scope","$rootScope","$routeParams",function(){}]).controller("InfoCtrl",["$scope","$rootScope","$routeParams",function(){}]).controller("TaskListCtrl",["$scope","ActivityManager","KristaQuestion",function(a,b){return a.tableOfAvailableActivities=b.getInstalledActivitiesMeta(),a.noActivities=Object.keys(a.tableOfAvailableActivities).length<1,a.$watch("tableOfAvailableActivities",function(){return a.noActivities=Object.keys(a.tableOfAvailableActivities).length<1},!0)}])}.call(this),function(){angular.module("AppOne").config(["$routeProvider",function(a){return a.when("/",{templateUrl:"assets/home.html",controller:"HomeCtrl"}).when("/info",{templateUrl:"assets/info.html",controller:"InfoCtrl"}).when("/tasksList",{templateUrl:"assets/tasksList.html",controller:"TaskListCtrl"}).when("/task/:taskId",{templateUrl:"assets/task.html",controller:"TaskCtrl"}).when("/history",{templateUrl:"assets/history.html",controller:"HistoryCtrl"}).when("/history/:containedItem",{templateUrl:"assets/history.html",controller:"HistoryCtrl"}).when("/historyItem/:itemId",{templateUrl:"assets/historyItem.html",controller:"HistoryItemCtrl"}).when("/historyItem/:itemId/:backButton",{templateUrl:"assets/historyItem.html",controller:"HistoryItemCtrl"}).when("/tasksMarketplace",{templateUrl:"assets/tasksMarketplace.html",controller:"TasksMarketplaceCtrl"}).when("/settings",{templateUrl:"assets/settings.html",controller:"SettingsCtrl"}).when("/connect",{templateUrl:"assets/connect.html",controller:"ConnectCtrl"}).when("/myIdentity",{templateUrl:"assets/myIdentity.html",controller:"MyIdentityCtrl"}).when("/teachers",{templateUrl:"assets/teachers.html",controller:"TeachersCtrl"}).when("/addTeacher",{templateUrl:"assets/addTeacher.html",controller:"AddTeacherCtrl"}).when("/test",{templateUrl:"assets/test.html",controller:"TestCtrl"}).when("/sampleQuestion",{templateUrl:"assets/sampleQuestion.html",controller:"SampleQuestionCtrl"}).otherwise({redirectTo:"/"})}]).run(["$route","$location","ActivityDriver",function(a,b){return a.reload(),document.addEventListener("backbutton",function(){return function(){var c;return c=b.path(),"undefined"==typeof c||"/task/"!==c.substr(0,6)?"undefined"!=typeof c&&"/taskSummary"===c.substr(0,12)?void b.path("/history"):(b.path("/"),a.reload()):void 0}}(this),!1),document.addEventListener("menubutton",function(){return function(){var c;return c=b.path(),console.log("menu button, current: "+c),"undefined"!=typeof c&&"/task/"===c.substr(0,6)||"undefined"!=typeof c&&"/settings"===c.substr(0,9)?void 0:(b.path("/settings"),a.reload())}}(this),!1)}]).config(["$compileProvider","$httpProvider",function(a,b){return a.aHrefSanitizationWhitelist(/^\s*(https?|cdvfile|ftp|mailto|file|tel):/),b.defaults.useXDomain=!0}])}.call(this);